(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{5805:function(s,t,a){s.exports=a.p+"assets/img/5rxqugj8dh.09eab176.png"},5806:function(s,t,a){s.exports=a.p+"assets/img/image-20201209160422978.b59d5418.png"},5807:function(s,t,a){s.exports=a.p+"assets/img/image-20201209162908979.a216962f.png"},6213:function(s,t,a){"use strict";a.r(t);var n=a(15),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"tcp协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tcp协议"}},[s._v("#")]),s._v(" TCP协议")]),s._v(" "),n("h2",{attrs:{id:"_1-tcp协议是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-tcp协议是什么"}},[s._v("#")]),s._v(" 1. TCP协议是什么?")]),s._v(" "),n("p",[s._v("TCP(Transmission Control Protocol 传输控制协议) 是一种面向连接(连接导向) 的、可靠的、 基于IP的传输层协议。")]),s._v(" "),n("p",[s._v("TCP 使⽤校验、确认和重传机制来保证可靠传输")]),s._v(" "),n("p",[n("strong",[s._v("而 HTTP协议 就是建立在 TCP / IP 协议 之上的一种应用。")])]),s._v(" "),n("p",[s._v("TCP: 三次握手, 四次挥手~")]),s._v(" "),n("h2",{attrs:{id:"_2-一次完整的http服务过程是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-一次完整的http服务过程是什么"}},[s._v("#")]),s._v(" 2. 一次完整的HTTP服务过程是什么")]),s._v(" "),n("p",[s._v("当我们在web浏览器的地址栏中输入："),n("code",[s._v("www.baidu.com")]),s._v("，具体发生了什么？")]),s._v(" "),n("ol",[n("li",[s._v("对"),n("code",[s._v("www.baidu.com")]),s._v("这个网址进行DNS域名解析，得到对应的IP地址")]),s._v(" "),n("li",[s._v("根据这个IP，找到对应的服务器，发起TCP的三次握手")]),s._v(" "),n("li",[s._v("建立TCP连接后, 发起HTTP请求")]),s._v(" "),n("li",[s._v("服务器响应HTTP请求，浏览器得到html代码")]),s._v(" "),n("li",[s._v("浏览器解析html代码，并请求html代码中的资源（如js、css、图片等）（先得到html代码，才能去找这些资源）")]),s._v(" "),n("li",[s._v("浏览器对页面进行渲染呈现给用户")]),s._v(" "),n("li",[s._v("服务过程完毕, 关闭TCP连接, 四次挥手")])]),s._v(" "),n("p",[s._v("注：")]),s._v(" "),n("p",[s._v("1.DNS怎么找到域名的？")]),s._v(" "),n("blockquote",[n("p",[s._v("DNS域名解析采用的是递归查询的方式，过程是，先去找DNS缓存->缓存找不到就去找根域名服务器->根域名又会去找下一级，这样递归查找之后，找到了，给我们的web浏览器")])]),s._v(" "),n("p",[s._v("2.为什么HTTP协议要基于TCP来实现？")]),s._v(" "),n("blockquote",[n("p",[s._v("TCP是一个端到端的可靠面相连接的协议，HTTP基于传输层TCP协议不用担心数据传输的各种问题（当发生错误时，可以重传）")])]),s._v(" "),n("p",[s._v("3.最后一步浏览器是如何对页面进行渲染的？")]),s._v(" "),n("blockquote",[n("p",[s._v("a）解析html文件构成 DOM树\nb）解析CSS文件构成渲染树\nc）边解析，边渲染\nd）JS 单线程运行，JS有可能修改DOM结构，意味着JS执行完成前，后续所有资源的下载是没有必要的，所以JS是单线程，会阻塞后续资源下载")])]),s._v(" "),n("h2",{attrs:{id:"_3-什么是dns-解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-什么是dns-解析"}},[s._v("#")]),s._v(" 3. 什么是DNS 解析")]),s._v(" "),n("p",[n("strong",[s._v("DNS解析（域名解析服务器）")]),s._v("  将 域名 转换成 ip地址   (一个域名和ip的映射关系, 具体登记在哪里, 看我们如何申请关联的!)")]),s._v(" "),n("p",[s._v("假定请求的是 www.baidu.com")]),s._v(" "),n("p",[s._v("a）首先会搜索浏览器自身的DNS缓存（缓存时间比较短，大概只有1分钟，且只能容纳1000条缓存）")]),s._v(" "),n("p",[s._v("b）如果浏览器自身的缓存里面没有找到，那么浏览器会搜索系统自身的DNS缓存")]),s._v(" "),n("p",[s._v("c）如果还没有找到，那么尝试从 hosts 文件里面去找  (一个系统电脑的文件, 可以编辑, 可以存 域名 和 ip 的对应关系)")]),s._v(" "),n("p",[s._v("d）在前面三个过程都没获取到的情况下，就递归地去域名服务器去查找(就近查找)，具体过程如下")]),s._v(" "),n("p",[n("img",{attrs:{src:a(5805),alt:"dns域名解析"}})]),s._v(" "),n("p",[s._v("DNS优化两个方面：DNS缓存、DNS负载均衡 (准备多台dns服务器, 进行dns解析)")]),s._v(" "),n("h2",{attrs:{id:"_4-tcp-三次握手理解-双方确认"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-tcp-三次握手理解-双方确认"}},[s._v("#")]),s._v(" 4. TCP 三次握手理解 (双方确认)")]),s._v(" "),n("p",[s._v("TCP是一个端到端的  "),n("strong",[s._v("可靠")]),s._v("  面相连接的协议，")]),s._v(" "),n("p",[s._v("HTTP基于传输层TCP协议不用担心数据传输的各种问题（当发生错误时，可以重传）")]),s._v(" "),n("p",[s._v("根据这个IP，找到对应的服务器，发起TCP的三次握手 ("),n("a",{attrs:{href:"https://blog.csdn.net/qq_38950316/article/details/81087809",target:"_blank",rel:"noopener noreferrer"}},[s._v("tcp 三次握手四次挥手"),n("OutboundLink")],1),s._v(" )")]),s._v(" "),n("p",[n("img",{attrs:{src:a(5806),alt:"image-20201209160422978"}})]),s._v(" "),n("p",[n("strong",[s._v("为什么要3次握手")])]),s._v(" "),n("p",[s._v("我们假定第一次发送的请求,  因为网络延迟很慢才到达服务端，")]),s._v(" "),n("p",[s._v("然后客户端以为这服务器居然不理睬我，然后默默的关闭的等待连接的请求，走开了（好比追女神）；")]),s._v(" "),n("p",[s._v("但事实呢？女神（服务器）是因为各种各样的原因，很晚才看到，然后说我接受你了, 同意你的要求咱们两结婚吧！")]),s._v(" "),n("p",[s._v("但是，A早已经远走高飞，这个请求A完全不会收到（在第二次握手，服务端打开连接，等待客户端的响应），")]),s._v(" "),n("p",[s._v("那么女生呢，以为对方收到了，就会一直等待，这样B的资源就会被浪费的（创建连接的时候，空间浪费以及端口消耗）；")]),s._v(" "),n("p",[s._v("而三次握手, 就不会发生，服务端同意连接了，但是A缺一直没有下一步的动作，导致资源浪费；")]),s._v(" "),n("h2",{attrs:{id:"_5-关闭tcp连接四次挥手的理解-客气挽留"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-关闭tcp连接四次挥手的理解-客气挽留"}},[s._v("#")]),s._v(" 5. 关闭TCP连接四次挥手的理解 (客气挽留)")]),s._v(" "),n("p",[s._v("目标: 关闭连接(四次挥手)")]),s._v(" "),n("p",[s._v("不能直接一次性断开连接(双方知晓), 万一还有什么数据没有传完, 造成数据的丢失!")]),s._v(" "),n("p",[n("img",{attrs:{src:a(5807),alt:"image-20201209162908979"}})]),s._v(" "),n("p",[s._v("这和有礼貌的好友道别一样：（a：客户端 b:服务端）\n1、一开始A想要回家离开，但是呢？怕B还有事情要交代，那么呢？只好先向B打招呼，我要走了，请求停止交谈(请求断开连接)")]),s._v(" "),n("p",[s._v("​    (此时，a到B的连接没有断开，依旧可以进行通信）；\n2、同意A的请求，说好的，但是我这里可能还有一些话（数据）没说完。我检查看看,  你等等,  等我说完你再走。\n3、B确实没啥要补充的了，就告知你我可以撤了\n4、A说好的，知道了，88；（B得知A走开了，关闭了自己的连接 )")]),s._v(" "),n("p",[n("strong",[s._v("完整的一次 http 请求流程才算结束")])]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 浏览器中, 输入地址: www.baidu.com, 到最后用户在浏览器中看到完整的页面, ")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 中间发生了什么事情? 做了什么处理? (简述一次完整的http服务的过程, 底层就是tcp协议)")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 输入www.baidu.com, 回车后, 需要先进行DNS解析, 得到IP地址")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    可以在cmd中ping www.baidu.com  112.80.248.75")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 根据IP地址, 找到服务器, 开始建立TCP连接, 三次握手")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 浏览器端发送 http请求, 服务器端进行响应 index.html")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 浏览器解析 index.html, 加载 index.html 中需要加载的其他一些资源(图片, css, js)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    ...")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 浏览器完成页面的解析渲染")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 6. http服务完成, 释放关闭TCP连接, 四次挥手")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 强化认知:")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. DNS解析, 将域名 => ip地址")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 建立连接 => 三次握手 (双方确认)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (1) 服务器啊, 我是浏览器, 我要和你建立连接")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (2) 服务器看到了, 好的, 那么建立连接吧, 我准备好了, 你确定吗?")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (3) 浏览器: 是的, 我确定!")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    连接就建立成功")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    三次握手 = 连接的发起 + 双方的确认")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 断开连接 => 四次挥手 (客气挽留)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (1) 一方A发起断开连接的消息")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (2) 另一方B会确认收到断开的需求, 但是会要求等一等, 确认是否数据传输完毕")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (3) B当确认完之后, 确实数据都传完了, 告知A, 连接可以断开了")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (4) A确认收到消息, 告知B, 我要走了")]),s._v("\n\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户输入网址到最终渲染出来, 发生了哪些事情?")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 输入www.baidu.com网址, DNS解析(域名映射的过程), 将域名转换成ip地址 (计算机在网络中的标识)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 根据ip地址, 就可以找到服务器, 尝试建立TCP连接, 三次握手")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    三次握手: 一次发起连接, 两次 => 双方确认")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 发起 http 请求, 服务器端做出响应, 响应index.html")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 浏览器解析 index.html, 加载其他的一些资源 图片, js等")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 浏览器完成渲染")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 6. http服务结束, 断开TCP连接, 四次挥手(客气挽留)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (1) A我要撤了, 我要断开连接 ")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (2) B你先等等, 我看看, 还有没有没发完的数据  (A就在等着)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        ...")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (3) B检查完, 确实没有什么额外的数据要传输了, 跟A说, 你撤吧, 你断开连接吧")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    (4) A: 好的, 那我走了 (A准备要断开连接了)")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        B收到A的确认关闭的消息后, B就会直接断开, 而A还会再等一等")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        ...")]),s._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("hr")])}),[],!1,null,null,null);t.default=e.exports}}]);