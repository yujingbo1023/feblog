(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{5979:function(t,s,_){"use strict";_.r(s);var a=_(15),v=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_1-网络请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-网络请求"}},[t._v("#")]),t._v(" 1, 网络请求")]),t._v(" "),a("h2",{attrs:{id:"_1-1-网络请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-网络请求"}},[t._v("#")]),t._v(" 1.1, 网络请求")]),t._v(" "),a("p",[a("strong",[t._v("微信提供了专属的API接口,用于网络请求: wx.request(Object object)")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(728)}}),t._v(" "),a("ul",[a("li",[t._v("url: 必传")]),t._v(" "),a("li",[t._v("data: 请求参数")]),t._v(" "),a("li",[t._v("method: 请求的方式")]),t._v(" "),a("li",[t._v("success: 成功时的回调")]),t._v(" "),a("li",[t._v("fail: 失败时的回调")])]),t._v(" "),a("p",[a("strong",[t._v("出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下两个限制")])]),t._v(" "),a("ul",[a("li",[t._v("只能请求 HTTPS 类型的接口")]),t._v(" "),a("li",[t._v("必须将接口的域名添加到信任列表中")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(729)}}),t._v(" "),a("p",[a("strong",[t._v("网络请求域名配置")])]),t._v(" "),a("ul",[a("li",[t._v("每个微信小程序需要事先设置通讯域名，小程序只可以跟指定的域名进行网络通信")]),t._v(" "),a("li",[t._v("服务器域名请在 「小程序后台 - 开发 - 开发设置 - 服务器域名」 中进行配置，配置时需要注意")]),t._v(" "),a("li",[t._v("域名只支持 https 协议")]),t._v(" "),a("li",[t._v("域名不能使用 IP 地址或 localhost")]),t._v(" "),a("li",[t._v("域名必须经过 ICP 备案")]),t._v(" "),a("li",[t._v("服务器域名一个月内最多可申请 5 次修改")]),t._v(" "),a("li",[t._v("可以配置端口，如 https://myserver.com:8080，但是配置后只能向 https://myserver.com:8080 发起请求。如果向https://myserver.com、https://myserver.com:9091 等 URL 请求则会失败")]),t._v(" "),a("li",[t._v("如果不配置端口。如 https://myserver.com，那么请求的 URL 中也不能包含端口，甚至是默认的 443 端口也不可以。如果向 https://myserver.com:443 请求则会失败。")])]),t._v(" "),a("p",[a("strong",[t._v("跳过 request 合法域名校验")])]),t._v(" "),a("ul",[a("li",[t._v("如果后端程序员仅仅提供了 http 协议的接口、暂时没有提供 https 协议的接口。")]),t._v(" "),a("li",[t._v("此时为了不耽误开发的进度，我们可以在微信开发者工具中，临时开启「开发环境不校验请求域名、TLS 版本及 HTTPS 证书」选项，跳过 request 合法域名的校验。")]),t._v(" "),a("li",[t._v("跳过 request 合法域名校验的选项，仅限在开发与调试阶段使用")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(730)}}),t._v(" "),a("p",[a("strong",[t._v("关于跨域和 Ajax 的说明")])]),t._v(" "),a("ul",[a("li",[t._v("跨域问题只存在于基于浏览器的 Web 开发中。由于小程序的宿主环境不是浏览器，而是微信客户端，所以小程序中不存在跨域的问题")]),t._v(" "),a("li",[t._v("Ajax 技术的核心是依赖于浏览器中的 XMLHttpRequest 这个对象，由于小程序的宿主环境是微信客户端，所以小程序中不能叫做“发起 Ajax 请求”，而是叫做“发起网络数据请求”")])]),t._v(" "),a("h1",{attrs:{id:"_2-展示弹窗效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-展示弹窗效果"}},[t._v("#")]),t._v(" 2, 展示弹窗效果")]),t._v(" "),a("h2",{attrs:{id:"_2-1-弹窗效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-弹窗效果"}},[t._v("#")]),t._v(" 2.1, 弹窗效果")]),t._v(" "),a("p",[a("strong",[t._v("小程序中展示弹窗有四种方式: showToast、showModal、showLoading、showActionSheet")])]),t._v(" "),a("h1",{attrs:{id:"_3-分享功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-分享功能"}},[t._v("#")]),t._v(" 3, 分享功能")]),t._v(" "),a("h2",{attrs:{id:"_3-1-分享功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-分享功能"}},[t._v("#")]),t._v(" 3.1, 分享功能")]),t._v(" "),a("p",[a("strong",[t._v("分享是小程序扩散的一种重要方式，小程序中有两种分享方式")])]),t._v(" "),a("ul",[a("li",[t._v("方式一：点击右上角的菜单按钮，之后点击转发")]),t._v(" "),a("li",[t._v("方式二：点击某一个按钮，直接转发")])]),t._v(" "),a("p",[a("strong",[t._v("当我们转发给好友一个小程序时，通常小程序中会显示一些信息")])]),t._v(" "),a("ul",[a("li",[t._v("如何决定这些信息的展示呢？通过 onShareAppMessage")]),t._v(" "),a("li",[t._v('监听用户点击页面内转发按钮（button 组件 open-type="share"）或右上角菜单“转发”按钮的行为，并自定义转发内容')]),t._v(" "),a("li",[t._v("此事件处理函数需要 return 一个 Object，用于自定义转发内容")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(731)}}),t._v(" "),a("h1",{attrs:{id:"_4-获取设备信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-获取设备信息"}},[t._v("#")]),t._v(" 4, 获取设备信息")]),t._v(" "),a("h2",{attrs:{id:"_4-1-获取设备信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-获取设备信息"}},[t._v("#")]),t._v(" 4.1, 获取设备信息")]),t._v(" "),a("p",[a("strong",[t._v("在开发中，我们需要经常获取当前设备的信息，用于手机信息或者进行一些适配工作")])]),t._v(" "),a("ul",[a("li",[t._v("小程序提供了相关个API：wx.getSystemInfo(Object object)")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(732)}}),t._v(" "),a("h1",{attrs:{id:"_5-获取位置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-获取位置信息"}},[t._v("#")]),t._v(" 5, 获取位置信息")]),t._v(" "),a("h2",{attrs:{id:"_5-1-获取位置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-获取位置信息"}},[t._v("#")]),t._v(" 5.1, 获取位置信息")]),t._v(" "),a("p",[a("strong",[t._v("开发中我们需要经常获取用户的位置信息，以方便给用户提供相关的服务")])]),t._v(" "),a("ul",[a("li",[t._v("我们可以通过API获取：wx.getLocation(Object object)")])]),t._v(" "),a("p",[a("strong",[t._v("对于用户的关键信息，需要获取用户的授权后才能获得：")])]),t._v(" "),a("ul",[a("li",[t._v("https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#permission")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(733)}}),t._v(" "),a("h1",{attrs:{id:"_6-storage存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-storage存储"}},[t._v("#")]),t._v(" 6, Storage存储")]),t._v(" "),a("h2",{attrs:{id:"_6-1-storage存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-storage存储"}},[t._v("#")]),t._v(" 6.1, Storage存储")]),t._v(" "),a("p",[a("strong",[t._v("在开发中，某些常见我们需要将一部分数据存储在本地：比如token、用户信息等")])]),t._v(" "),a("ul",[a("li",[t._v("小程序提供了专门的Storage用于进行本地存储。")])]),t._v(" "),a("p",[a("strong",[t._v("同步存取数据的方法")])]),t._v(" "),a("ul",[a("li",[t._v("wx.setStorageSync(string key, any data)")]),t._v(" "),a("li",[t._v("any wx.getStorageSync(string key)")]),t._v(" "),a("li",[t._v("wx.removeStorageSync(string key)")]),t._v(" "),a("li",[t._v("wx.clearStorageSync()")])]),t._v(" "),a("p",[a("strong",[t._v("异步存储数据的方法")])]),t._v(" "),a("ul",[a("li",[t._v("wx.setStorage(Object object)")]),t._v(" "),a("li",[t._v("wx.getStorage(Object object)")]),t._v(" "),a("li",[t._v("wx.removeStorage(Object object)")]),t._v(" "),a("li",[t._v("wx.clearStorage(Object object)")])]),t._v(" "),a("h1",{attrs:{id:"_7-界面跳转"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-界面跳转"}},[t._v("#")]),t._v(" 7, 界面跳转")]),t._v(" "),a("h2",{attrs:{id:"_7-1-界面跳转"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-界面跳转"}},[t._v("#")]),t._v(" 7.1, 界面跳转")]),t._v(" "),a("p",[a("strong",[t._v("界面的跳转有两种方式：通过navigator组件 和 通过wx的API跳转")])]),t._v(" "),a("ul",[a("li",[t._v("以wx的API如下：")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(734)}}),t._v(" "),a("p",[a("strong",[t._v("页面跳转 - navigateTo")])]),t._v(" "),a("ul",[a("li",[t._v("保留当前页面，跳转到应用内的某个页面")]),t._v(" "),a("li",[t._v("但是不能跳到 tabbar 页面")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(735)}}),t._v(" "),a("p",[a("strong",[t._v("页面返回 - navigateBack")])]),t._v(" "),a("ul",[a("li",[t._v("关闭当前页面，返回上一页面或多级页面")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(736)}}),t._v(" "),a("p",[a("strong",[t._v("页面跳转 - 数据传递")])]),t._v(" "),a("ul",[a("li",[t._v("首页 -> 详情页：使用URL中的query字段")]),t._v(" "),a("li",[t._v("详情页 -> 首页：在详情页内部拿到首页的页面对象，直接修改数据")])]),t._v(" "),a("img",{staticStyle:{zoom:"60%"},attrs:{src:_(737)}}),t._v(" "),a("p",[a("strong",[t._v("早期数据的传递方式只能通过上述的方式来进行，在小程序基础库 2.7.3 开始支持events参数，也可以用于数据的传递")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(738)}}),t._v(" "),a("p",[a("strong",[t._v("navigator组件主要就是用于界面的跳转的，也可以跳转到其他小程序中")])]),t._v(" "),a("img",{staticStyle:{zoom:"70%"},attrs:{src:_(739)}}),t._v(" "),a("h1",{attrs:{id:"_8-小程序登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-小程序登录"}},[t._v("#")]),t._v(" 8, 小程序登录")]),t._v(" "),a("h2",{attrs:{id:"_8-1-小程序登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-小程序登录"}},[t._v("#")]),t._v(" 8.1, 小程序登录")]),t._v(" "),a("p",[a("strong",[t._v("为什么需要用户登录")])]),t._v(" "),a("ul",[a("li",[t._v("增加用户的粘性和产品的停留时间")])]),t._v(" "),a("p",[a("strong",[t._v("如何识别同一个小程序用户身份")])]),t._v(" "),a("ul",[a("li",[t._v("认识小程序登录流程")]),t._v(" "),a("li",[t._v("openid和unionid")]),t._v(" "),a("li",[t._v("获取code")]),t._v(" "),a("li",[t._v("换取authToken")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:_(740)}})])}),[],!1,null,null,null);s.default=v.exports},728:function(t,s,_){t.exports=_.p+"assets/img/71.4785958f.png"},729:function(t,s,_){t.exports=_.p+"assets/img/72.e16d0d98.png"},730:function(t,s,_){t.exports=_.p+"assets/img/73.23175f83.png"},731:function(t,s,_){t.exports=_.p+"assets/img/74.f8c15187.png"},732:function(t,s,_){t.exports=_.p+"assets/img/75.38588ad5.png"},733:function(t,s,_){t.exports=_.p+"assets/img/76.fdd5d1da.png"},734:function(t,s,_){t.exports=_.p+"assets/img/77.dd4385ab.png"},735:function(t,s,_){t.exports=_.p+"assets/img/78.f568915a.png"},736:function(t,s,_){t.exports=_.p+"assets/img/79.162f8c8b.png"},737:function(t,s,_){t.exports=_.p+"assets/img/80.517f8dd3.png"},738:function(t,s,_){t.exports=_.p+"assets/img/81.71200dac.png"},739:function(t,s,_){t.exports=_.p+"assets/img/82.bd19cdb6.png"},740:function(t,s,_){t.exports=_.p+"assets/img/83.56a1da84.png"}}]);