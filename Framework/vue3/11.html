<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>11-Vue3.x新版码路严选 | 码路教育</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/feblog/favicon.ico">
    <meta name="description" content="码路大前端课程">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/feblog/assets/css/0.styles.669bb7eb.css" as="style"><link rel="preload" href="/feblog/assets/js/app.51e0e5f0.js" as="script"><link rel="preload" href="/feblog/assets/js/28.9ddac576.js" as="script"><link rel="preload" href="/feblog/assets/js/1.485e4e25.js" as="script"><link rel="preload" href="/feblog/assets/js/7.c2cd89b4.js" as="script"><link rel="prefetch" href="/feblog/assets/js/10.917929da.js"><link rel="prefetch" href="/feblog/assets/js/100.b74c3c70.js"><link rel="prefetch" href="/feblog/assets/js/101.e23fc3f5.js"><link rel="prefetch" href="/feblog/assets/js/102.49a47bac.js"><link rel="prefetch" href="/feblog/assets/js/103.2f0fda80.js"><link rel="prefetch" href="/feblog/assets/js/104.5cde2432.js"><link rel="prefetch" href="/feblog/assets/js/105.0115ff48.js"><link rel="prefetch" href="/feblog/assets/js/106.a45ce9cb.js"><link rel="prefetch" href="/feblog/assets/js/107.d8b7386a.js"><link rel="prefetch" href="/feblog/assets/js/108.69b0a870.js"><link rel="prefetch" href="/feblog/assets/js/109.c6393bb9.js"><link rel="prefetch" href="/feblog/assets/js/11.6054d677.js"><link rel="prefetch" href="/feblog/assets/js/110.f2e3b9e8.js"><link rel="prefetch" href="/feblog/assets/js/111.40e1a489.js"><link rel="prefetch" href="/feblog/assets/js/112.8d56b7bf.js"><link rel="prefetch" href="/feblog/assets/js/113.98214060.js"><link rel="prefetch" href="/feblog/assets/js/114.4a97a66a.js"><link rel="prefetch" href="/feblog/assets/js/115.57cf1cf1.js"><link rel="prefetch" href="/feblog/assets/js/116.afe91e0d.js"><link rel="prefetch" href="/feblog/assets/js/117.b026e542.js"><link rel="prefetch" href="/feblog/assets/js/118.9a817209.js"><link rel="prefetch" href="/feblog/assets/js/119.ff02580d.js"><link rel="prefetch" href="/feblog/assets/js/12.698049e6.js"><link rel="prefetch" href="/feblog/assets/js/120.311920af.js"><link rel="prefetch" href="/feblog/assets/js/121.d24ee917.js"><link rel="prefetch" href="/feblog/assets/js/122.2db77c9e.js"><link rel="prefetch" href="/feblog/assets/js/123.1688cbc0.js"><link rel="prefetch" href="/feblog/assets/js/124.8a2fdefd.js"><link rel="prefetch" href="/feblog/assets/js/125.c35bac0c.js"><link rel="prefetch" href="/feblog/assets/js/126.7849c3e4.js"><link rel="prefetch" href="/feblog/assets/js/127.6165e139.js"><link rel="prefetch" href="/feblog/assets/js/128.55e67331.js"><link rel="prefetch" href="/feblog/assets/js/129.38aec961.js"><link rel="prefetch" href="/feblog/assets/js/13.ef800922.js"><link rel="prefetch" href="/feblog/assets/js/130.0ca52b7b.js"><link rel="prefetch" href="/feblog/assets/js/131.c9054903.js"><link rel="prefetch" href="/feblog/assets/js/132.45ce00d0.js"><link rel="prefetch" href="/feblog/assets/js/133.67b09727.js"><link rel="prefetch" href="/feblog/assets/js/134.268f3116.js"><link rel="prefetch" href="/feblog/assets/js/135.c5e4f0ba.js"><link rel="prefetch" href="/feblog/assets/js/136.6e942c82.js"><link rel="prefetch" href="/feblog/assets/js/137.14e612d1.js"><link rel="prefetch" href="/feblog/assets/js/138.a2ed982a.js"><link rel="prefetch" href="/feblog/assets/js/139.c5ef6fca.js"><link rel="prefetch" href="/feblog/assets/js/14.ed63de37.js"><link rel="prefetch" href="/feblog/assets/js/140.3b49c910.js"><link rel="prefetch" href="/feblog/assets/js/141.8d876e5d.js"><link rel="prefetch" href="/feblog/assets/js/142.0031267c.js"><link rel="prefetch" href="/feblog/assets/js/143.a468c7a6.js"><link rel="prefetch" href="/feblog/assets/js/144.f5e595b4.js"><link rel="prefetch" href="/feblog/assets/js/145.b8a3b344.js"><link rel="prefetch" href="/feblog/assets/js/146.e5957b7f.js"><link rel="prefetch" href="/feblog/assets/js/147.20d99137.js"><link rel="prefetch" href="/feblog/assets/js/148.1ea9d8fc.js"><link rel="prefetch" href="/feblog/assets/js/149.a6caea88.js"><link rel="prefetch" href="/feblog/assets/js/15.8a58ae5d.js"><link rel="prefetch" href="/feblog/assets/js/150.e22ce19f.js"><link rel="prefetch" href="/feblog/assets/js/151.81f46155.js"><link rel="prefetch" href="/feblog/assets/js/152.0bf88c43.js"><link rel="prefetch" href="/feblog/assets/js/153.453f5ba4.js"><link rel="prefetch" href="/feblog/assets/js/154.ba075558.js"><link rel="prefetch" href="/feblog/assets/js/155.0211f546.js"><link rel="prefetch" href="/feblog/assets/js/156.bea165ee.js"><link rel="prefetch" href="/feblog/assets/js/157.8812e544.js"><link rel="prefetch" href="/feblog/assets/js/158.b54b56db.js"><link rel="prefetch" href="/feblog/assets/js/159.04aef30f.js"><link rel="prefetch" href="/feblog/assets/js/16.3b869097.js"><link rel="prefetch" href="/feblog/assets/js/160.863e6471.js"><link rel="prefetch" href="/feblog/assets/js/161.acb97298.js"><link rel="prefetch" href="/feblog/assets/js/162.954ab48b.js"><link rel="prefetch" href="/feblog/assets/js/163.416e651f.js"><link rel="prefetch" href="/feblog/assets/js/164.09e57b25.js"><link rel="prefetch" href="/feblog/assets/js/165.f4970273.js"><link rel="prefetch" href="/feblog/assets/js/166.6f75b3ce.js"><link rel="prefetch" href="/feblog/assets/js/167.465ee437.js"><link rel="prefetch" href="/feblog/assets/js/168.faa982af.js"><link rel="prefetch" href="/feblog/assets/js/169.67b72388.js"><link rel="prefetch" href="/feblog/assets/js/17.8a0d2eed.js"><link rel="prefetch" href="/feblog/assets/js/170.ca0566ed.js"><link rel="prefetch" href="/feblog/assets/js/171.7caa1d29.js"><link rel="prefetch" href="/feblog/assets/js/172.6951d071.js"><link rel="prefetch" href="/feblog/assets/js/173.adcf6c1a.js"><link rel="prefetch" href="/feblog/assets/js/174.4f560e48.js"><link rel="prefetch" href="/feblog/assets/js/175.94be778e.js"><link rel="prefetch" href="/feblog/assets/js/176.4c2ee7dd.js"><link rel="prefetch" href="/feblog/assets/js/177.6a0c0a66.js"><link rel="prefetch" href="/feblog/assets/js/178.422cc4e0.js"><link rel="prefetch" href="/feblog/assets/js/179.f0fa409c.js"><link rel="prefetch" href="/feblog/assets/js/18.d11b998a.js"><link rel="prefetch" href="/feblog/assets/js/180.4c38675a.js"><link rel="prefetch" href="/feblog/assets/js/181.5cee6857.js"><link rel="prefetch" href="/feblog/assets/js/182.7d65d453.js"><link rel="prefetch" href="/feblog/assets/js/183.15df777b.js"><link rel="prefetch" href="/feblog/assets/js/184.2f0d20a7.js"><link rel="prefetch" href="/feblog/assets/js/185.9b247b03.js"><link rel="prefetch" href="/feblog/assets/js/186.e5e215fa.js"><link rel="prefetch" href="/feblog/assets/js/187.2d962ffd.js"><link rel="prefetch" href="/feblog/assets/js/188.adb6749e.js"><link rel="prefetch" href="/feblog/assets/js/189.e6ec5a7c.js"><link rel="prefetch" href="/feblog/assets/js/19.22a985e4.js"><link rel="prefetch" href="/feblog/assets/js/190.d4df43b0.js"><link rel="prefetch" href="/feblog/assets/js/191.0f9138f4.js"><link rel="prefetch" href="/feblog/assets/js/192.3518349f.js"><link rel="prefetch" href="/feblog/assets/js/193.a7ea2266.js"><link rel="prefetch" href="/feblog/assets/js/194.99b6b2a5.js"><link rel="prefetch" href="/feblog/assets/js/195.8e1b9c03.js"><link rel="prefetch" href="/feblog/assets/js/196.f65a2459.js"><link rel="prefetch" href="/feblog/assets/js/197.47ad7331.js"><link rel="prefetch" href="/feblog/assets/js/198.a8a38c30.js"><link rel="prefetch" href="/feblog/assets/js/199.2d2de8c0.js"><link rel="prefetch" href="/feblog/assets/js/20.7287eeb8.js"><link rel="prefetch" href="/feblog/assets/js/200.70e4bbcb.js"><link rel="prefetch" href="/feblog/assets/js/201.08fb26b4.js"><link rel="prefetch" href="/feblog/assets/js/202.4eb1d1a3.js"><link rel="prefetch" href="/feblog/assets/js/203.4c7cb450.js"><link rel="prefetch" href="/feblog/assets/js/204.69ce63be.js"><link rel="prefetch" href="/feblog/assets/js/205.d241c77b.js"><link rel="prefetch" href="/feblog/assets/js/206.e52ca885.js"><link rel="prefetch" href="/feblog/assets/js/207.8fbca6f4.js"><link rel="prefetch" href="/feblog/assets/js/208.0b6eacf1.js"><link rel="prefetch" href="/feblog/assets/js/209.e45efd84.js"><link rel="prefetch" href="/feblog/assets/js/21.3e789650.js"><link rel="prefetch" href="/feblog/assets/js/210.8f006a96.js"><link rel="prefetch" href="/feblog/assets/js/211.de5acbad.js"><link rel="prefetch" href="/feblog/assets/js/212.070f851c.js"><link rel="prefetch" href="/feblog/assets/js/213.bb4ab4e9.js"><link rel="prefetch" href="/feblog/assets/js/214.2bef203f.js"><link rel="prefetch" href="/feblog/assets/js/215.3c06ab52.js"><link rel="prefetch" href="/feblog/assets/js/216.3f2416b7.js"><link rel="prefetch" href="/feblog/assets/js/217.420eb8db.js"><link rel="prefetch" href="/feblog/assets/js/218.9aea3413.js"><link rel="prefetch" href="/feblog/assets/js/219.0fdda031.js"><link rel="prefetch" href="/feblog/assets/js/22.41f5f36d.js"><link rel="prefetch" href="/feblog/assets/js/220.713c7161.js"><link rel="prefetch" href="/feblog/assets/js/221.462d0636.js"><link rel="prefetch" href="/feblog/assets/js/222.64b9708b.js"><link rel="prefetch" href="/feblog/assets/js/223.68689766.js"><link rel="prefetch" href="/feblog/assets/js/224.b3cecf08.js"><link rel="prefetch" href="/feblog/assets/js/225.4c3994d4.js"><link rel="prefetch" href="/feblog/assets/js/226.feddff08.js"><link rel="prefetch" href="/feblog/assets/js/227.2cce5656.js"><link rel="prefetch" href="/feblog/assets/js/228.c830c5e9.js"><link rel="prefetch" href="/feblog/assets/js/229.527870e5.js"><link rel="prefetch" href="/feblog/assets/js/23.37b3c159.js"><link rel="prefetch" href="/feblog/assets/js/230.2916203a.js"><link rel="prefetch" href="/feblog/assets/js/231.9598980e.js"><link rel="prefetch" href="/feblog/assets/js/232.fd995d31.js"><link rel="prefetch" href="/feblog/assets/js/233.a9c88a10.js"><link rel="prefetch" href="/feblog/assets/js/234.9d20588f.js"><link rel="prefetch" href="/feblog/assets/js/235.ae447641.js"><link rel="prefetch" href="/feblog/assets/js/236.25bb92c8.js"><link rel="prefetch" href="/feblog/assets/js/237.f701a6b4.js"><link rel="prefetch" href="/feblog/assets/js/238.5cfac79e.js"><link rel="prefetch" href="/feblog/assets/js/239.6dcae85b.js"><link rel="prefetch" href="/feblog/assets/js/24.625f5224.js"><link rel="prefetch" href="/feblog/assets/js/240.5fec69a2.js"><link rel="prefetch" href="/feblog/assets/js/241.f9b6ee57.js"><link rel="prefetch" href="/feblog/assets/js/242.bf48cf57.js"><link rel="prefetch" href="/feblog/assets/js/243.87f1a268.js"><link rel="prefetch" href="/feblog/assets/js/244.4ae52fa2.js"><link rel="prefetch" href="/feblog/assets/js/245.1c870eca.js"><link rel="prefetch" href="/feblog/assets/js/246.fcc03245.js"><link rel="prefetch" href="/feblog/assets/js/247.f83fbe17.js"><link rel="prefetch" href="/feblog/assets/js/248.6b0f026e.js"><link rel="prefetch" href="/feblog/assets/js/249.7887fbba.js"><link rel="prefetch" href="/feblog/assets/js/25.81d42f85.js"><link rel="prefetch" href="/feblog/assets/js/250.e6f68eb2.js"><link rel="prefetch" href="/feblog/assets/js/251.8a169886.js"><link rel="prefetch" href="/feblog/assets/js/252.14c2e2ab.js"><link rel="prefetch" href="/feblog/assets/js/253.39f09c09.js"><link rel="prefetch" href="/feblog/assets/js/254.6fd0da63.js"><link rel="prefetch" href="/feblog/assets/js/255.75445af7.js"><link rel="prefetch" href="/feblog/assets/js/256.dbe1d9df.js"><link rel="prefetch" href="/feblog/assets/js/257.3872809a.js"><link rel="prefetch" href="/feblog/assets/js/258.50b0a4fa.js"><link rel="prefetch" href="/feblog/assets/js/259.74366e37.js"><link rel="prefetch" href="/feblog/assets/js/26.302ec89b.js"><link rel="prefetch" href="/feblog/assets/js/260.3eff5350.js"><link rel="prefetch" href="/feblog/assets/js/261.710a3f97.js"><link rel="prefetch" href="/feblog/assets/js/262.7c5fe7b8.js"><link rel="prefetch" href="/feblog/assets/js/263.e3202f51.js"><link rel="prefetch" href="/feblog/assets/js/264.f0130090.js"><link rel="prefetch" href="/feblog/assets/js/265.6de22cc3.js"><link rel="prefetch" href="/feblog/assets/js/266.78de00af.js"><link rel="prefetch" href="/feblog/assets/js/267.9624b0ed.js"><link rel="prefetch" href="/feblog/assets/js/268.8d00fd00.js"><link rel="prefetch" href="/feblog/assets/js/269.b18c2757.js"><link rel="prefetch" href="/feblog/assets/js/27.f7d018f4.js"><link rel="prefetch" href="/feblog/assets/js/270.af1f2f3f.js"><link rel="prefetch" href="/feblog/assets/js/271.f2f3b5ef.js"><link rel="prefetch" href="/feblog/assets/js/272.7bde4622.js"><link rel="prefetch" href="/feblog/assets/js/273.986af963.js"><link rel="prefetch" href="/feblog/assets/js/274.54ca2b10.js"><link rel="prefetch" href="/feblog/assets/js/275.f0dd17d0.js"><link rel="prefetch" href="/feblog/assets/js/276.9f797151.js"><link rel="prefetch" href="/feblog/assets/js/277.aa14e8e7.js"><link rel="prefetch" href="/feblog/assets/js/278.6b2862fa.js"><link rel="prefetch" href="/feblog/assets/js/279.bf62db3f.js"><link rel="prefetch" href="/feblog/assets/js/280.fbb75004.js"><link rel="prefetch" href="/feblog/assets/js/281.bf23825e.js"><link rel="prefetch" href="/feblog/assets/js/282.7ab8738b.js"><link rel="prefetch" href="/feblog/assets/js/283.483251ec.js"><link rel="prefetch" href="/feblog/assets/js/284.e4ab277a.js"><link rel="prefetch" href="/feblog/assets/js/285.69736e0a.js"><link rel="prefetch" href="/feblog/assets/js/286.7be5f926.js"><link rel="prefetch" href="/feblog/assets/js/287.39c3ba52.js"><link rel="prefetch" href="/feblog/assets/js/288.66023719.js"><link rel="prefetch" href="/feblog/assets/js/289.727e722b.js"><link rel="prefetch" href="/feblog/assets/js/29.095a92de.js"><link rel="prefetch" href="/feblog/assets/js/290.12cb0275.js"><link rel="prefetch" href="/feblog/assets/js/291.87badb48.js"><link rel="prefetch" href="/feblog/assets/js/292.cb3199db.js"><link rel="prefetch" href="/feblog/assets/js/293.e29b658d.js"><link rel="prefetch" href="/feblog/assets/js/294.5cc7baf3.js"><link rel="prefetch" href="/feblog/assets/js/295.7d9f8759.js"><link rel="prefetch" href="/feblog/assets/js/296.96f16cbc.js"><link rel="prefetch" href="/feblog/assets/js/297.1dde7dbe.js"><link rel="prefetch" href="/feblog/assets/js/298.5e16cbf6.js"><link rel="prefetch" href="/feblog/assets/js/299.c744a968.js"><link rel="prefetch" href="/feblog/assets/js/3.97e1c075.js"><link rel="prefetch" href="/feblog/assets/js/30.4013a413.js"><link rel="prefetch" href="/feblog/assets/js/300.2cff2e56.js"><link rel="prefetch" href="/feblog/assets/js/301.e8fcadbb.js"><link rel="prefetch" href="/feblog/assets/js/302.139fc43d.js"><link rel="prefetch" href="/feblog/assets/js/303.8073cc42.js"><link rel="prefetch" href="/feblog/assets/js/304.cdd54e48.js"><link rel="prefetch" href="/feblog/assets/js/305.3eeb5d0f.js"><link rel="prefetch" href="/feblog/assets/js/306.409287d8.js"><link rel="prefetch" href="/feblog/assets/js/307.76103d8a.js"><link rel="prefetch" href="/feblog/assets/js/308.74367a29.js"><link rel="prefetch" href="/feblog/assets/js/309.e6fdeea9.js"><link rel="prefetch" href="/feblog/assets/js/31.439a5282.js"><link rel="prefetch" href="/feblog/assets/js/310.1e0068d3.js"><link rel="prefetch" href="/feblog/assets/js/311.a4f38499.js"><link rel="prefetch" href="/feblog/assets/js/312.2f7cbaba.js"><link rel="prefetch" href="/feblog/assets/js/313.bb08201c.js"><link rel="prefetch" href="/feblog/assets/js/314.d6ef1298.js"><link rel="prefetch" href="/feblog/assets/js/315.f04c191b.js"><link rel="prefetch" href="/feblog/assets/js/316.4eeffd9d.js"><link rel="prefetch" href="/feblog/assets/js/317.c2dafb06.js"><link rel="prefetch" href="/feblog/assets/js/318.dd4844df.js"><link rel="prefetch" href="/feblog/assets/js/319.a3f9a149.js"><link rel="prefetch" href="/feblog/assets/js/32.3c5ab230.js"><link rel="prefetch" href="/feblog/assets/js/320.6a5eae12.js"><link rel="prefetch" href="/feblog/assets/js/321.7451f4f5.js"><link rel="prefetch" href="/feblog/assets/js/322.38ed7b52.js"><link rel="prefetch" href="/feblog/assets/js/323.b1ab34c8.js"><link rel="prefetch" href="/feblog/assets/js/324.8fb87523.js"><link rel="prefetch" href="/feblog/assets/js/325.c6dc4a7c.js"><link rel="prefetch" href="/feblog/assets/js/326.f6cc7544.js"><link rel="prefetch" href="/feblog/assets/js/327.0c6d69b3.js"><link rel="prefetch" href="/feblog/assets/js/328.a22750f8.js"><link rel="prefetch" href="/feblog/assets/js/329.5ba32951.js"><link rel="prefetch" href="/feblog/assets/js/33.2319aaaf.js"><link rel="prefetch" href="/feblog/assets/js/34.990b14c3.js"><link rel="prefetch" href="/feblog/assets/js/35.b4045abf.js"><link rel="prefetch" href="/feblog/assets/js/36.771dcbbd.js"><link rel="prefetch" href="/feblog/assets/js/37.33c87efd.js"><link rel="prefetch" href="/feblog/assets/js/38.422f31a0.js"><link rel="prefetch" href="/feblog/assets/js/39.acb4a3cb.js"><link rel="prefetch" href="/feblog/assets/js/4.28e0859f.js"><link rel="prefetch" href="/feblog/assets/js/40.82d731e6.js"><link rel="prefetch" href="/feblog/assets/js/41.559a1fe9.js"><link rel="prefetch" href="/feblog/assets/js/42.6172a66e.js"><link rel="prefetch" href="/feblog/assets/js/43.9318521a.js"><link rel="prefetch" href="/feblog/assets/js/44.c5134fa2.js"><link rel="prefetch" href="/feblog/assets/js/45.deef2319.js"><link rel="prefetch" href="/feblog/assets/js/46.9f6bd75c.js"><link rel="prefetch" href="/feblog/assets/js/47.cb0bb5e9.js"><link rel="prefetch" href="/feblog/assets/js/48.fef19c8c.js"><link rel="prefetch" href="/feblog/assets/js/49.0e41c1fb.js"><link rel="prefetch" href="/feblog/assets/js/5.17e70765.js"><link rel="prefetch" href="/feblog/assets/js/50.4ad062df.js"><link rel="prefetch" href="/feblog/assets/js/51.fcb398c1.js"><link rel="prefetch" href="/feblog/assets/js/52.15f0cffc.js"><link rel="prefetch" href="/feblog/assets/js/53.a5966c3d.js"><link rel="prefetch" href="/feblog/assets/js/54.57afbfd6.js"><link rel="prefetch" href="/feblog/assets/js/55.a0a22a47.js"><link rel="prefetch" href="/feblog/assets/js/56.d24d348a.js"><link rel="prefetch" href="/feblog/assets/js/57.92685dd2.js"><link rel="prefetch" href="/feblog/assets/js/58.1409be13.js"><link rel="prefetch" href="/feblog/assets/js/59.2a8dd6c5.js"><link rel="prefetch" href="/feblog/assets/js/6.b681c72a.js"><link rel="prefetch" href="/feblog/assets/js/60.a6ecd669.js"><link rel="prefetch" href="/feblog/assets/js/61.8da7eac7.js"><link rel="prefetch" href="/feblog/assets/js/62.dc39addf.js"><link rel="prefetch" href="/feblog/assets/js/63.57e0b896.js"><link rel="prefetch" href="/feblog/assets/js/64.fe4ad0c9.js"><link rel="prefetch" href="/feblog/assets/js/65.77469a81.js"><link rel="prefetch" href="/feblog/assets/js/66.b1329033.js"><link rel="prefetch" href="/feblog/assets/js/67.6b8c64ca.js"><link rel="prefetch" href="/feblog/assets/js/68.9ea95925.js"><link rel="prefetch" href="/feblog/assets/js/69.4531d2d8.js"><link rel="prefetch" href="/feblog/assets/js/70.cea0d065.js"><link rel="prefetch" href="/feblog/assets/js/71.a3af13dc.js"><link rel="prefetch" href="/feblog/assets/js/72.f2185f2b.js"><link rel="prefetch" href="/feblog/assets/js/73.412d366f.js"><link rel="prefetch" href="/feblog/assets/js/74.ac8b43a5.js"><link rel="prefetch" href="/feblog/assets/js/75.4dbb1c2f.js"><link rel="prefetch" href="/feblog/assets/js/76.71fefee5.js"><link rel="prefetch" href="/feblog/assets/js/77.032a0f4c.js"><link rel="prefetch" href="/feblog/assets/js/78.e15f8912.js"><link rel="prefetch" href="/feblog/assets/js/79.26447acc.js"><link rel="prefetch" href="/feblog/assets/js/8.20850346.js"><link rel="prefetch" href="/feblog/assets/js/80.6273b2f4.js"><link rel="prefetch" href="/feblog/assets/js/81.fbcec065.js"><link rel="prefetch" href="/feblog/assets/js/82.b7e4b0b1.js"><link rel="prefetch" href="/feblog/assets/js/83.ce83e000.js"><link rel="prefetch" href="/feblog/assets/js/84.10b646b8.js"><link rel="prefetch" href="/feblog/assets/js/85.a50fb953.js"><link rel="prefetch" href="/feblog/assets/js/86.960ac343.js"><link rel="prefetch" href="/feblog/assets/js/87.1126004b.js"><link rel="prefetch" href="/feblog/assets/js/88.bfb8b654.js"><link rel="prefetch" href="/feblog/assets/js/89.d7f803c8.js"><link rel="prefetch" href="/feblog/assets/js/9.cd028ea2.js"><link rel="prefetch" href="/feblog/assets/js/90.d24ae29e.js"><link rel="prefetch" href="/feblog/assets/js/91.3b282da2.js"><link rel="prefetch" href="/feblog/assets/js/92.3c2b76eb.js"><link rel="prefetch" href="/feblog/assets/js/93.26985fe4.js"><link rel="prefetch" href="/feblog/assets/js/94.a968f2d8.js"><link rel="prefetch" href="/feblog/assets/js/95.5ae5ffc7.js"><link rel="prefetch" href="/feblog/assets/js/96.149a7f6d.js"><link rel="prefetch" href="/feblog/assets/js/97.67a2ccaa.js"><link rel="prefetch" href="/feblog/assets/js/98.be3e383a.js"><link rel="prefetch" href="/feblog/assets/js/99.f964ff95.js">
    <link rel="stylesheet" href="/feblog/assets/css/0.styles.669bb7eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>码路教育</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>码路大前端课程</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>码路教育</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/feblog/" class="home-link router-link-active"><img src="/feblog/logo.png" alt="码路教育" class="logo"> <span class="site-name">码路教育</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/feblog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/basic/css/01.html" class="nav-link"><i class="undefined"></i>
  一，HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/mobile/01.html" class="nav-link"><i class="undefined"></i>
  二，移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/gitbasic/01.html" class="nav-link"><i class="undefined"></i>
  三，Git基础操作
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/js/01/01.html" class="nav-link"><i class="undefined"></i>
  四，JS基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/dom/01.html" class="nav-link"><i class="undefined"></i>
  五，DOM/BOM
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/jsplus/01.html" class="nav-link"><i class="undefined"></i>
  六，JS高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/less/01.html" class="nav-link"><i class="undefined"></i>
  七，LESS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端工程化与网络
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/network/node/01.html" class="nav-link"><i class="undefined"></i>
  一，node
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/webpack/01.html" class="nav-link"><i class="undefined"></i>
  二，webpack
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/ajax/01.html" class="nav-link"><i class="undefined"></i>
  三，ajax
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/program/" class="nav-link"><i class="undefined"></i>
  四，实战案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue2/01.html" class="nav-link"><i class="undefined"></i>
  一，vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue2plus/" class="nav-link"><i class="undefined"></i>
  二，vue2高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue3/" class="nav-link router-link-active"><i class="undefined"></i>
  三，vue3
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/mini/" class="nav-link"><i class="undefined"></i>
  四，小程序
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/react/" class="nav-link"><i class="undefined"></i>
  五，react基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/reactplus/" class="nav-link"><i class="undefined"></i>
  六，react高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/project/" class="nav-link"><i class="undefined"></i>
  七，项目列表
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/bushu/" class="nav-link"><i class="undefined"></i>
  八，项目部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/other/baguwen/" class="nav-link"><i class="undefined"></i>
  一，八股文与就业
</a></li><li class="dropdown-item"><!----> <a href="http://47.94.210.129/iterview_book/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  二，企业真题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/feblog/other/zuoye/" class="nav-link"><i class="undefined"></i>
  三，码路作业
</a></li><li class="dropdown-item"><!----> <a href="/feblog/other/everyday/" class="nav-link"><i class="undefined"></i>
  四，每日一题
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/feblog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    码路教育
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>319</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>4</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/feblog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/basic/css/01.html" class="nav-link"><i class="undefined"></i>
  一，HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/mobile/01.html" class="nav-link"><i class="undefined"></i>
  二，移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/gitbasic/01.html" class="nav-link"><i class="undefined"></i>
  三，Git基础操作
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/js/01/01.html" class="nav-link"><i class="undefined"></i>
  四，JS基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/dom/01.html" class="nav-link"><i class="undefined"></i>
  五，DOM/BOM
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/jsplus/01.html" class="nav-link"><i class="undefined"></i>
  六，JS高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/basic/less/01.html" class="nav-link"><i class="undefined"></i>
  七，LESS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端工程化与网络
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/network/node/01.html" class="nav-link"><i class="undefined"></i>
  一，node
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/webpack/01.html" class="nav-link"><i class="undefined"></i>
  二，webpack
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/ajax/01.html" class="nav-link"><i class="undefined"></i>
  三，ajax
</a></li><li class="dropdown-item"><!----> <a href="/feblog/network/program/" class="nav-link"><i class="undefined"></i>
  四，实战案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue2/01.html" class="nav-link"><i class="undefined"></i>
  一，vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue2plus/" class="nav-link"><i class="undefined"></i>
  二，vue2高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/vue3/" class="nav-link router-link-active"><i class="undefined"></i>
  三，vue3
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/mini/" class="nav-link"><i class="undefined"></i>
  四，小程序
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/react/" class="nav-link"><i class="undefined"></i>
  五，react基础
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/reactplus/" class="nav-link"><i class="undefined"></i>
  六，react高级
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/project/" class="nav-link"><i class="undefined"></i>
  七，项目列表
</a></li><li class="dropdown-item"><!----> <a href="/feblog/Framework/bushu/" class="nav-link"><i class="undefined"></i>
  八，项目部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feblog/other/baguwen/" class="nav-link"><i class="undefined"></i>
  一，八股文与就业
</a></li><li class="dropdown-item"><!----> <a href="http://47.94.210.129/iterview_book/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  二，企业真题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/feblog/other/zuoye/" class="nav-link"><i class="undefined"></i>
  三，码路作业
</a></li><li class="dropdown-item"><!----> <a href="/feblog/other/everyday/" class="nav-link"><i class="undefined"></i>
  四，每日一题
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/feblog/Framework/vue3/01.html" class="sidebar-link">01-vue3全家桶介绍</a></li><li><a href="/feblog/Framework/vue3/02.html" class="sidebar-link">02-组合API详解</a></li><li><a href="/feblog/Framework/vue3/03.html" class="sidebar-link">03-Vue3组件通信</a></li><li><a href="/feblog/Framework/vue3/04.html" class="sidebar-link">04-Hooks封装</a></li><li><a href="/feblog/Framework/vue3/05.html" class="sidebar-link">05-Vue3语法变化</a></li><li><a href="/feblog/Framework/vue3/06.html" class="sidebar-link">06-VueRouter(V4)和ElementPlus</a></li><li><a href="/feblog/Framework/vue3/07.html" class="sidebar-link">07-Pinia(V2)</a></li><li><a href="/feblog/Framework/vue3/08.html" class="sidebar-link">08-ToDoMVC</a></li><li><a href="/feblog/Framework/vue3/09.html" class="sidebar-link">09-Vue3.x 码路严选</a></li><li><a href="/feblog/Framework/vue3/10.html" class="sidebar-link">10-TypeScript精讲</a></li><li><a href="/feblog/Framework/vue3/11.html" aria-current="page" class="active sidebar-link">11-Vue3.x新版码路严选</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>11-Vue3.x新版码路严选</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>码路教育</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2023
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">11-Vue3.x新版码路严选</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>码路教育</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>11/17/2001</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="一-项目准备工作"><a href="#一-项目准备工作" class="header-anchor">#</a> 一，项目准备工作</h2> <ul><li><p>前台接口：https://www.apifox.cn/apidoc/shared-a11f6c11-eaa8-456a-85ae-0e2a97cb561c</p></li> <li><p>中后台接口：https://www.apifox.cn/apidoc/shared-38c2b1bf-75e7-4146-a849-507798f38fdb</p></li></ul> <h3 id="_1-创建项目"><a href="#_1-创建项目" class="header-anchor">#</a> 1，创建项目</h3> <p>创建项目命令如下：</p> <p><img src="/feblog/assets/img/1677501305754.4d143577.png" alt="1677501305754"></p> <p>进入项目，安装依赖，运行项目，如下：</p> <p><img src="/feblog/assets/img/1677501524925.abefa1ff.png" alt="1677501524925"></p> <p>在浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1677501566742.51707c46.png" alt="1677501566742"></p> <h3 id="_2-配置vant"><a href="#_2-配置vant" class="header-anchor">#</a> 2，配置vant</h3> <p>**vant的地址：**https://vant-contrib.gitee.io/vant/#/zh-CN</p> <ul><li>第一步：安装最新版的vant，安装自动引入插件，如下：</li></ul> <p><img src="/feblog/assets/img/1677501675453.4b4cf547.png" alt="1677501675453"></p> <p><img src="/feblog/assets/img/1677501722468.34053457.png" alt="1677501722468"></p> <p>在vite.config.js中配置，如下：</p> <p><img src="/feblog/assets/img/1677501995886.c174fedc.png" alt="1677501995886"></p> <p>Vant 中有个别组件是以函数的形式提供的，包括 <code>Toast</code> ， <code>Dialog</code> ， <code>Notify</code> 和 <code>ImagePreview</code> 组件。在使用函数组件时， <code>unplugin-vue-components</code> 无法自动引入对应的样式，因此需要手动引入样式。引入如下：</p> <p><img src="/feblog/assets/img/1677502079148.3de6a4aa.png" alt="1677502079148"></p> <p>测试vant中的组件是否可以使用，如下：</p> <p><img src="/feblog/assets/img/1677502240807.4a9d2ef0.png" alt="1677502240807"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1677502259148.2698d2d1.png" alt="1677502259148"></p> <h3 id="_3-配置scss"><a href="#_3-配置scss" class="header-anchor">#</a> 3，配置scss</h3> <p>安装：</p> <p><img src="/feblog/assets/img/1677502662224.fa92e56c.png" alt="1677502662224"></p> <p>测试如下：</p> <p><img src="/feblog/assets/img/1677502684672.f51f0e84.png" alt="1677502684672"></p> <p>浏览器中测试效果如下：</p> <p><img src="/feblog/assets/img/1677502699928.3fddcc2d.png" alt="1677502699928"></p> <h3 id="_4-配置rem移动端适配"><a href="#_4-配置rem移动端适配" class="header-anchor">#</a> 4，配置rem移动端适配</h3> <p>安装对应的依赖，如下：</p> <p><img src="/feblog/assets/img/1677502845074.65f82d4e.png" alt="1677502845074"></p> <p>创建postcss.config.js，并配置如下：</p> <p><img src="/feblog/assets/img/1677502904273.7d791679.png" alt="1677502904273"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">/**
         * 自动px转rem
         */</span>
        <span class="token string-property property">'postcss-pxtorem'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 一个元素是75px   ===&gt;   2rem</span>
            <span class="token literal-property property">rootValue</span><span class="token operator">:</span> <span class="token number">37.5</span><span class="token punctuation">,</span>
            <span class="token literal-property property">propList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 自动配置浏览器样式
         */</span>
        <span class="token string-property property">'postcss-preset-env'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>适配的js，如下：</p> <p><img src="/feblog/assets/img/1677503008384.2f59f9f2.png" alt="1677503008384"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 首先是一个立即执行函数，执行时传入的参数是window和document</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">flexible</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> document</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> docEl <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span> <span class="token comment">// 返回文档的root元素</span>
    <span class="token keyword">var</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取设备的dpr，即当前设置下物理像素与虚拟像素的比值</span>
    <span class="token comment">// 调整body标签的fontSize，fontSize = (12 * dpr) + 'px'</span>
    <span class="token comment">// 设置默认字体大小，默认的字体大小继承自body</span>
    <span class="token keyword">function</span> <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">12</span> <span class="token operator">*</span> dpr <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> setBodyFontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// set 1rem = viewWidth / 10</span>
    <span class="token comment">// 设置root元素的fontSize = 其clientWidth / 10 + ‘px’</span>
    <span class="token keyword">function</span> <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
        docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 移动端的适配如何做</span>
    <span class="token comment">// (1): 所有的css单位, rem    (vscode可以自动把px转成rem, pxtorem插件设置基准值37.5) - 1rem等于37.5px</span>
    <span class="token comment">//  原理: rem要根据html的font-size换算</span>
    <span class="token comment">//  目标: 网页宽度变小, html的font-size也要变小, ...网页变大, html的font-size变大.</span>
    <span class="token comment">// (2): flexible.js (专门负责当网页宽度改变, 会修改html的font-size)</span>
    <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 当我们页面尺寸大小发生变化的时候，要重新设置下rem 的大小</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> setRemUnit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// pageshow 是我们重新加载页面触发的事件</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// e.persisted 返回的是true 就是说如果这个页面是从缓存取过来的页面，也需要从新计算一下rem 的大小</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 检测0.5px的支持，支持则root元素的class中有hairlines</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dpr <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> fakeBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> testElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        testElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'.5px solid transparent'</span><span class="token punctuation">;</span>
        fakeBody<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>testElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        docEl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>testElement<span class="token punctuation">.</span>offsetHeight <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            docEl<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hairlines'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        docEl<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>重置样式，如下：</p> <p><img src="/feblog/assets/img/1677503064792.7a7c02b2.png" alt="1677503064792"></p> <p>参考重置样式，如下：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body,
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
h4,
h5,
h6,
pre,
form,
fieldset,
input,
textarea,
p,
blockquote,
th,
td</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">table</span> <span class="token punctuation">{</span>
    <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span>
    <span class="token property">border-spacing</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">fieldset,
img</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">address,
caption,
cite,
code,
dfn,
em,
strong,
th,
var</span> <span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">ol,
ul</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">caption,
th</span> <span class="token punctuation">{</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1,
h2,
h3,
h4,
h5,
h6</span> <span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">q:before,
q:after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">abbr,
acronym</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>在main.js中引入适配js和重置样式，如下：</p> <p><img src="/feblog/assets/img/1677503103753.978f0128.png" alt="1677503103753"></p> <p>测试rem适配是否起作用，如下：</p> <p><img src="/feblog/assets/img/1677503559210.ee4bfc4c.png" alt="1677503559210"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1677503532929.c0aec5d1.png" alt="1677503532929"></p> <h3 id="_5-配置全局样式"><a href="#_5-配置全局样式" class="header-anchor">#</a> 5，配置全局样式</h3> <p>创建全局样式，如下：</p> <p><img src="/feblog/assets/img/1683596669081.14683843.png" alt="1683596669081"></p> <p>参考代码如下：</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">html,
body,
#app </span><span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #F6F6F6<span class="token punctuation">;</span>
  <span class="token comment">// vant自带变量</span>
  <span class="token property">--van-card-background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在main.js中引入全局样式，如下：</p> <p><img src="/feblog/assets/img/1683596709630.fa38c0d2.png" alt="1683596709630"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1683596751181.2d92195d.png" alt="1683596751181"></p> <h3 id="_6-配置jsconfig"><a href="#_6-配置jsconfig" class="header-anchor">#</a> 6，配置jsconfig</h3> <p>配置jsconfig.json，开启路径别名提示，如下：</p> <p><img src="/feblog/assets/img/1677503655905.876ab1ad.png" alt="1677503655905"></p> <p>参考代码如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strictNullChecks&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strictFunctionTypes&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;./src/*&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;**/node_modules/*&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>测试如下：</p> <p><img src="/feblog/assets/img/1677503714474.f156e3a9.png" alt="1677503714474"></p> <h2 id="二-创建基本组件并配置路由"><a href="#二-创建基本组件并配置路由" class="header-anchor">#</a> 二，创建基本组件并配置路由</h2> <h3 id="_1-创建基本组件并配置路由"><a href="#_1-创建基本组件并配置路由" class="header-anchor">#</a> 1，创建基本组件并配置路由</h3> <p>删除views下面的代码，并创建对应的组件，如下：</p> <p><img src="/feblog/assets/img/1677504212426.665e1ad0.png" alt="1677504212426"></p> <p>配置对应的路由，如下：</p> <p><img src="/feblog/assets/img/1677504245691.6bc3cf39.png" alt="1677504245691"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    createRouter<span class="token punctuation">,</span>
    createWebHashHistory
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span>
        <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Home/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 显示导航</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/recommend'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'recommend'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Recommend/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 需要登录的</span>
                <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'种草推荐'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'cart'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Cart/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'购物车'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 访问没有的路由直接跳往首页</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/:toHome*'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'toHome'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>删除components下面的代码文件，创建Tabbar组件，如下：</p> <p><img src="/feblog/assets/img/1677504298195.e2f7189f.png" alt="1677504298195"></p> <p>在App.vue中引入，使用之，如下：</p> <p><img src="/feblog/assets/img/1677504325083.2010f9d2.png" alt="1677504325083"></p> <p>注释掉创建项目时的默认样式，如下：</p> <p><img src="/feblog/assets/img/1683599269090.b7259504.png" alt="1683599269090"></p> <p>浏览器测试如下：</p> <p><img src="/feblog/assets/img/1677504385045.195f7172.png" alt="1677504385045"></p> <h2 id="三-首页面绘制"><a href="#三-首页面绘制" class="header-anchor">#</a> 三，首页面绘制</h2> <h3 id="_1-配置axios"><a href="#_1-配置axios" class="header-anchor">#</a> 1，配置axios</h3> <p>安装axios，如下：</p> <p><img src="/feblog/assets/img/1677504636448.9b96cf17.png" alt="1677504636448"></p> <p>创建utils文件夹，在utils文件夹下创建request.js，如下：</p> <p><img src="/feblog/assets/img/1683601483918.c8fa5bb2.png" alt="1683601483918"></p> <p>baseURL：&quot;http://8.218.112.99&quot;,</p> <h3 id="_2-配置api接口"><a href="#_2-配置api接口" class="header-anchor">#</a> 2，配置api接口</h3> <p>创建api文件夹，封装首页面的api接口，如下：</p> <p><img src="/feblog/assets/img/1677504781680.619b2939.png" alt="1677504781680"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取首页商品数据
 * @param {{keyword?: string,limit:number,page:number,sort?:&quot;price_up&quot;|&quot;price_down&quot;}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getProductList</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/goods/list'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取轮播图数据
 * @param {{limit:number,page:number}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCarouselChartData</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/rotation/list'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_3-绘制轮播图数据"><a href="#_3-绘制轮播图数据" class="header-anchor">#</a> 3，绘制轮播图数据</h3> <p>先解决跨域问题：</p> <p><img src="/feblog/assets/img/1683602263701.d2963def.png" alt="1683602263701"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://8.218.112.99&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>分析了接口地址如下：</p> <p><img src="/feblog/assets/img/1683602316789.482d9634.png" alt="1683602316789"></p> <p>改变baseURL，如下：</p> <p><img src="/feblog/assets/img/1683602344725.2f9be8ec.png" alt="1683602344725"></p> <p>测试数据数据如下：</p> <p><img src="/feblog/assets/img/1683602372165.3871ac6d.png" alt="1683602372165"></p> <p>在首页面中获取数据，渲染数据，如下：</p> <p><img src="/feblog/assets/img/1677505296818.b4b0709a.png" alt="1677505296818"></p> <p>打开调试工具，如下：</p> <p><img src="/feblog/assets/img/1683602629699.239a34d7.png" alt="1683602629699"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCarouselChartData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/home.js'</span><span class="token punctuation">;</span>

<span class="token comment">// 轮播图数据</span>
<span class="token keyword">const</span> carouselChartData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取轮播图数据</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    carouselChartData<span class="token punctuation">.</span>value <span class="token operator">=</span>
      <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getCarouselChartData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-swipe</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-swipe<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:autoplay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indicator-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-swipe-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in carouselChartData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.pic_url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.pic_url<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-swipe-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-swipe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.my-swipe .van-swipe-item</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 168px<span class="token punctuation">;</span>
  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1677505325532.ea740e6a.png" alt="1677505325532"></p> <h3 id="_4-渲染首页面中的商品列表"><a href="#_4-渲染首页面中的商品列表" class="header-anchor">#</a> 4，渲染首页面中的商品列表</h3> <p>在components目录下创建Goods组件，并书写代码，如下：</p> <p><img src="/feblog/assets/img/1677505453975.b438608f.png" alt="1677505453975"></p> <p>参考代码如下:</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">dataItem</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>默认标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in props.dataItem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>li<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/goods/${item.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.pic_url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.goodsName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good-desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ (item.price / 100).toFixed(2) }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.good</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>243<span class="token punctuation">,</span> 243<span class="token punctuation">,</span> 243<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>

  <span class="token selector">.good-header</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>15<span class="token punctuation">,</span> 196<span class="token punctuation">,</span> 181<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.good-box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>

    <span class="token selector">.good-item</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 49%<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 2px 0<span class="token punctuation">;</span>
      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>

      <span class="token selector">.img_box</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 188px<span class="token punctuation">;</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.good-desc</span> <span class="token punctuation">{</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>

        <span class="token selector">.title</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 0.378rem<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #222333<span class="token punctuation">;</span>
          <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
          <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
          <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
          <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
          <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
          <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.price</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #1baeae<span class="token punctuation">;</span>
          <span class="token property">margin</span><span class="token punctuation">:</span> 6px 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><p>在首页面中使用Goods组件，如下：</p> <p><img src="/feblog/assets/img/1677505682562.4359578c.png" alt="1677505682562"></p> <p><img src="/feblog/assets/img/1677505706162.17d178ea.png" alt="1677505706162"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1677505728187.e3c735b3.png" alt="1677505728187"></p> <p>开启请求显示进度条，安装对应的依赖，如下：</p> <p><img src="/feblog/assets/img/1677505889052.27154086.png" alt="1677505889052"></p> <p>在路由前置守卫中开启，在后置守卫中关闭，如下：</p> <p><img src="/feblog/assets/img/1677505984073.c3922b27.png" alt="1677505984073"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1677506043615.059eb3fb.png" alt="1677506043615"></p> <h2 id="四-登录注册"><a href="#四-登录注册" class="header-anchor">#</a> 四，登录注册</h2> <h3 id="_1-配置路由"><a href="#_1-配置路由" class="header-anchor">#</a> 1，配置路由</h3> <p>创建一个登录页面，如下：</p> <p><img src="/feblog/assets/img/1683617682762.22a17a64.png" alt="1683617682762"></p> <p>配置对应的路由，如下：</p> <p><img src="/feblog/assets/img/1683617754211.648ea3c9.png" alt="1683617754211"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
     <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
     <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token comment">// 标题</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>访问之，如下：</p> <p><img src="/feblog/assets/img/1683617804857.d81162f6.png" alt="1683617804857"></p> <h3 id="_2-api接口封装"><a href="#_2-api接口封装" class="header-anchor">#</a> 2，api接口封装</h3> <p>封装api接口，如下：</p> <p><img src="/feblog/assets/img/1683618749740.6d05e013.png" alt="1683618749740"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&quot;@/utils/request&quot;</span>

<span class="token comment">/**
 * @description 登录
 * @param {string} name 用户
 * @param {string} password 密码    login({name:wc,password:123})
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        password
    <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/sso/login'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> loginData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loginData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
            loginData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span>
            <span class="token keyword">return</span> loginData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 注册
 * @param {{name:string, password:string,avatar:string,sex:number,sign:string,secret_answer:string}} userInfo 用户信息sign是个性签名
 * register({name:&quot;wc&quot;,password:123,avatar:1.png, sex:1, sign: 666,secret_answer:1 })
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">userInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/sso/register'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> registerData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> userInfo<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> registerData
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_4-默认头像实现"><a href="#_4-默认头像实现" class="header-anchor">#</a> 4，默认头像实现</h3> <p>创建avatar.js，是用来随机一个头像的。和注册QQ一样。如下：</p> <p><img src="/feblog/assets/img/1683619177657.0e80ca46.png" alt="1683619177657"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 默认头像地址</span>
<span class="token keyword">const</span> avatar <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'https://w.wallhaven.cc/full/o5/wallhaven-o5363p.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/kx/wallhaven-kxwgvd.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/p9/wallhaven-p98xkp.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/5g/wallhaven-5gwq17.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/yx/wallhaven-yxmrkd.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/88/h/88'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/l8/wallhaven-l8mx1l.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/yx/wallhaven-yxmo5k.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/6d/wallhaven-6dogj7.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/d6/wallhaven-d6g33m.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/x6/wallhaven-x68kjl.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/yx/wallhaven-yxm3zx.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/gp/wallhaven-gpjj9q.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/we/wallhaven-weyz9r.png'</span><span class="token punctuation">,</span>
    <span class="token string">'https://w.wallhaven.cc/full/l8/wallhaven-l839zy.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'https://img1.baidu.com/it/u=2029513305,2137933177&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=472'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 从默认头像地址中取随机一个</span>
<span class="token keyword">const</span> <span class="token function-variable function">getAvatar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> avatar<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>avatar<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> getAvatar<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>在登录组件中就需要获取一个头像了，如下：</p> <p><img src="/feblog/assets/img/1683619286816.355f0013.png" alt="1683619286816"></p> <p>在浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1683619301805.63d7b0c7.png" alt="1683619301805"></p> <p>把用户注册的相关的信息定义出来，如下：</p> <p><img src="/feblog/assets/img/1683620698876.9b039dd9.png" alt="1683620698876"></p> <p>把样式处理之，如下：</p> <p><img src="/feblog/assets/img/1683620749126.7f10fcba.png" alt="1683620749126"></p> <p>参考代码如下：</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.container </span><span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token selector">.user_img </span><span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">img </span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 88px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 88px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.registerBtn </span><span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>每次刷新页面，头像都不一样，效果如下：</p> <p><img src="/feblog/assets/img/image-20230303150727039.399f487d.png" alt="image-20230303150727039"></p> <h3 id="_5-登录表单绘制"><a href="#_5-登录表单绘制" class="header-anchor">#</a> 5，登录表单绘制</h3> <p>在头像下面，开始绘制表单，如下：</p> <p><img src="/feblog/assets/img/1683620974183.be927af5.png" alt="1683620974183"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.replace(<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">fixed</span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头像 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.avatar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 表单 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token attr-name">inset</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.username<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写用户名<span class="token punctuation">'</span> },
              {
                pattern: /^[-_a-zA-Z0-9]{4,16}$/,
                message: <span class="token punctuation">'</span>只能包含4-16位字母数字下划线减号<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">autocomplete</span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写密码<span class="token punctuation">'</span> },
              {
                pattern: /^[-_a-zA-Z0-9]{6,16}$/,
                message: <span class="token punctuation">'</span>只能包含6-16位字母数字下划线减号<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 16px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">round</span> <span class="token attr-name">block</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            登录
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/1683621035414.1f60a187.png" alt="1683621035414"></p> <h3 id="_6-表单提交事件"><a href="#_6-表单提交事件" class="header-anchor">#</a> 6，表单提交事件</h3> <p><img src="/feblog/assets/img/image-20230303153729002.b22bef7c.png" alt="image-20230303153729002"></p> <p>实现onSubmit方法，这个方法的形参就是收集到的数据，如下：</p> <p><img src="/feblog/assets/img/1683621297312.8e68bccf.png" alt="1683621297312"></p> <p>浏览器中效果如下：</p> <p><img src="/feblog/assets/img/1683621362062.737137e9.png" alt="1683621362062"></p> <p>实现登录，看服务器返回的结果，如下：</p> <p><img src="/feblog/assets/img/1683621479495.d3b9e4c7.png" alt="1683621479495"></p> <p>实现提示，实现跳转，如下 ：</p> <p><img src="/feblog/assets/img/1683621580618.a19306d0.png" alt="1683621580618"></p> <p>效果如下</p> <p><img src="/feblog/assets/img/image-20230303153813642.f76221b4.png" alt="image-20230303153813642"></p> <h3 id="_7-注册"><a href="#_7-注册" class="header-anchor">#</a> 7，注册</h3> <p>注册的表单也是写在登录组件中的，分析如下：</p> <p><img src="/feblog/assets/img/1683680834243.60beebc5.png" alt="1683680834243"></p> <p>定义一个状态，这个状态来控制上面多的表单和按钮是否显示，如下：</p> <p><img src="/feblog/assets/img/1683680931739.dc0291b8.png" alt="1683680931739"></p> <p>然后去定义一些表单，如下：</p> <p><img src="/feblog/assets/img/1683681788695.e5630160.png" alt="1683681788695"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.replace(<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">fixed</span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头像 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.avatar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 表单 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token attr-name">inset</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.username<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写用户名<span class="token punctuation">'</span> },
              {
                pattern: /^[-_a-zA-Z0-9]{4,16}$/,
                message: <span class="token punctuation">'</span>只能包含4-16位字母数字下划线减号<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">autocomplete</span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写密码<span class="token punctuation">'</span> },
              {
                pattern: /^[-_a-zA-Z0-9]{6,16}$/,
                message: <span class="token punctuation">'</span>只能包含6-16位字母数字下划线减号<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.avatar<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>头像<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>图片地址<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写图片地址<span class="token punctuation">'</span> },
              {
                pattern:
                  /^(http|ftp|https):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&amp;:\/~\+#]*)+)?/,
                message: <span class="token punctuation">'</span>请输入有效的网址<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>性别<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#input</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-radio-group</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-radio</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-radio</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-radio</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-radio</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-radio-group</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.sign<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sign<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>签名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>个性签名<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写个性签名<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model.lazy.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfo.secretAnswer<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>secret_answer<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密保<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>验证密保<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写密保<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 16px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
            <span class="token attr-name">round</span>
            <span class="token attr-name">block</span>
            <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered ? <span class="token punctuation">'</span>primary<span class="token punctuation">'</span> : <span class="token punctuation">'</span>success<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>
            {{ isRegistered ? &quot;注册&quot; : &quot;登录&quot; }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!isRegistered<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">round</span>
            <span class="token attr-name">block</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>registerBtn<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered = true<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>
            注册
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">plain</span>
            <span class="token attr-name">round</span>
            <span class="token attr-name">block</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>registerBtn<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isRegistered = false<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>
            返回登录
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token selector">.user_img</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 88px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 88px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.registerBtn</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230303162359302.7b319988.png" alt="image-20230303162359302"></p> <h3 id="_8-处理注册"><a href="#_8-处理注册" class="header-anchor">#</a> 8，处理注册</h3> <p>昨天有一个地方写错了，如下：</p> <p><img src="/feblog/assets/img/1683681934878.d6915228.png" alt="1683681934878"></p> <p>在Login.vue中导入接口，去调用接口，如下：</p> <p><img src="/feblog/assets/img/1683682453163.f5b33f84.png" alt="1683682453163"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1683682386818.41124a4f.png" alt="1683682386818"></p> <h2 id="五-完善登录流程"><a href="#五-完善登录流程" class="header-anchor">#</a> 五，完善登录流程</h2> <h3 id="_1-分析需求"><a href="#_1-分析需求" class="header-anchor">#</a> 1，分析需求</h3> <p>打开上线的项目，注册几个账号，观察cookie，和loacalstorege，如下：</p> <p><img src="/feblog/assets/img/1683682654744.47c2e7e7.png" alt="1683682654744"></p> <p>点击注册，去观察，如下：</p> <p><img src="/feblog/assets/img/1683682726792.5c5b4b0a.png" alt="1683682726792"></p> <p>去登录，再测试之，如下：</p> <p><img src="/feblog/assets/img/1683682852676.be4c406a.png" alt="1683682852676"></p> <p><img src="/feblog/assets/img/1683683027075.77df178c.png" alt="1683683027075"></p> <p>然后，退出登录，使用之前注册的账号demo01，去登录，再分析，如下：</p> <p><img src="/feblog/assets/img/1683683093188.41dea3fa.png" alt="1683683093188"></p> <p>点击后，如下：</p> <p><img src="/feblog/assets/img/1683683126961.4b82dce0.png" alt="1683683126961"></p> <p><img src="/feblog/assets/img/1683683178958.3a7416ae.png" alt="1683683178958"></p> <p>然后，使用demo01去登录，如下：</p> <p><img src="/feblog/assets/img/1683683214764.146c33c7.png" alt="1683683214764"></p> <p>登录后，分析，如下：</p> <p><img src="/feblog/assets/img/1683683269642.d5fc9eac.png" alt="1683683269642"></p> <p><img src="/feblog/assets/img/1683683303231.9080e945.png" alt="1683683303231"></p> <p>现在去网页关闭掉，如下：</p> <p><img src="/feblog/assets/img/1683683387182.2681cfd4.png" alt="1683683387182"></p> <p><img src="/feblog/assets/img/1683685428719.2047a37b.png" alt="1683685428719"></p> <h3 id="_2-用户信息存储到仓库中"><a href="#_2-用户信息存储到仓库中" class="header-anchor">#</a> 2，用户信息存储到仓库中</h3> <p>通常情况下，需要把用户信息进行集中管理，要么使用vuex4，要么使用pinia2，在当前项目中已经集成了pinia2，我们就使用pinia2。pinia去创建仓库有两种方案，参考地址：https://blog.csdn.net/broken_promise/category_11953807.html?spm=1001.2014.3001.5482</p> <p>看一下，创建仓库有两种实现方式如下：https://blog.csdn.net/broken_promise/article/details/126321769</p> <p><img src="/feblog/assets/img/1683685829371.dd9a70dc.png" alt="1683685829371"></p> <p><img src="/feblog/assets/img/1683685902672.b4d79271.png" alt="1683685902672"></p> <p>创建的项目默认就是使用的第二种方式，如下：</p> <p><img src="/feblog/assets/img/1683685976831.4f67e630.png" alt="1683685976831"></p> <p>在这个项目中，我们使用第二种方式。如下：</p> <p><img src="/feblog/assets/img/1683686158223.195459e6.png" alt="1683686158223"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    defineStore
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用户名</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 头像</span>
    <span class="token keyword">const</span> avatar <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 性别</span>
    <span class="token keyword">const</span> sex <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 签名</span>
    <span class="token keyword">const</span> sign <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 设置用户数据
     */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setInfo</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        avatar<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>avatar<span class="token punctuation">;</span>
        sex<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>sex<span class="token punctuation">;</span>
        sign<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>sign<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * 重置用户信息
     */</span>
    <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        avatar<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        sex<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        sign<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        avatar<span class="token punctuation">,</span>
        sex<span class="token punctuation">,</span>
        sign<span class="token punctuation">,</span>
        setInfo<span class="token punctuation">,</span>
        reset
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>到此，仓库就状态好了。</p> <h3 id="_2-封装操作token的工具函数"><a href="#_2-封装操作token的工具函数" class="header-anchor">#</a> 2，封装操作token的工具函数</h3> <p>vue-element-admin这个项目中就把token存储到cookie，那我们就要操作cookie，使用第三方的库来操作cookie，叫js-cookie。</p> <p>需要安装第三方库 js-cookie，如下：</p> <p><img src="/feblog/assets/img/1683686247785.7b73b02a.png" alt="1683686247785"></p> <p>把操作cookie进行封装，封装工具函数，如下：</p> <p><img src="/feblog/assets/img/1683686700611.3a00dbbc.png" alt="1683686700611"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Cookies <span class="token keyword">from</span> <span class="token string">'js-cookie'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * token key
 */</span>
<span class="token keyword">const</span> TokenKey <span class="token operator">=</span> <span class="token string">'userToken'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取本地token
 * @return {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 设置本地token
 * @param {string} token
 * @param {number} times 时间/秒  token的过期时间
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> times</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    Cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">,</span> token<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> times <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 删除本地token
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">removeToken</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Cookies<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_3-封装用户信息存储到本地工具函数"><a href="#_3-封装用户信息存储到本地工具函数" class="header-anchor">#</a> 3，封装用户信息存储到本地工具函数</h3> <p>我们上面封装了存储token的工具函数，还没有使用这些工具函数，我们上面还准备好了仓库，也没有使用。接下来我们封装把用户信息存储到本地的工具函数。如下（getData中少了一个return）：</p> <p><img src="/feblog/assets/img/1683688175686.5546ca80.png" alt="1683688175686"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> keyword <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span>

<span class="token comment">// 设置数据</span>
<span class="token comment">// value是用户信息，用户信息是对象，对象不能直接存，</span>
<span class="token comment">// 先利用JSON.stringify(value || [])转成普通的字符串</span>
<span class="token comment">// encodeURI把字符串变成url编码，达到编码中文</span>
<span class="token comment">// btoa url编码-&gt;base64编码</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token function">btoa</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token function">atob</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'[]'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 删除数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteData</span> <span class="token operator">=</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取上次登录者数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">lastLoginUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> uname <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token function">getData</span><span class="token punctuation">(</span>it<span class="token operator">?.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastLogin<span class="token punctuation">)</span>
        <span class="token operator">?.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">getData</span><span class="token punctuation">(</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">return</span> userInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重置本地记录的所有的登录者中的标识   lastLogin</span>
<span class="token comment">// 把所有的lastLogin变在false，当当前登录者用户的lastLoin变成true</span>
<span class="token comment">// 退出登录也要调用resetLogin，</span>
<span class="token comment">// user-demo01   UIFDUFLDSKFHUSHFLFNDSJHFSDHFDSFHJH  8  lastLogin = false</span>
<span class="token comment">// user-malu001  FDFUEYWEGDGUIFDUFLDSKFHUSHFLFNDSHF  9  lastLogin = false</span>
<span class="token comment">// user-malu002  FFDFSDFSDGDSGSDFUFLDSKFHUSHFLFNDSH  10  lastLogin = true</span>
<span class="token comment">// cart-001  GUIFDUFLDSKFHUSHFLFND</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">resetLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> resetData <span class="token operator">=</span> <span class="token function">geteData</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        resetData<span class="token punctuation">.</span>lastLogin <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">setData</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resetData<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_4-完善登录细节-把状态存储到pinia中"><a href="#_4-完善登录细节-把状态存储到pinia中" class="header-anchor">#</a> 4，完善登录细节（把状态存储到pinia中）</h3> <p>之前已经实现登录成功了，如下：</p> <p><img src="/feblog/assets/img/1683688290914.10ed406e.png" alt="1683688290914"></p> <p>登录成功后，要做什么呢？如下：</p> <p><img src="/feblog/assets/img/1683688576444.34058842.png" alt="1683688576444"></p> <p><img src="/feblog/assets/img/1683688918475.5167df6b.png" alt="1683688918475"></p> <p>浏览器测试之，如下 ：</p> <p><img src="/feblog/assets/img/1683689154835.46d8cc84.png" alt="1683689154835"></p> <p><img src="/feblog/assets/img/1683689173179.6e7e1d1c.png" alt="1683689173179"></p> <p><img src="/feblog/assets/img/1683689375766.b8964013.png" alt="1683689375766"></p> <p><img src="/feblog/assets/img/1683689400180.d69619d3.png" alt="1683689400180"></p> <h3 id="_5-已登录的头像回显"><a href="#_5-已登录的头像回显" class="header-anchor">#</a> 5，已登录的头像回显</h3> <p>和QQ登录一样，输入QQ号之后，显示已经登录的QQ号头像。实现监听用户名的变化，如下：</p> <p><img src="/feblog/assets/img/1683768764764.d73b1120.png" alt="1683768764764"></p> <p>浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1683768783061.961e4d35.png" alt="1683768783061"></p> <p>用户名变了，根据用户名，调用getData，得到用户信息，有了用户信息，就可以得到头像，有了头像就可以回显了。代码如下：</p> <p><img src="/feblog/assets/img/1683768894154.706cb8be.png" alt="1683768894154"></p> <p>在浏览器中输入一个a，如下：</p> <p><img src="/feblog/assets/img/1683768964662.ef96abee.png" alt="1683768964662"></p> <p>如果没有头像就给默认头像，如下：</p> <p><img src="/feblog/assets/img/1683769100631.a754d0d7.png" alt="1683769100631"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683769166474.97b7a29b.png" alt="1683769166474"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> isHas <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token function">toRef</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> avatar <span class="token operator">=</span> <span class="token function">getData</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span>avatar<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isHas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userInfo<span class="token punctuation">.</span>avatar <span class="token operator">=</span> avatarUrl<span class="token punctuation">;</span>
        isHas <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>avatar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userInfo<span class="token punctuation">.</span>avatar <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
        isHas <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_6-导航标题动态变换"><a href="#_6-导航标题动态变换" class="header-anchor">#</a> 6，导航标题动态变换</h3> <p><img src="/feblog/assets/img/1683769288465.594e0b1d.png" alt="1683769288465"></p> <p>效果如下</p> <p><img src="/feblog/assets/img/1683769313419.2eb5fdc2.png" alt="1683769313419"></p> <p>登录或注册页面不需要tabbar，隐藏tabbar，如下：</p> <p><img src="/feblog/assets/img/1683769404050.d35ac887.png" alt="1683769404050"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1683769389349.d2105345.png" alt="1683769389349"></p> <h2 id="六-axios二次封装"><a href="#六-axios二次封装" class="header-anchor">#</a> 六，axios二次封装</h2> <h3 id="_1-请求拦截器"><a href="#_1-请求拦截器" class="header-anchor">#</a> 1，请求拦截器</h3> <p>写项目基本上都会对axios进行封装，其中有一荐，就是封装带个token，前面已经把token存储到cookie中了，在请求拦截器中，就需要带个token，把token放在什么地方传给服务器，能放的地方都有哪些？</p> <ul><li>url 传参</li> <li>请求体</li> <li>请求头，一般情况下，token，就是放在请求头中</li></ul> <p>对axios进行二次封装，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    getToken
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    showNotify
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    useUserStore
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/user'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 服务器基本地址</span>
    <span class="token comment">// baseURL: &quot;http://8.218.112.99&quot;,</span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&quot;/api/ml/ml-mall&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 超时处理</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//添加请求拦截器</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Bearer '</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 添加响应拦截器</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;---response:&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 去调用其它接口，如果没有登录，就没有token</span>
            <span class="token comment">// 服务器返回code是0，需要去登录，去/login</span>
            <span class="token comment">// 如果你本来要去的页面就是/login  </span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 通知</span>
            <span class="token function">showNotify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'danger'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'用户名或密码错误'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 过期或未登录</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">'请登录'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 过期或未登录重置用户仓库数据</span>
                userStore<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 重置本地数据</span>
                <span class="token function">resetLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 删除token</span>
                <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 通知</span>
            <span class="token function">showNotify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'danger'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> data<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'系统繁忙'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h2 id="七-路由前置守卫配置"><a href="#七-路由前置守卫配置" class="header-anchor">#</a> 七，路由前置守卫配置</h2> <p>当路由切换就会走前置守卫，在前置守卫，判断是否登录（判断cookie中是否有token），如果没有token，让它去登录页，但是有的页面需要登录后（需要有token）才能访问，有的页面不需要登录就可以访问，在meta中配置了login，如果login是true，表示此路由需要登录。如果有token，表示登录了，你登录了，就不能去登录了，从哪来还去哪。代码如下：</p> <p><img src="/feblog/assets/img/1683772608448.dbd690a8.png" alt="1683772608448"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683772748239.f9f5e9aa.png" alt="1683772748239"></p> <p><img src="/feblog/assets/img/1683772775060.3ff8c1aa.png" alt="1683772775060"></p> <p>登录之，如下：</p> <p><img src="/feblog/assets/img/1683772886810.4453cca5.png" alt="1683772886810"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    createRouter<span class="token punctuation">,</span>
    createWebHistory
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>
    getToken
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/auth'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">&quot;nprogress&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;nprogress/nprogress.css&quot;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span>
        <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Home/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 显示导航</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/recommend'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'recommend'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Recommend/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 需要登录的   </span>
                <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'种草推荐'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'cart'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Cart/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 需要登录的   </span>
                <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'购物车'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">isShowNav</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 访问没有的路由直接跳往首页</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/:toHome*'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'toHome'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 标题</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

NProgress<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">showSpinner</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 刚才我们封装的axios的响应拦截器，只有你去调用api接口才会走</span>
<span class="token comment">// beforeEach是在路由切换时，才会走，可能没有调用api接口</span>
<span class="token comment">// 路由切换时，也想判断一下有没有登录，如果登录了做了什么？</span>
<span class="token comment">//   1）cookie中有token</span>
<span class="token comment">//   2）vuex中用户信息（vuex中的数据，你一刷新就没有了）</span>
<span class="token comment">//   3）localStorage中也用户信息（编码） （没有登录时）</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> hasToken <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hasToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 有token  表示已登录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> from<span class="token punctuation">.</span>path
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 没有token, 按理说需要去登录页面</span>
        <span class="token comment">// 但是我们要知道，有些页面，不需要登录，不需要token也可以访问</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>login<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h2 id="八-商品详情页"><a href="#八-商品详情页" class="header-anchor">#</a> 八，商品详情页</h2> <h3 id="_1-创建商品详情组件并配置路由"><a href="#_1-创建商品详情组件并配置路由" class="header-anchor">#</a> 1，创建商品详情组件并配置路由</h3> <p>创建商品组件，如下：</p> <p><img src="/feblog/assets/img/1683853546641.6752bba1.png" alt="1683853546641"></p> <p>配置路由，如下：</p> <p><img src="/feblog/assets/img/1683853618359.04a0eec5.png" alt="1683853618359"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/goods/:goodsId'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'goodsDetail'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Home/GoodsDetail.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'商品详情'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683853655727.38ecdc29.png" alt="1683853655727"></p> <p>点击商品，代码如下：</p> <p><img src="/feblog/assets/img/1683853713834.80172383.png" alt="1683853713834"></p> <p><img src="/feblog/assets/img/1683853735023.ce414571.png" alt="1683853735023"></p> <h3 id="_2-api接口配置"><a href="#_2-api接口配置" class="header-anchor">#</a> 2，api接口配置</h3> <p>封装根据id获取商品详情的接口，如下：</p> <p><img src="/feblog/assets/img/1683853848713.5cabd300.png" alt="1683853848713"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取商品详情
 * @param {number} id 商品id
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getGoodsDetail</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/goods/detail'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-绘制页面"><a href="#_3-绘制页面" class="header-anchor">#</a> 3，绘制页面</h3> <h4 id="_1-标题实现"><a href="#_1-标题实现" class="header-anchor">#</a> 1，标题实现</h4> <p><img src="/feblog/assets/img/1683853944632.4249a80a.png" alt="1683853944632"></p> <h4 id="_2-获取数据"><a href="#_2-获取数据" class="header-anchor">#</a> 2，获取数据</h4> <p>根据ID，调用接口，获取商品详情的数据，如下：</p> <p><img src="/feblog/assets/img/1683854234126.52f9fc9f.png" alt="1683854234126"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getGoodsDetail <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/goods&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从路由获取商品id</span>
<span class="token keyword">const</span> goodsId <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>goodsId<span class="token punctuation">;</span>

<span class="token comment">// 商品详情</span>
<span class="token keyword">const</span> goodsDetail <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getGoodsDetail</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  goodsDetail<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_3-渲染页面"><a href="#_3-渲染页面" class="header-anchor">#</a> 3，渲染页面</h4> <p>数据如下：</p> <p><img src="/feblog/assets/img/1683854365073.cac926ce.png" alt="1683854365073"></p> <p>绘制页面，显示数据，如下：</p> <p><img src="/feblog/assets/img/1683854424688.ccda72dc.png" alt="1683854424688"></p> <p>参考代码如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail.pic_url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail.pic_url<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>￥{{ (goodsDetail.price / 100).toFixed(2) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsDetail.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brands<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>品牌商：{{ goodsDetail.brand }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>express_prompt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
                 库存：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ goodsDetail.stock }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>免邮费 顺丰快递<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商品详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsDetail.detail_info }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1683854438032.24820ad7.png" alt="1683854438032"></p> <p>书写对应的样式，如下：</p> <p><img src="/feblog/assets/img/1683854502522.4497c84a.png" alt="1683854502522"></p> <p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1683854518122.74cb0c24.png" alt="1683854518122"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
// 内边距离
$<span class="token property">pad</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
<span class="token selector">.body_box</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
  <span class="token selector">.img_box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.goods_name</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 $pad<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.brands,
  .express_prompt</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 $pad<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 6px 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.price</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 $pad<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #f63515<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 6px 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.detail</span> <span class="token punctuation">{</span>
    <span class="token selector">.title</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.content</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 12px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>84<span class="token punctuation">,</span> 84<span class="token punctuation">,</span> 84<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">text-indent</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h4 id="_4-动作栏实现"><a href="#_4-动作栏实现" class="header-anchor">#</a> 4，动作栏实现</h4> <p>书写代码如下：</p> <p><img src="/feblog/assets/img/1683854681170.db6c2eea.png" alt="1683854681170"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- 动作栏 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-bar</span> <span class="token attr-name">placeholder</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-bar-icon</span>
        <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-o<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push(<span class="token punctuation">'</span>/cart<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-bar-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>star-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>收藏<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#ff5000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-bar-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>加入购物车<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-bar-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>立即购买<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-bar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230304100001337.d59d45af.png" alt="image-20230304100001337"></p> <h3 id="_3-购物车逻辑实现"><a href="#_3-购物车逻辑实现" class="header-anchor">#</a> 3，购物车逻辑实现</h3> <h4 id="_1-购物车api配置"><a href="#_1-购物车api配置" class="header-anchor">#</a> 1，购物车api配置</h4> <p>封装添加商品到购物车的api，如下：</p> <p><img src="/feblog/assets/img/1683855316536.7e746b06.png" alt="1683855316536"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 添加到购物车
 * @param {{goods_id:string,count:string}} form
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addCart</span> <span class="token operator">=</span> <span class="token parameter">form</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/cart/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> form<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取购物车数据
 * @param {{page:number,limit:number}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCartList</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/cart/list/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_2-购物车全局状态"><a href="#_2-购物车全局状态" class="header-anchor">#</a> 2，购物车全局状态</h4> <p>把购物车的商品，也需要存储到pinia中，如下：</p> <p><img src="/feblog/assets/img/1683855499041.0fdb7217.png" alt="1683855499041"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    defineStore
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    getCartList
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/cart'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCartStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'cart'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 购物车商品数量</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 购物车商品</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 从服务获取数据</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeCart</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCartList</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">100</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
            data<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置数据</span>
    <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        data<span class="token punctuation">,</span>
        changeCart<span class="token punctuation">,</span>
        reset
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>需要在商品详情页面中调用仓库中的changeCart，changeCart中调用了api接口，获取购物车数据，如下：</p> <p><img src="/feblog/assets/img/1683855698891.fee4fe79.png" alt="1683855698891"></p> <p>当点击加入购物车时，就需要调用方法，给加入购物车绑定点击事件，如下：</p> <p><img src="/feblog/assets/img/1683855776718.e720d727.png" alt="1683855776718"></p> <p>实现此方法，如下：</p> <p><img src="/feblog/assets/img/1683855927049.613d4e0d.png" alt="1683855927049"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683856135063.d1ea7acb.png" alt="1683856135063"></p> <p>到此，pinia中就有数据了，如下：</p> <p><img src="/feblog/assets/img/1683856176123.28237bdd.png" alt="1683856176123"></p> <p>前面我们点击了加入购物车，我们调用了仓库中的changeCart方法，这个方法中，调用了api接口，获取购物车数据了。但是并没有实现添加购物车的功用，也就是说当我们点击了加入购物车，分两种情况下：1）这个商品压根就没有在购物车中，需要调用addCart()  2）购物车中有此商品，就仅仅是让当前商品的数量+1，调用editCart。所以我们再封装一个编辑购物车，如下：</p> <p><img src="/feblog/assets/img/1683856514142.d0b49e81.png" alt="1683856514142"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @description 编辑购物车数据
 * @param {{goods_id:string,count:string,id:string}} form
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">editCart</span> <span class="token operator">=</span> <span class="token parameter">form</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/cart/update/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> form<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如何知道，商品是否在购物车呢？我们需要获取购物车中的所有数据，前面我们已经把购物车中的数据获取了放到了pinia中了，现在只需要从pinia中获取数据遍历对比，就可以知道购物车有没有此商品了，如下：</p> <p><img src="/feblog/assets/img/1683856775296.7645f3ad.png" alt="1683856775296"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683856837769.5e75a2d8.png" alt="1683856837769"></p> <p><img src="/feblog/assets/img/1683856863796.c8ce7d26.png" alt="1683856863796"></p> <p><img src="/feblog/assets/img/1683856900319.c816b74b.png" alt="1683856900319"></p> <p><img src="/feblog/assets/img/1683856976550.45a8c949.png" alt="1683856976550"></p> <p>到此，加入购物车的逻辑就实现了。</p> <h4 id="_3-加入购物车逻辑完善-难"><a href="#_3-加入购物车逻辑完善-难" class="header-anchor">#</a> 3 ，加入购物车逻辑完善（难）</h4> <p>需求：</p> <p><img src="/feblog/assets/img/1683858076938.ca09b6b4.png" alt="1683858076938"></p> <p>直接在pinia中取数量就OK了，如下：</p> <p><img src="/feblog/assets/img/1683858130478.b43ca8ea.png" alt="1683858130478"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683858144822.29bb8618.png" alt="1683858144822"></p> <p>pinia中的数据一刷新没有了，因为pinia中的数据是存储在内存中的。测试如下：</p> <p><img src="/feblog/assets/img/1683858207872.9ab64a1c.png" alt="1683858207872"></p> <p>现在的问题是一刷新pinia中的数据就没有了，除了这个问题，还有一个问题，如果换一个用户重新登录，另一个用户和当前用户的购物车数据是不一样的，也就是说换用户了，需要重新获取购物车数据，如果换用户了，会走setInfo，如下：</p> <p><img src="/feblog/assets/img/1683858453565.34e55160.png" alt="1683858453565"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1683858855269.3041b2d9.png" alt="1683858855269"></p> <p>进入到商品详情，解决一下之前的一个不bug，如下：</p> <p><img src="/feblog/assets/img/1683858941681.9268d065.png" alt="1683858941681"></p> <p>一进入详情，就需要调用，只有一进来就调用，仓库中才有数据，如下：</p> <p><img src="/feblog/assets/img/1683858990309.1e090e0b.png" alt="1683858990309"></p> <p>测试如下：</p> <p><img src="/feblog/assets/img/1683859064843.d8454e9c.png" alt="1683859064843"></p> <p>然后，我们换一个用户登录，换一个用户登录，就会走setInfo，测试如下：</p> <p><img src="/feblog/assets/img/1683859168432.cdc1940b.png" alt="1683859168432"></p> <p>重新使用malu001用户登录之，如下：</p> <p><img src="/feblog/assets/img/1683859213364.17f71c98.png" alt="1683859213364"></p> <p><img src="/feblog/assets/img/1683859232625.d6bb02fb.png" alt="1683859232625"></p> <p><img src="/feblog/assets/img/1683859266278.9f4eff64.png" alt="1683859266278"></p> <p><img src="/feblog/assets/img/1683859402223.c491a4b9.png" alt="1683859402223"></p> <p><img src="/feblog/assets/img/1683859445005.43e10524.png" alt="1683859445005"></p> <p>进入详情，如下：</p> <p><img src="/feblog/assets/img/1683859713586.80ee97c0.png" alt="1683859713586"></p> <p>再使用demo01测试之，再进入到详情，如下：</p> <p><img src="/feblog/assets/img/1683859740504.5cb1c2cb.png" alt="1683859740504"></p> <p>当我们把浏览器关了，再打开这个项目，肯定需要找到最后登录的用户，之前封装过一个方法，可以找到最后登录的用户，需要调用setInfo，在setInfo中调用了获取购物车数据，先去封装一个api接口，如下：</p> <p><img src="/feblog/assets/img/1683859998673.c642552c.png" alt="1683859998673"></p> <p><img src="/feblog/assets/img/1683860281600.07fc7f54.png" alt="1683860281600"></p> <p>关闭项目，如下：</p> <p><img src="/feblog/assets/img/1683860318706.c96a7cfa.png" alt="1683860318706"></p> <p>重新打开项目，会走App中的onMounted，在onMounted中判断是否登录（根据是否有token），如果</p> <p>登录了，到底是哪个用户登录了，调用lastloginUser，得到最后登录者的用户，再调用setInfo，在setInfo中重新获取购物车数据，如下：</p> <p><img src="/feblog/assets/img/1683860442794.b84f4e21.png" alt="1683860442794"></p> <h4 id="_4-tabbar购物车图标数量显示"><a href="#_4-tabbar购物车图标数量显示" class="header-anchor">#</a> 4，tabbar购物车图标数量显示</h4> <p>需求：</p> <p><img src="/feblog/assets/img/1683860586628.48a3d3bb.png" alt="1683860586628"></p> <p>实现父传子，如下：</p> <p><img src="/feblog/assets/img/1683861559959.b26a8ad7.png" alt="1683861559959"></p> <p>子接收之，如下：</p> <p><img src="/feblog/assets/img/1683861640307.8f32527c.png" alt="1683861640307"></p> <p>到此，详情页面中，添加购物车的逻辑就写完了。</p> <h3 id="_4-收藏实现"><a href="#_4-收藏实现" class="header-anchor">#</a> 4，收藏实现</h3> <h4 id="_1-分析"><a href="#_1-分析" class="header-anchor">#</a> 1，分析</h4> <p>本项目中，可以商品，也可以收藏文章，点击了收藏，如下 ：</p> <p><img src="/feblog/assets/img/1684113017483.ec1bb9b0.png" alt="1684113017483"></p> <p>在我的模块中，就可以查看收藏的商品了，如下：</p> <p><img src="/feblog/assets/img/1684113051197.b03a5177.png" alt="1684113051197"></p> <p>点击我的收藏，如下：</p> <p><img src="/feblog/assets/img/1684113071612.be19d2cc.png" alt="1684113071612"></p> <p>再点击收藏按钮，表示取消收藏，如下：</p> <p><img src="/feblog/assets/img/1684113134078.2f5908de.png" alt="1684113134078"></p> <p>打开接口文档，如下：</p> <p><img src="/feblog/assets/img/1684113358739.75e1e3ea.png" alt="1684113358739"></p> <h4 id="_1-api接口配置"><a href="#_1-api接口配置" class="header-anchor">#</a> 1，api接口配置</h4> <p>上面分析了api接口文档，封装四个api接口，如下：</p> <p><img src="/feblog/assets/img/1684113644288.49d89258.png" alt="1684113644288"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 添加收藏
 * @param {{type: string,object_id:string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addCollection</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/collection/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> info<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 删除收藏
 * @param {string} id
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteCollectionById</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/collection/delete/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 删除收藏
 * @param {{type: string,object_id:string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteCollectionByType</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/collection/delete/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> info<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取收藏
 * @param {{type:string,page:string,limit:string}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCollectionList</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/collection/list/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h4 id="_2-实现添加收藏的逻辑"><a href="#_2-实现添加收藏的逻辑" class="header-anchor">#</a> 2，实现添加收藏的逻辑</h4> <p>找到添加收藏的按钮，给添加收藏按钮上绑定点击事件，如下：</p> <p><img src="/feblog/assets/img/1684113854880.8a328d9b.png" alt="1684113854880"></p> <p>然后，实现toggleStar方法，如下：</p> <p><img src="/feblog/assets/img/1684114048688.8b4b022e.png" alt="1684114048688"></p> <p>引用对应的接口，如下：</p> <p><img src="/feblog/assets/img/1684114095740.d518862c.png" alt="1684114095740"></p> <p>调用接口，如下：</p> <p><img src="/feblog/assets/img/1684114276119.65f074a4.png" alt="1684114276119"></p> <p>在浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1684114392302.907f1029.png" alt="1684114392302"></p> <p><img src="/feblog/assets/img/1684114438275.fa0f2ed5.png" alt="1684114438275"></p> <p>解决bug，如下：</p> <p><img src="/feblog/assets/img/1684114706734.0add31a8.png" alt="1684114706734"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684114755260.865f5265.png" alt="1684114755260"></p> <p><img src="/feblog/assets/img/1684114790458.6e2b3b3f.png" alt="1684114790458"></p> <h3 id="_5-购买实现"><a href="#_5-购买实现" class="header-anchor">#</a> 5，购买实现</h3> <p>分析：</p> <p><img src="/feblog/assets/img/1684116450143.37f75be2.png" alt="1684116450143"></p> <p>找到立即购买，绑定点击事件，如下：</p> <p><img src="/feblog/assets/img/1684116540070.92a959f1.png" alt="1684116540070"></p> <p>点击立即购买，去地址选择页面，导入router，如下：</p> <p><img src="/feblog/assets/img/1684116736951.3c2cfeb3.png" alt="1684116736951"></p> <p>实现对应的方法，如下：</p> <p><img src="/feblog/assets/img/1684117086583.f4362d14.png" alt="1684117086583"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684117243721.43284164.png" alt="1684117243721"></p> <h2 id="九-地址管理页"><a href="#九-地址管理页" class="header-anchor">#</a> 九，地址管理页</h2> <h3 id="_1-配置路由-2"><a href="#_1-配置路由-2" class="header-anchor">#</a> 1，配置路由</h3> <p>创建地址列表组件，如下：</p> <p><img src="/feblog/assets/img/1684117355901.1acff1c2.png" alt="1684117355901"></p> <p>配置路由，如下：</p> <p><img src="/feblog/assets/img/1684117407427.d55e429c.png" alt="1684117407427"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/address-list'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'addressList'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Address/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'收货地址'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-api接口配置-2"><a href="#_2-api接口配置-2" class="header-anchor">#</a> 2，api接口配置</h3> <p>查看api接口文档，如下：</p> <p><img src="/feblog/assets/img/1684117487027.19b852df.png" alt="1684117487027"></p> <p>封装地址管理的api接口，如下：</p> <p><img src="/feblog/assets/img/1684117581925.1ad335cd.png" alt="1684117581925"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取收货地址列表
 * @param {{page: string,limit: string}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAddressList</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/consignee/list/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 新增收货地址
 * @param {{is_default:string,name:string,phone:string,province:string,city:string,town:string,street:string,detail:string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addAddress</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/consignee/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> info<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 编辑地址
 * @param {{id:string,is_default:string,name:string,phone:string,province:string,city:string,town:string,street:string,detail:string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateAddress</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/consignee/update/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> info<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 删除地址
 * @param {string} id
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteAddress</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/consignee/delete/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h3 id="_3-绘制页面-2"><a href="#_3-绘制页面-2" class="header-anchor">#</a> 3，绘制页面</h3> <p>绘制地址列表的页面的navbar，如下：</p> <p><img src="/feblog/assets/img/1684117738338.8ebc1c6e.png" alt="1684117738338"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1684117787612.17b9b1d3.png" alt="1684117787612"></p> <p>然后就需要绘制地址列表，地址列表在vant中有现成的组件，如下：</p> <p><img src="/feblog/assets/img/1684117844047.9f58ed48.png" alt="1684117844047"></p> <p>分析：</p> <p><img src="/feblog/assets/img/1684118000664.4fefd24a.png" alt="1684118000664"></p> <p>看一下地址列表的数据格式如下：</p> <p><img src="/feblog/assets/img/1684118129398.5f6d8ade.png" alt="1684118129398"></p> <p><img src="/feblog/assets/img/1684118167629.20947df8.png" alt="1684118167629"></p> <p>去给demo01这个用户添加一些测试地址数据，如下：</p> <p><img src="/feblog/assets/img/1684118227838.de593f29.png" alt="1684118227838"></p> <p>然后，我们就需要调用接口，获取地址列表相关的数据，如果数据非常多，要实现上拉加载下一页，下拉刷新（重新调接口，获取最新的数据）。此时就需要使用到下面的组件，如下：</p> <p><img src="/feblog/assets/img/1684118454157.a1b5b294.png" alt="1684118454157"></p> <p><img src="/feblog/assets/img/1684118474366.2cf6cb5a.png" alt="1684118474366"></p> <p>分析list组件，如下：</p> <p><img src="/feblog/assets/img/1684119002422.f9e2bc09.png" alt="1684119002422"></p> <p>书写对应的代码，如下：</p> <p><img src="/feblog/assets/img/1684119235839.d6299403.png" alt="1684119235839"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> finished <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// onLoad事件一上来就会触发一次，</span>
<span class="token keyword">const</span> <span class="token function-variable function">onLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 异步更新数据</span>
  <span class="token comment">// setTimeout 仅做示例，真实场景中一般为 ajax 请求</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      list<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 加载状态结束</span>
    loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment">// 数据全部加载完成</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      finished<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span>
    <span class="token attr-name"><span class="token namespace">v-model:</span>loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1684119265859.0a5d9f66.png" alt="1684119265859"></p> <p>开始绘制地址组件，定义相关的状态，如下 ：</p> <p><img src="/feblog/assets/img/1684120417646.24fb43cb.png" alt="1684120417646"></p> <p>调接口，获取数据，如下：</p> <p><img src="/feblog/assets/img/1684120571837.d63cf3e8.png" alt="1684120571837"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1684120555041.afd360ee.png" alt="1684120555041"></p> <p>使用数据之前，需要进行数据格式转化，如下：</p> <p><img src="/feblog/assets/img/1684120693997.d7b3929a.png" alt="1684120693997"></p> <p>开始转化，使用之，如下：</p> <p><img src="/feblog/assets/img/1684121035863.d54c64a9.png" alt="1684121035863"></p> <p>浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1684121073273.d96a186a.png" alt="1684121073273"></p> <p>还有一个数据，处理之，如下：</p> <p><img src="/feblog/assets/img/1684121220915.ff122c03.png" alt="1684121220915"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684121249532.9eed8033.png" alt="1684121249532"></p> <p>到此，地址组件相关的两个状态就处理好了，使用组件，如下：</p> <p><img src="/feblog/assets/img/1684121349682.6638d458.png" alt="1684121349682"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684121432359.d1deafa4.png" alt="1684121432359"></p> <p>处理之如下：</p> <p><img src="/feblog/assets/img/1684121525755.cab5612c.png" alt="1684121525755"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684121607811.2ab169ee.png" alt="1684121607811"></p> <p>到此，显示地址列表就OK了。</p> <h2 id="十-地址修改页"><a href="#十-地址修改页" class="header-anchor">#</a> 十，地址修改页</h2> <h3 id="_1-创建组件-配置路由"><a href="#_1-创建组件-配置路由" class="header-anchor">#</a> 1，创建组件，配置路由</h3> <p>创建一个Edit组件，Edit组件即表示新增，也表示编辑，如下：</p> <p><img src="/feblog/assets/img/1684199060912.bc7019f7.png" alt="1684199060912"></p> <p>配置路由，如下：</p> <p><img src="/feblog/assets/img/1684199111044.5a41338e.png" alt="1684199111044"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/edit-address'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'edit'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Address/Edit.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'编辑'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>现在我们登录了，浏览器访问之，如下：</p> <p><img src="/feblog/assets/img/1684199165155.7c5a9f28.png" alt="1684199165155"></p> <h3 id="_2-页面绘制"><a href="#_2-页面绘制" class="header-anchor">#</a> 2，页面绘制</h3> <p>开始绘制编辑 或 新增的页面，这个页面中，有一个选项地区的popup，如下：</p> <p><img src="/feblog/assets/img/1684199314463.f3b4252b.png" alt="1684199314463"></p> <p><img src="/feblog/assets/img/1684199427843.c36d3302.png" alt="1684199427843"></p> <p>安装vant地区包，如下：</p> <p><img src="/feblog/assets/img/1684199456816.b9e83069.png" alt="1684199456816"></p> <p>开始绘制页面，如下：</p> <p><img src="/feblog/assets/img/1684199650315.3e40a865.png" alt="1684199650315"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> areaList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vant/area-data'</span><span class="token punctuation">;</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新增地址<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-address-edit</span>
      <span class="token attr-name">:area-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>areaList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">show-set-default</span>
      <span class="token attr-name">:area-columns-placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>浏览器效果如下</p> <p><img src="/feblog/assets/img/image-20230304190724400.13915126.png" alt="image-20230304190724400"></p> <h3 id="_3-实现新增逻辑"><a href="#_3-实现新增逻辑" class="header-anchor">#</a> 3，实现新增逻辑</h3> <p>绑定save事件，如下：</p> <p><img src="/feblog/assets/img/1684199743327.7dbd647a.png" alt="1684199743327"></p> <p>实现对应的onSave方法，打印收集的表单数据，如下：</p> <p><img src="/feblog/assets/img/1684199889834.0870430d.png" alt="1684199889834"></p> <p>浏览器测试如下：</p> <p><img src="/feblog/assets/img/1684200055110.92470e80.png" alt="1684200055110"></p> <p>还需要分析，调用接口，给接口传递的数据如下：</p> <p><img src="/feblog/assets/img/1684200168611.2a816ead.png" alt="1684200168611"></p> <p>直接可以发请求了，如下 ：</p> <p><img src="/feblog/assets/img/1684200407792.228674e4.png" alt="1684200407792"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684200502902.fc035692.png" alt="1684200502902"></p> <p><img src="/feblog/assets/img/1684200540297.2b5a827f.png" alt="1684200540297"></p> <p>我们去访问地址列表页面，如下：</p> <p><img src="/feblog/assets/img/1684200586476.415a5733.png" alt="1684200586476"></p> <p>到此，添加地址就OK了。</p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> areaList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vant/area-data&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> addAddress <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/address&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showSuccessToast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// info 表示表单中填写的数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSave</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">is_default</span><span class="token operator">:</span> info<span class="token punctuation">.</span>isDefault <span class="token operator">?</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> info<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">phone</span><span class="token operator">:</span> info<span class="token punctuation">.</span>tel<span class="token punctuation">,</span>
    <span class="token literal-property property">province</span><span class="token operator">:</span> info<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> info<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
    <span class="token literal-property property">town</span><span class="token operator">:</span> info<span class="token punctuation">.</span>county<span class="token punctuation">,</span>
    <span class="token literal-property property">street</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">detail</span><span class="token operator">:</span> info<span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showSuccessToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;添加成功&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 回到地址列表</span>
    <span class="token comment">// router.replace(&quot;/address-list&quot;);</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新增地址<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-address-edit</span>
      <span class="token attr-name">:area-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>areaList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">show-set-default</span>
      <span class="token attr-name">:area-columns-placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@save</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSave<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>还需要在地址列表页面中，给新增地址绑定点击事件，如下：</p> <p><img src="/feblog/assets/img/1684201991902.cd17458e.png" alt="1684201991902"></p> <h3 id="_4-地址编辑功能"><a href="#_4-地址编辑功能" class="header-anchor">#</a> 4，地址编辑功能</h3> <p>然后，实现编辑地址的功能，与地址新增功能可以复用同一个组件，在地址列表页面中，点击编辑时，触发的事件如下：</p> <p><img src="/feblog/assets/img/1684202032196.5409d8fb.png" alt="1684202032196"></p> <p>实现onEdit方法，如下：</p> <p><img src="/feblog/assets/img/1684202306597.7c6374ed.png" alt="1684202306597"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684202383943.d94a93e6.png" alt="1684202383943"></p> <p>在编辑组件中，就可以获取地址信息了，测试之，如下：</p> <p><img src="/feblog/assets/img/1684202582698.9f15a161.png" alt="1684202582698"></p> <p>浏览器中测试之，是否可以获取用户信息，如下：</p> <p><img src="/feblog/assets/img/1684202610799.eddf197e.png" alt="1684202610799"></p> <p>然后，实现数据的回显，先定义状态，给状态赋值，如下：</p> <p><img src="/feblog/assets/img/1684202769698.b20cde34.png" alt="1684202769698"></p> <p>浏览器测试是否实现了数据回显，如下：</p> <p><img src="/feblog/assets/img/1684202793109.f0cfda7e.png" alt="1684202793109"></p> <p>然后，我可以修改表单中的数据，修改完后，再点击保存，作用就是实现编辑，如下：</p> <p><img src="/feblog/assets/img/1684202965257.284833e4.png" alt="1684202965257"></p> <p>直接上参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> areaList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vant/area-data&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> addAddress<span class="token punctuation">,</span> updateAddress <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/address&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showSuccessToast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// isEdit表示是否处于编辑模式</span>
<span class="token keyword">const</span> isEdit <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> addressList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tel</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">county</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">addressDetail</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">isDefault</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果route.query.addressInfo有值,表示是点击的编辑过来的</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>addressInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  isEdit<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> addressData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
    <span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token function">atob</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>addressInfo <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;[]&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  addressList<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">tel</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>phone<span class="token punctuation">,</span>
    <span class="token literal-property property">province</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
    <span class="token literal-property property">county</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>town<span class="token punctuation">,</span>
    <span class="token literal-property property">addressDetail</span><span class="token operator">:</span> addressData<span class="token punctuation">.</span>detail<span class="token punctuation">,</span>
    <span class="token literal-property property">isDefault</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>addressData<span class="token punctuation">.</span>is_default<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// info 表示表单中填写的数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSave</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isEdit<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 新增</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">is_default</span><span class="token operator">:</span> info<span class="token punctuation">.</span>isDefault <span class="token operator">?</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> info<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      <span class="token literal-property property">phone</span><span class="token operator">:</span> info<span class="token punctuation">.</span>tel<span class="token punctuation">,</span>
      <span class="token literal-property property">province</span><span class="token operator">:</span> info<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
      <span class="token literal-property property">city</span><span class="token operator">:</span> info<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
      <span class="token literal-property property">town</span><span class="token operator">:</span> info<span class="token punctuation">.</span>county<span class="token punctuation">,</span>
      <span class="token literal-property property">street</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">detail</span><span class="token operator">:</span> info<span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">showSuccessToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;添加成功&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 编辑</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">updateAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token comment">// 编辑相对于新增多了一个id参数</span>
      <span class="token literal-property property">is_default</span><span class="token operator">:</span> info<span class="token punctuation">.</span>isDefault <span class="token operator">?</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> info<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      <span class="token literal-property property">phone</span><span class="token operator">:</span> info<span class="token punctuation">.</span>tel<span class="token punctuation">,</span>
      <span class="token literal-property property">province</span><span class="token operator">:</span> info<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
      <span class="token literal-property property">city</span><span class="token operator">:</span> info<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
      <span class="token literal-property property">town</span><span class="token operator">:</span> info<span class="token punctuation">.</span>county<span class="token punctuation">,</span>
      <span class="token literal-property property">street</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">detail</span><span class="token operator">:</span> info<span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">showSuccessToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;修改成功&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 回到地址列表</span>
  router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/address-list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新增地址<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-address-edit</span>
      <span class="token attr-name">:address-info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addressList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:area-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>areaList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">show-set-default</span>
      <span class="token attr-name">:area-columns-placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>, <span class="token punctuation">'</span>请选择<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@save</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSave<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684203103852.3fa8b619.png" alt="1684203103852"><img src="/feblog/assets/img/1684203150959.1a10a7c2.png" alt="1684203150959"></p> <p><img src="/feblog/assets/img/1684203168918.1770f286.png" alt="1684203168918"></p> <p>修改一下van-nav-bar的title，如下：</p> <p><img src="/feblog/assets/img/1684203215995.bd40b450.png" alt="1684203215995"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684203228971.a4b99d2a.png" alt="1684203228971"></p> <h3 id="_5-地址的删除功能"><a href="#_5-地址的删除功能" class="header-anchor">#</a> 5，地址的删除功能</h3> <p>要显示删除按钮，如下：</p> <p><img src="/feblog/assets/img/1684203493866.183023f0.png" alt="1684203493866"></p> <p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1684203511592.0975feb2.png" alt="1684203511592"></p> <p>实现删除的逻辑，如下：</p> <p><img src="/feblog/assets/img/1684203548261.635e448f.png" alt="1684203548261"></p> <p><img src="/feblog/assets/img/1684203585706.864563c5.png" alt="1684203585706"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684203620465.34e254eb.png" alt="1684203620465"></p> <p>到此，删除地址的逻辑就实现了。</p> <h2 id="十一-订单数据的传递"><a href="#十一-订单数据的传递" class="header-anchor">#</a> 十一，订单数据的传递</h2> <h3 id="_1-分析流程"><a href="#_1-分析流程" class="header-anchor">#</a> 1，分析流程</h3> <p><img src="/feblog/assets/img/1684204970444.713d17d9.png" alt="1684204970444"></p> <p><img src="/feblog/assets/img/1684205289422.85188fe6.png" alt="1684205289422"></p> <p><img src="/feblog/assets/img/1684205457919.fd4dd7b6.png" alt="1684205457919"></p> <h3 id="_1-订单数据传递"><a href="#_1-订单数据传递" class="header-anchor">#</a> 1，订单数据传递</h3> <p>点击购买按钮时把商品信息通过路由传参到了地址管理页，在地址列表页面，接收数据，如下：</p> <p><img src="/feblog/assets/img/1684205667557.80e69314.png" alt="1684205667557"></p> <p>点击新增或编辑，传递数据，如下：</p> <p><img src="/feblog/assets/img/1684205810209.9b48d604.png" alt="1684205810209"></p> <p>在新增或编辑组件中，编辑或新增完成时，回到地址列表时，还需要把数据传递回去，如下：</p> <p><img src="/feblog/assets/img/1684206004485.df2e6106.png" alt="1684206004485"></p> <p>点击删除时，也需要传递回去，如下：</p> <p><img src="/feblog/assets/img/1684206043469.9d282f8c.png" alt="1684206043469"></p> <p>点击返回箭头时，也需要传递回去，如下：</p> <p><img src="/feblog/assets/img/1684206098298.e85d5a81.png" alt="1684206098298"></p> <p>浏览器中测试如下：</p> <p><img src="/feblog/assets/img/1684206130419.c93668fc.png" alt="1684206130419"></p> <p><img src="/feblog/assets/img/1684206190913.0b8e7398.png" alt="1684206190913"></p> <p><img src="/feblog/assets/img/1684206222322.ff110e40.png" alt="1684206222322"></p> <p><img src="/feblog/assets/img/1684206282445.2a5995b6.png" alt="1684206282445"><img src="/feblog/assets/img/1684206380951.8db1b783.png" alt="1684206380951"></p> <p><img src="/feblog/assets/img/1684206426235.208903c8.png" alt="1684206426235"></p> <h3 id="_2-地址选中"><a href="#_2-地址选中" class="header-anchor">#</a> 2，地址选中</h3> <p>现在我们有很多地址，选中某个地址，要去生成订单页面，首先需要打印出我们选中哪个地址，如下：</p> <p><img src="/feblog/assets/img/1684206563807.637acb57.png" alt="1684206563807"></p> <p>实现代码如下：</p> <p><img src="/feblog/assets/img/1684206605971.0b35c4c6.png" alt="1684206605971"></p> <p>实现对应的方法，如下：</p> <p><img src="/feblog/assets/img/1684206876873.9e1a4986.png" alt="1684206876873"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684206942198.ed36a997.png" alt="1684206942198"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 地址选中事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">selectAddress</span> <span class="token operator">=</span> <span class="token parameter">form</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 把商品数据和地址信息发到订单生成页</span>
        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'createOrder'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">orderInfo</span><span class="token operator">:</span> <span class="token function">btoa</span><span class="token punctuation">(</span>
                    <span class="token function">encodeURI</span><span class="token punctuation">(</span>
                        <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                            <span class="token operator">...</span>orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
                            <span class="token literal-property property">consignee_name</span><span class="token operator">:</span> form<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                            <span class="token literal-property property">consignee_phone</span><span class="token operator">:</span> form<span class="token punctuation">.</span>tel<span class="token punctuation">,</span>
                            <span class="token literal-property property">consignee_address</span><span class="token operator">:</span> form<span class="token punctuation">.</span>address<span class="token punctuation">,</span>
                            <span class="token literal-property property">isDefault</span><span class="token operator">:</span> form<span class="token punctuation">.</span>isDefault<span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="十二-订单生成页"><a href="#十二-订单生成页" class="header-anchor">#</a> 十二，订单生成页</h2> <h3 id="_1-创建组件并配置路由"><a href="#_1-创建组件并配置路由" class="header-anchor">#</a> 1，创建组件并配置路由</h3> <p>创建生成订单组件，如下：</p> <p><img src="/feblog/assets/img/1684285494725.97b9ba41.png" alt="1684285494725"></p> <p>配置路由，如下：</p> <p><img src="/feblog/assets/img/1684285540973.946a02f9.png" alt="1684285540973"></p> <p>浏览器访问之，如下：</p> <p><img src="/feblog/assets/img/1684285577585.c42e25c2.png" alt="1684285577585"></p> <p>点击地址，测试是否可以到达生成订单页面，如下：</p> <p><img src="/feblog/assets/img/1684285626419.4366796a.png" alt="1684285626419"></p> <p><img src="/feblog/assets/img/1684285672971.5c1fe584.png" alt="1684285672971"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
     <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/create-order'</span><span class="token punctuation">,</span>
     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'createOrder'</span><span class="token punctuation">,</span>
     <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Order/Create.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'生成订单'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-配置api"><a href="#_2-配置api" class="header-anchor">#</a> 2，配置api</h3> <p>查看接口文章，看一下关于订单的相关的接口，如下：</p> <p><img src="/feblog/assets/img/1684285738984.2d0ecb5c.png" alt="1684285738984"></p> <p>然后，封装api，如下：</p> <p><img src="/feblog/assets/img/1684285791201.dfda0133.png" alt="1684285791201"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 我的订单
 * @param {{page:number;limit:number;status:string}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getOrder</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/order/list/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 创建订单
 * @param {{ order_goods_infos: { count: string;goods_id: string}[],consignee_phone:string;consignee_name:string; consignee_address:string;pay_type: number,price: number,remark: string,status: string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createOrder</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/order/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> info<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description
 * @param {{id: string,pay_type:string,pay_at:string,status:string}} info
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">editOrderStatus</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/order/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> info<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_3-标题绘制"><a href="#_3-标题绘制" class="header-anchor">#</a> 3，标题绘制</h3> <p>先把标题绘制出来，如下：</p> <p><img src="/feblog/assets/img/1684286095557.7c1866f0.png" alt="1684286095557"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684286118430.93a2e03f.png" alt="1684286118430"></p> <p>点击确认，我们是没有/order这个路由，按我们之前讲的，会报错，报错的原因是通过name来跳转的。但是现在我们是通过/order这个路径来跳转的，没有报错，原因是我们在router.j，配置了如下代码：</p> <p><img src="/feblog/assets/img/1684286357721.4935357a.png" alt="1684286357721"></p> <p>所以说，此时我们点击确认，就去Home页面了。</p> <h3 id="_4-接收路由参数"><a href="#_4-接收路由参数" class="header-anchor">#</a> 4，接收路由参数</h3> <p>到达生成订单页面，人家是传递参数过来的，参数中包含商品信息和收货人信息，如下：</p> <p><img src="/feblog/assets/img/1684286496142.20c6de83.png" alt="1684286496142"></p> <p>此时，我们就需要接收参数，解析参数，如下：</p> <p><img src="/feblog/assets/img/1684286609874.d821468b.png" alt="1684286609874"></p> <p>浏览器测试如下：</p> <p><img src="/feblog/assets/img/1684286695447.04a0e966.png" alt="1684286695447"></p> <p>把上面的数据定义成响应式，如下：</p> <p><img src="/feblog/assets/img/1684286924861.3a64d45b.png" alt="1684286924861"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span> script setup <span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>
        ref
    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    showConfirmDialog
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    useRoute<span class="token punctuation">,</span>
    useRouter
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>orderInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// url中没有orderInfo这个参数</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/cart'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// orderInfo包含商品信息和收货人信息</span>
<span class="token keyword">const</span> orderInfo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token function">atob</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>orderInfo <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;[]&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">back</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 点击了确定,去订单列表了,现在没有订单列表路由</span>
    <span class="token function">showConfirmDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;退出生成订单?&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/order&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;container&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    van <span class="token operator">-</span> nav <span class="token operator">-</span> bar
left <span class="token operator">-</span> arrow
@click <span class="token operator">-</span> left <span class="token operator">=</span> <span class="token string">&quot;back&quot;</span><span class="token operator">:</span> title <span class="token operator">=</span> <span class="token string">&quot;$route.meta.title&quot;</span>
placeholder
fixed
    <span class="token operator">/</span>
    <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">div&gt; &lt; </span><span class="token regex-delimiter">/</span></span>
template <span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_5-地址展示和商品信息展示"><a href="#_5-地址展示和商品信息展示" class="header-anchor">#</a> 5，地址展示和商品信息展示</h3> <p>开始绘制页面，显示数据，如下：</p> <p><img src="/feblog/assets/img/1684287496671.19c11a6a.png" alt="1684287496671"></p> <p><img src="/feblog/assets/img/1684287511607.dd9527c7.png" alt="1684287511607"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1684287524441.ffcd3c82.png" alt="1684287524441"></p> <p>书写一些样式，如下：</p> <p><img src="/feblog/assets/img/1684287750819.01c1167d.png" alt="1684287750819"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  // vant自带变量
  <span class="token property">--van-submit-bar-z-index</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>
  <span class="token property">--van-address-list-add-button-z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token selector">.address</span> <span class="token punctuation">{</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token selector">.address_list</span> <span class="token punctuation">{</span>
      // vant自带变量
      <span class="token property">--van-address-list-padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token selector">:deep(.van-badge__wrapper)</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.submit_box</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1684287771869.03a5011d.png" alt="1684287771869"></p> <p>除了显示收货人信息，还需要显示商品信息，如下：</p> <p><img src="/feblog/assets/img/1684287901241.1885f27b.png" alt="1684287901241"></p> <p>效果如下：</p> <p><img src="/feblog/assets/img/1684287918273.a3e18c0c.png" alt="1684287918273"></p> <p>到此，生成订单页面中的收货人信息和商品信息展示就绘制OK了。</p> <h3 id="_6-绘制-提交订单-和-备注"><a href="#_6-绘制-提交订单-和-备注" class="header-anchor">#</a> 6，绘制 提交订单 和 备注</h3> <p>开始绘制，如下：</p> <p><img src="/feblog/assets/img/1684289213506.c02dbd44.png" alt="1684289213506"></p> <p>准备onSubmit方法和remark备注，如下：</p> <p><img src="/feblog/assets/img/1684289282595.e306a29d.png" alt="1684289282595"></p> <p>在浏览器中看一下效果如下：</p> <p><img src="/feblog/assets/img/1684289337009.9dcddb95.png" alt="1684289337009"></p> <h3 id="_7-绘制支付弹出框"><a href="#_7-绘制支付弹出框" class="header-anchor">#</a> 7，绘制支付弹出框</h3> <p>定义一个状态，控制是否显示弹窗，当我们点击生成订单时，就需要把弹窗显示出来，如下：</p> <p><img src="/feblog/assets/img/1684289494545.2abf9fe7.png" alt="1684289494545"></p> <p>绘制弹窗，如下：</p> <p><img src="/feblog/assets/img/1684289599226.fc7cb562.png" alt="1684289599226"></p> <p>实现上面的两个方法，如下：</p> <p><img src="/feblog/assets/img/1684289749510.6e468490.png" alt="1684289749510"></p> <p>效果如下：</p> <p><img src="data:image/png;base64,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" alt="1684289625634"></p> <h3 id="_8-支付逻辑实现"><a href="#_8-支付逻辑实现" class="header-anchor">#</a> 8，支付逻辑实现</h3> <p>点击了某一种支付方式，要实现支付，分析接口，如下：</p> <p><img src="/feblog/assets/img/1684289984246.893e175d.png" alt="1684289984246"></p> <p>商品相关的信息在哪里？如下：</p> <p><img src="/feblog/assets/img/1684290048714.dcbb8149.png" alt="1684290048714"></p> <p>准备数据，发送ajax请求，如下：</p> <p><img src="/feblog/assets/img/1684290239723.76057fb9.png" alt="1684290239723"></p> <p><img src="/feblog/assets/img/1684290365590.c64ad96c.png" alt="1684290365590"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684290487860.03806c03.png" alt="1684290487860"></p> <p><img src="/feblog/assets/img/1684290512003.3d2cae2b.png" alt="1684290512003"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 选择的支付方式</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSelect</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里要发送ajax请求</span>
    <span class="token keyword">const</span> order_goods_infos <span class="token operator">=</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>goods<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">goods_id</span><span class="token operator">:</span> it<span class="token punctuation">.</span>goods_id<span class="token punctuation">,</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> it<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断是否有商品没有就返回订单查看页</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>order_goods_infos<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/order&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 订单数据item.pay_type对应配置的pay_type</span>
    <span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pay_type</span><span class="token operator">:</span> item<span class="token punctuation">.</span>pay_type<span class="token punctuation">,</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 已支付</span>
        <span class="token literal-property property">remark</span><span class="token operator">:</span> remark<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_name</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_name<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_phone</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_phone<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_address</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_address<span class="token punctuation">,</span>
        <span class="token literal-property property">order_goods_infos</span><span class="token operator">:</span> order_goods_infos<span class="token punctuation">,</span> <span class="token comment">// 商品信息</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 发送创建订单请求</span>
    <span class="token keyword">await</span> <span class="token function">createOrder</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 回到订单列表页面</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/order&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_9-支付框关闭事件"><a href="#_9-支付框关闭事件" class="header-anchor">#</a> 9，支付框关闭事件</h3> <p>点击取消，表示也要生成订单，只不过没有支付，逻辑如下：</p> <p><img src="/feblog/assets/img/1684290657427.9d970452.png" alt="1684290657427"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 关闭事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">onCancel</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取每个商品的id/数量</span>
    <span class="token keyword">const</span> order_goods_infos <span class="token operator">=</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>goods<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">goods_id</span><span class="token operator">:</span> it<span class="token punctuation">.</span>goods_id<span class="token punctuation">,</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> it<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断是否有商品没有就返回订单查看页</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>order_goods_infos<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/order'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 订单数据item.pay_type对应配置的pay_type</span>
    <span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pay_type</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 未支付</span>
        <span class="token literal-property property">remark</span><span class="token operator">:</span> remark<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token literal-property property">price</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_name</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_name<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_phone</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_phone<span class="token punctuation">,</span>
        <span class="token literal-property property">consignee_address</span><span class="token operator">:</span> orderInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>consignee_address<span class="token punctuation">,</span>
        <span class="token literal-property property">order_goods_infos</span><span class="token operator">:</span> order_goods_infos<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 发送创建订单请求</span>
    <span class="token keyword">await</span> <span class="token function">createOrder</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 回到订单页</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/order'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>到此，我们就完成了生在订单了。so easy~</p> <h2 id="十三-订单查看页"><a href="#十三-订单查看页" class="header-anchor">#</a> 十三，订单查看页</h2> <h3 id="_1-创建组件并配置路由-2"><a href="#_1-创建组件并配置路由-2" class="header-anchor">#</a> 1，创建组件并配置路由</h3> <p>创建组件如下：</p> <p><img src="/feblog/assets/img/1684292713216.db061039.png" alt="1684292713216"></p> <p>配置路由，如下：</p> <p><img src="/feblog/assets/img/1684292748370.e82e41f0.png" alt="1684292748370"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/order'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'order'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Order/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的订单'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>浏览器访问之，如下：</p> <p><img src="/feblog/assets/img/1684292776523.c2cad059.png" alt="1684292776523"></p> <h3 id="_2-标题绘制"><a href="#_2-标题绘制" class="header-anchor">#</a> 2，标题绘制</h3> <p>代码如下：</p> <p><img src="/feblog/assets/img/1684292819419.3abf85fc.png" alt="1684292819419"></p> <p>浏览器效果如下 ：</p> <p><img src="/feblog/assets/img/1684292831316.bd5f3c82.png" alt="1684292831316"></p> <h3 id="_3-tab导航"><a href="#_3-tab导航" class="header-anchor">#</a> 3，tab导航</h3> <p>找到vant中的tab导航，如下 ：</p> <p><img src="/feblog/assets/img/1684292895378.ef61ccd5.png" alt="1684292895378"></p> <p>定义状态，使用tab组件，如下：</p> <p><img src="/feblog/assets/img/1684293049791.49c9c20d.png" alt="1684293049791"></p> <p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1684293073467.b2733481.png" alt="1684293073467"></p> <h3 id="_4-封装orderlist组件"><a href="#_4-封装orderlist组件" class="header-anchor">#</a> 4，封装OrderList组件</h3> <p>在components下面封装一个组件，叫OrderList，如下 ：</p> <p><img src="/feblog/assets/img/1684293222442.b11e710b.png" alt="1684293222442"></p> <p>在订单查看页面中使用之，如下：</p> <p><img src="/feblog/assets/img/1684293672690.ea345c99.png" alt="1684293672690"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getOrder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/order&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> active <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> orderData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> OrderList <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/components/OrderList.vue&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    orderData<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token operator">?.</span>reverse<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.replace(<span class="token punctuation">'</span>/user<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name"><span class="token namespace">v-model:</span>active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>45px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">swipeable</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>全部<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OrderList</span> <span class="token attr-name">:orderData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span> Loading... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>待支付<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OrderList</span> <span class="token attr-name">:orderData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>待发货<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OrderList</span> <span class="token attr-name">:orderData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>待收货<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OrderList</span> <span class="token attr-name">:orderData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>待评价<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OrderList</span> <span class="token attr-name">:orderData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>在浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1684293800608.42dc0aed.png" alt="1684293800608"></p> <p>接收到数据，只需要写html+css去渲染数据，如下 ：</p> <p><img src="/feblog/assets/img/1684293932750.6d6d1d58.png" alt="1684293932750"></p> <p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1684293950873.5b1e5480.png" alt="1684293950873"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 谁要用OrderList组件，需要传递orderData</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">orderData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">transformStatus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;待支付&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;待发货&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;待收货&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;待评价&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">transformPayType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;微信&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;支付宝&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">&quot;云闪付&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order_item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order in $props.orderData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>订单时间：{{ order.created_at }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ transformStatus(order.status) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-card</span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods.id<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods in order.order_goods_infos<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods.count<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>((goods.goods_info?.price || 0) / 100).toFixed(2)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:desc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods.goods_info?.detail_info<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods.goods_info?.name<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:thumb</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
          goods.goods_info?.pic_url ||
          <span class="token punctuation">'</span>https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg<span class="token punctuation">'</span>
        <span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
            visibility: order.status === 1 ? <span class="token punctuation">'</span>hidden<span class="token punctuation">'</span> : <span class="token punctuation">'</span>visible<span class="token punctuation">'</span>,
          }<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>
          支付方式：{{ transformPayType(order.pay_type) }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>总金额：￥{{ ((order.price || 0) / 100).toFixed(2) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token selector">.order_item</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token selector">.header</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token selector">.create_time</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #2f3640<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.status</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #353b48<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.goods_item</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 5px 0<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.footer</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #2f3640<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br></div></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <p>到此，就完成了显示全部订单。</p> <h3 id="_6-改变tab时变更数据"><a href="#_6-改变tab时变更数据" class="header-anchor">#</a> 6，改变tab时变更数据</h3> <p>点击tab时，会触发一个事件，如下：</p> <p><img src="/feblog/assets/img/1684294056151.e1ebaceb.png" alt="1684294056151"></p> <p>实现changeTab方法，如下：</p> <p><img src="/feblog/assets/img/1684294108760.444da392.png" alt="1684294108760"></p> <p>浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1684294136584.64bfde2c.png" alt="1684294136584"></p> <p>完成逻辑，如下：</p> <p><img src="/feblog/assets/img/1684294217612.01ed2485.png" alt="1684294217612"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684294260474.34a7fda8.png" alt="1684294260474"></p> <p><img src="/feblog/assets/img/1684294269015.be4f296e.png" alt="1684294269015"></p> <h2 id="十四-购物车页面"><a href="#十四-购物车页面" class="header-anchor">#</a> 十四，购物车页面</h2> <h3 id="_1-标题显示"><a href="#_1-标题显示" class="header-anchor">#</a> 1，标题显示</h3> <p>购物车页面的路由，之前已经配置好了，对应的组件也创建好了，现在绘制一下头部，如下：</p> <p><img src="/feblog/assets/img/1684372078441.bb0b9f50.png" alt="1684372078441"></p> <p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1684372091328.407cab61.png" alt="1684372091328"></p> <h3 id="_2-未登陆时显示"><a href="#_2-未登陆时显示" class="header-anchor">#</a> 2，未登陆时显示</h3> <p>如果没有登录，访问购物车，是不能访问的，处理之，如下：</p> <p><img src="/feblog/assets/img/1684372497602.e9bd787d.png" alt="1684372497602"></p> <p><img src="/feblog/assets/img/1684372526977.e4b59863.png" alt="1684372526977"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span> script setup <span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>
        getToken
    <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/auth&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">,</span>
    computed
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 控制登录状态</span>
<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isLogin<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;container&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    van <span class="token operator">-</span> nav <span class="token operator">-</span> bar<span class="token operator">:</span> title <span class="token operator">=</span> <span class="token string">&quot;$route.meta.title&quot;</span>
placeholder
fixed
left <span class="token operator">-</span> arrow
@click <span class="token operator">-</span> left <span class="token operator">=</span> <span class="token string">&quot;$router.back()&quot;</span> <span class="token operator">/</span>
    <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div v <span class="token operator">-</span>
    <span class="token keyword">if</span> <span class="token operator">=</span> <span class="token string">&quot;!isLogin&quot;</span> <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;no_login_content&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    van <span class="token operator">-</span> empty <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;thumbnail&quot;</span>
description <span class="token operator">=</span> <span class="token string">&quot;未登录&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    van <span class="token operator">-</span> button
type <span class="token operator">=</span> <span class="token string">&quot;primary&quot;</span>
<span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;login_btn&quot;</span>
@click <span class="token operator">=</span> <span class="token string">&quot;$router.push('/login')&quot;</span> <span class="token operator">&gt;</span>
    登录 <span class="token operator">&lt;</span> <span class="token operator">/</span>van<span class="token operator">-</span>button <span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">van-empty&gt; &lt; </span><span class="token regex-delimiter">/</span></span>
    div <span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">div&gt; &lt; </span><span class="token regex-delimiter">/</span></span>
    template <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>
    style lang <span class="token operator">=</span> <span class="token string">&quot;scss&quot;</span>
scoped <span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>container <span class="token punctuation">{</span>
        <span class="token punctuation">.</span>login_btn <span class="token punctuation">{</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">180</span> px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        main<span class="token punctuation">.</span>content <span class="token punctuation">{</span>
                margin <span class="token operator">-</span> bottom<span class="token operator">:</span> <span class="token keyword">var</span> <span class="token punctuation">(</span><span class="token operator">--</span>van <span class="token operator">-</span> submit <span class="token operator">-</span> bar <span class="token operator">-</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">.</span>goods_list <span class="token punctuation">{</span>
                    <span class="token punctuation">.</span>goods_item <span class="token punctuation">{</span>
                        <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
                        <span class="token punctuation">.</span>selected <span class="token punctuation">{</span>
                            <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>
                            z <span class="token operator">-</span> index<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
                            <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">8</span> px<span class="token punctuation">;</span>
                            <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">58</span> px<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token punctuation">.</span>goods_box <span class="token punctuation">{</span>
                            <span class="token literal-property property">background</span><span class="token operator">:</span> #f7f8fa<span class="token punctuation">;</span>
                            margin <span class="token operator">-</span> top<span class="token operator">:</span> <span class="token number">10</span> px<span class="token punctuation">;</span>
                            <span class="token punctuation">.</span>goods_card <span class="token punctuation">{</span>
                                margin <span class="token operator">-</span> left<span class="token operator">:</span> <span class="token number">30</span> px<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token punctuation">.</span>delete <span class="token operator">-</span> button <span class="token punctuation">{</span>
                            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">%</span> <span class="token punctuation">;</span>
                            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">%</span> <span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span>is_null <span class="token punctuation">{</span>
                    <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
                    flex <span class="token operator">-</span> direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
                    justify <span class="token operator">-</span> content<span class="token operator">:</span> center<span class="token punctuation">;</span>
                    align <span class="token operator">-</span> items<span class="token operator">:</span> center<span class="token punctuation">;</span>
                    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">55</span> vh<span class="token punctuation">;</span>
                    text <span class="token operator">-</span> align<span class="token operator">:</span> center<span class="token punctuation">;</span>
                    p<span class="token punctuation">.</span>cart_tip <span class="token punctuation">{</span>
                        font <span class="token operator">-</span> size<span class="token operator">:</span> <span class="token number">18</span> px<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token punctuation">.</span>to_btn <span class="token punctuation">{</span>
                        margin <span class="token operator">-</span> top<span class="token operator">:</span> <span class="token number">16</span> px<span class="token punctuation">;</span>
                        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">180</span> px<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span>submit <span class="token punctuation">{</span>
                <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token keyword">var</span> <span class="token punctuation">(</span><span class="token operator">--</span>van <span class="token operator">-</span> submit <span class="token operator">-</span> bar <span class="token operator">-</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><p>清除token，效果如下：</p> <p><img src="/feblog/assets/img/1684372590498.e6d0ce5d.png" alt="1684372590498"></p> <h3 id="_3-商品列表"><a href="#_3-商品列表" class="header-anchor">#</a> 3，商品列表</h3> <p>如果已经登录了，需要获取商品的列表，我们要知道，购物车的数据存储在pinia中，之前已经调用过获取购物车数据的接口了，得到数据后，把数据存储到了pinia中了，如下：</p> <p><img src="/feblog/assets/img/1684372715781.78871503.png" alt="1684372715781"></p> <p>现在切换到购物车商品，重新调用接口，获取数据，如下：</p> <p><img src="/feblog/assets/img/1684372986026.2abeac58.png" alt="1684372986026"></p> <p>浏览器中测试之，如下：</p> <p><img src="/feblog/assets/img/1684373006610.7256f28b.png" alt="1684373006610"></p> <p>现在购物车中是有数据的，数据在cartStore中，但是有可能购物车中没有数据，没有数据要显示购物车空空如也。如果有数据，需要把数据渲染出来，如下：</p> <p><img src="/feblog/assets/img/1684373291898.e184fa80.png" alt="1684373291898"></p> <p>此时此时是有数据的，渲染数据如下，渲染数据，用到了如下的组件：</p> <p><img src="/feblog/assets/img/1684373597229.a54e169b.png" alt="1684373597229"></p> <p>使用之，如下：</p> <p><img src="/feblog/assets/img/1684374530378.4bc412ce.png" alt="1684374530378"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/auth&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCartStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/stores/cart&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cartStore <span class="token operator">=</span> <span class="token function">useCartStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> finished <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 控制登录状态</span>
<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  isLogin<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// 当登录时获取购物车数据</span>
  cartStore<span class="token punctuation">.</span><span class="token function">changeCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">onLoad</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeSelected</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">deleteGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 购物车中可能有数据，也可能没有数据 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_list<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">v-model:</span>loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartStore.data?.length &gt; 0<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-swipe-cell</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it in cartStore.data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-checkbox</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selected<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.checked<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeSelected<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-card</span>
              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_card<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.id<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.count<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>((it.goods_info?.price / 100) * it.count).toFixed(2)<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:desc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.goods_info?.detail_info<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.goods_info?.name<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:thumb</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.goods_info?.pic_url<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#tags</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tag</span> <span class="token attr-name">plain</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{
                  it.goods_info?.tags
                }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tag</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#footer</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-stepper</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeGoodsSum(it)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.count<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-card</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
              <span class="token attr-name">square</span>
              <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>删除<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete-button<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteGoods(it.id)<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-swipe-cell</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>is_null<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>smile-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart_tip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>购物车空空空如也<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>to_btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!isLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no_login_content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumbnail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>未登录<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login_btn<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push(<span class="token punctuation">'</span>/login<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span>
        <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-empty</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token selector">.login_btn</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">main.content</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--van-submit-bar-height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token selector">.goods_list</span> <span class="token punctuation">{</span>
      <span class="token selector">.goods_item</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token selector">.selected</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.goods_box</span> <span class="token punctuation">{</span>
          <span class="token property">background</span><span class="token punctuation">:</span> #f7f8fa<span class="token punctuation">;</span>
          <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token selector">.goods_card</span> <span class="token punctuation">{</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.delete-button</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.is_null</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 55vh<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">p.cart_tip</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.to_btn</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.submit</span> <span class="token punctuation">{</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--van-submit-bar-height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1684374558564.183eea24.png" alt="1684374558564"></p> <h3 id="_4-动作栏"><a href="#_4-动作栏" class="header-anchor">#</a> 4，动作栏</h3> <p>绘制动作栏，如下：</p> <p><img src="/feblog/assets/img/1684375659383.9df97c2f.png" alt="1684375659383"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-submit-bar</span>
      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin &amp;&amp; cartStore.data?.length &gt; 0<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">price</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">button-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交订单<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-checkbox</span><span class="token punctuation">&gt;</span></span>全选<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-checkbox</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-submit-bar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-back-top</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">right</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4rem<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1684375696260.e67f4b34.png" alt="1684375696260"></p> <h3 id="_5-全选状态"><a href="#_5-全选状态" class="header-anchor">#</a> 5，全选状态</h3> <p>上面已经把页面绘制差不多了，开始实现业务功能，先实现全选，给全选按钮绑定v-model，如下：</p> <p><img src="/feblog/assets/img/1684375894764.38b83233.png" alt="1684375894764"></p> <p>实现对应的计算属性，如下：</p> <p><img src="/feblog/assets/img/1684375918305.608d82af.png" alt="1684375918305"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 全选状态</span>
<span class="token keyword">const</span> selectedAll <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> cartStore<span class="token punctuation">.</span>data<span class="token operator">?.</span>every<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        cartStore<span class="token punctuation">.</span>data<span class="token punctuation">.</span>forEach<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            it<span class="token punctuation">.</span>checked <span class="token operator">=</span> val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684375950368.0cb87eaa.png" alt="1684375950368"></p> <h3 id="_6-总价"><a href="#_6-总价" class="header-anchor">#</a> 6，总价</h3> <p>开始计算总价，绑定计算属性，如下：</p> <p><img src="/feblog/assets/img/1684376052606.f57787a7.png" alt="1684376052606"></p> <p>实现totalPrice，如下：</p> <p><img src="/feblog/assets/img/1684376095004.f8a0630b.png" alt="1684376095004"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 总价</span>
<span class="token keyword">const</span> totalPrice <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    cartStore<span class="token punctuation">.</span>data
    <span class="token operator">?.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> pre <span class="token operator">+</span> cur<span class="token punctuation">.</span>goods_info<span class="token punctuation">.</span>price <span class="token operator">*</span> cur<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/feblog/assets/img/1684376134062.5b44fdf4.png" alt="1684376134062"></p> <h3 id="_7-更改数量"><a href="#_7-更改数量" class="header-anchor">#</a> 7，更改数量</h3> <p>实现商品的累加，给van-stepper绑定change事件，如下：</p> <p><img src="/feblog/assets/img/1684376439954.6b705ec0.png" alt="1684376439954"></p> <p>实现对应的方法，如下：</p> <p><img src="/feblog/assets/img/1684376459977.2d534b03.png" alt="1684376459977"></p> <p>浏览器打印测试之，如下：</p> <p><img src="/feblog/assets/img/1684376478746.39dc55f1.png" alt="1684376478746"></p> <p>引入接口，调用接口，如下：</p> <p><img src="/feblog/assets/img/1684376500629.7ec06639.png" alt="1684376500629"></p> <p><img src="/feblog/assets/img/1684376583520.55c8ca05.png" alt="1684376583520"></p> <p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684376665910.71d6bd98.png" alt="1684376665910"></p> <p><img src="/feblog/assets/img/1684376697506.08560a3b.png" alt="1684376697506"></p> <h3 id="_8-删除商品"><a href="#_8-删除商品" class="header-anchor">#</a> 8，删除商品</h3> <p>实现删除商品，先封装api接口，如下：</p> <p><img src="/feblog/assets/img/1684376764766.56d0031f.png" alt="1684376764766"></p> <p>在组件中，导入之，如下：</p> <p><img src="/feblog/assets/img/1684376790229.13a73f3f.png" alt="1684376790229"></p> <p>给删除按钮绑定点击事件，如下：</p> <p><img src="/feblog/assets/img/1684376826962.1a7b2dea.png" alt="1684376826962"></p> <p>实现删除逻辑，如下：</p> <p><img src="/feblog/assets/img/1684376877546.4dd27090.png" alt="1684376877546"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 删除商品时事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">deleteGoods</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">deleteCart</span><span class="token punctuation">(</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cartStore<span class="token punctuation">.</span><span class="token function">changeCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>效果如下：</p> <p><img src="/feblog/assets/img/1684376933793.61f9c446.png" alt="1684376933793"></p> <h3 id="_9-提交订单事件"><a href="#_9-提交订单事件" class="header-anchor">#</a> 9，提交订单事件</h3> <p>分析如下：</p> <p><img src="/feblog/assets/img/1684376982997.0fd01ff0.png" alt="1684376982997"></p> <p>绑定提交事件，如下：</p> <p><img src="/feblog/assets/img/1684377026736.d0a98d94.png" alt="1684377026736"></p> <p>实现对应的方法，如下：</p> <p><img src="/feblog/assets/img/1684377215490.df1eec10.png" alt="1684377215490"></p> <p><img src="/feblog/assets/img/1684377147201.de2eb5ad.png" alt="1684377147201"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 提交事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 格式化数据</span>
    <span class="token keyword">const</span> goods <span class="token operator">=</span> cartStore<span class="token punctuation">.</span>data
        <span class="token punctuation">.</span>filter<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">goods_id</span><span class="token operator">:</span> it<span class="token punctuation">.</span>goods_id<span class="token punctuation">,</span>
            <span class="token literal-property property">count</span><span class="token operator">:</span> it<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
            <span class="token literal-property property">cartId</span><span class="token operator">:</span> it<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            <span class="token literal-property property">goodsInfo</span><span class="token operator">:</span> it<span class="token punctuation">.</span>goods_info<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>goods<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'addressList'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">orderInfo</span><span class="token operator">:</span> <span class="token function">btoa</span><span class="token punctuation">(</span>
                    <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        goods<span class="token punctuation">,</span>
                        <span class="token literal-property property">price</span><span class="token operator">:</span> totalPrice<span class="token punctuation">.</span>value
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>浏览器测试之，如下：</p> <p><img src="/feblog/assets/img/1684377249178.24effd99.png" alt="1684377249178"></p> <h2 id="十五-种草页面"><a href="#十五-种草页面" class="header-anchor">#</a> 十五，种草页面</h2> <p>src\views\Recommend\index.vue</p> <h3 id="_1-标题"><a href="#_1-标题" class="header-anchor">#</a> 1，标题</h3> <p><img src="/feblog/assets/img/image-20230305213336662.0b9f5823.png" alt="image-20230305213336662"></p> <p>效果</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkEAAACcCAYAAAB4O391AAAXR0lEQVR4nO3deXSU5aHH8e8s2TMJCUMCCSARQhKWIBO4tIV6rkCXgxvglYrSRbFV06vgrrfuSlvXKlawiuKC2NpKEastivTWorcWJkhKwxIshhAQmJQkA1mGzLz3jyRkkkwgwZioz+9zDofJ+z7zvs/knLz55Vltw7JGWIiIiIgYxmZZlkKQiIiIGMfe1xUQERER6QsKQSIiImIkhSARERExkkKQiIiIGEkhSERERIykECQiIiJGUggSERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESMpBAkIiIiRlIIEhERESMpBImIiIiRFIJERETESApBIiIiYiSFIBERETGSQpCIiIgYSSFIREREjKQQJCIiIkZSCBIREZHPTsCipjpEQ6CvK9KRs68rICI9KAg4Ip8qfuESfv520+u87y/m9un9u3HhSlZf8y3ufa/pqyl3ruWx89q+v3LNAr55d3OBybfz1uLzOdkdKtfdy9XPb2/6Imc+j982te17/O9x/y1/JPqsKcyYNJmsDBfRwX1sfGEJxRPuYP4Z0d34DIC/mFdWbMAHgJsp8+aQ72pfaB/rl66muVbknlPI1CHdu42I0QIhSotCvPxPi3cOw7t+4KgFCTYGuWBKio1Zo22c7XGQ1M0f4Z72+QhBR4M89+sQe0Y7uOMrapwS6UzA76ch6GffjgpqGvax458VHNr/Dzbu9rGvZDf+UTfxuxfnkBXpzYd38PIfj5FrL2bAhYs7v0eVn4YOR30Ea/ZTdGQQY2q91NT78Ve1fXr56/0UHQzgif8H+2qO4avy0/H5FoOrX9jRWh8vr93MaOc2YlLmdKxL8Xvcsvwlsl9ZxHVjV7D3+USuGjqT193JMDKRiW/fQn58px+lo9rdvFV4JyuHBIgrv5BnZkcKQT62LHuW6w75GFhexk1fVQgS6ZJQiNL1Ib77nsUH1RZnDrcxI8fGHZk2YpqLHKqw2LTH4uJXQrA2xN2T7Syc6iCpj371930IOhpk0cMhbjtkMS7KYuFXIKmv6yTyObXh52cx7ad7SExzEOuIxeG0iIpOwBVlx4rfSmDFWrY8NIes9E4ukBCFM3SiOxTzxLTLuG7HTmLbHHdRnzkITyKQWMCm67NIO9w2PdSnDMOTFg0UkPF/F/Kfg11UtSnhZ1TOL1juXUh++OEYJzFxkeriZ8Obr0BGf6LrPuaGm84jcwgs/J+v8vpvGsj/6FbueXoGKxfkRwhblay/7xqW7Wh3RX852/IyyY4DEt/l4SvO4xVX+xQUwFvbQO4ANzGJsfzm1nPZ6G73VMqZz8rbpkaqtIiZfEHuez7E7Zss5s9ysOwbdsak2DqW88AsYNHhIG++HeLsZ4LcucXir993MMUdofxnrG9DUEsAOmLBABvPXOBQABI5gayxORB3mNSYIMGE/qQ3t4IEDnqJji8gfXY9+/YHIP1TtjGnppLW5kAUVWHdbPbYDNJSo9qUOBYT9qecI5X4VFe7cOLvXh2q3uPVn1ZB/kf4Qz9jztSmsDL1mpu54oEb+FUuVDzwOOsvfJpvZ3R8e83BHbz8TgN5yWGpzxZFQpyz6cEXF0/Nzo/40Gr/Tjv2+BjiAeISqS8r5cOPWz+8vbokYquViLH2NTL9ZyHeSYZV90Yxa0QXwkyKgxlzHNR7GvnhcyG+fneIN26NYkZG7wahvgtB4QEo0cam66MoSOiz2oh8IWSOmMzcwnFMGZ5I2V8f4KXNblKOeJn84L948qKInWDd5Gbc5ZfxRIfjR/jnq0+zYl8yw47tZ9CMq7kit+2fLNXbX+fxN/czKKqcqoyL+NEFo+nQ00Qu/WntcvPXNwcjG61daPEuXNGw4/fPsGSwC8+xDHxfaaBo2S/ZaLMTstURPz1AxpYLuGzRFMpWL2aJLexRljuTwrOaGt89g2La3L2otBqyk/EAsIWjeyE5u6BDLYuguQw0HNpB/NCwMvEdy4sY62iQRU9ZvOOyselGJwXJ3QsxMSOcvHBjkOH3Bzn7qWDTNXoxC9gsy+rwd9BnTgFI5FMrfmwC4x6BMSEvU5/whQ1UbjuIuUWRDzzupteBg16i09r+Mo802LlV0zVnLfMxuK6M2a/5Ig6Mdp+/mqFxe3BfvvoEA6OL+UVBU5cbx7vQgCNeSnfC+atqePGsjSwceRmPDXLjcQJ1+/EdaWl5iqIqMZkRcV6O+oZSZ4U9dMvLcD+6Be+C/PY3bXLgNS4beC3LPbsZXnoVD5UuYWaHrsPm+u2tgIOf8Mhmi2vP6OTbImI0i62rGhn7jsWqn0Qxq7NWnOog979gMeF7TqYld3KpfY2k3Rdi0nQHv5vtIKaTYj2t91uCFIBEekWRHzxhTTEtAQjoEIACB70d3l/x5yW8tr31a8f4/2b5k02vG/evZMnSttPQgvaxLH9+fPMXn/CbpUtaT+bOpPCsdn1WQ4YwzB72CIodReaAEhISj1G6/DYei0lpCkB4Ia4Ad/O4oaLSahgAUECC20sCYZ9lQNiHjCRlIpc9OJrlv3SRMHgNiy6pJrDsJeYMCy+UxcwlS/lGfDyhxkZcwzq7mIjhPg4ydo3F/HnOzgMQQJ3FLVtCrKoDOgtBGU62zjlG+rNBVnnszB3WO91ivRuCFIBEPpUV372EN5tfH9h5jNOTonCGsvjrQ5dy8W+bEs+MmxaTEvACBYCX6tKmLp9ILUFFBwOtLTHtVBY/y48X+hj6aWdGlZfhfnRKmxA0YFQOcwF/2Xa2VoZIdTbQYLORd+YFuD9cwvyb9oOnP+AF2g2mPvAaV2bfwK+yd+Fpf6619pFbw0oqID0dT/8owE1g39/4nzNs3D+8bSgs2lvRlLMA29FPGJzTrgts8u14F59/6t8TkS88iw3vWzDazsKpJ5/a5e7C7K+0M+08sTHE/e+HmD2sd1qDei8EKQCJfGqHSnbwcm0deUCDM46m2eaphCq38uGhOI6VlTDxJ8+QagPwU116BQ+VPsnM9MjdZ5VrFuD+8Z8Z09kNh7pxuwGfF9zdGwtzPHTZytqdyWfeiy8xD47fPzWuBP+013lxqYc3vzOJRbnpx8fkRHLCCW7hddjfOjA6aIvGMyqz9Rr1NRyz4ogeNIq62ro278tLTW39IjW1zXl7dUmvNdWLfG6FQvz9Y7hwvI0xPTW93e7gnDEhfrzZYmsICnph2nzvhKCWANSgACTyqf373/iI4lByHJ7mRpzg0d346gZyqA6CofBhfl2NCyfg88J1Jxhn04mW0HWiMNOGFaI+6OffPgeEtYRX7mjAX+U/Prcsru4YAWfkcwA0D6xOSsth7rSmQ3X1AWyWj3+WVJEY5yB0xEt9ynmMz07s1mdqcgakdRzyLWKUUovrvRZLL+hkddZTNPR0GywLsrHUSUFOj146ol4JQaXrQ9x2FIiGdQsUgERO1cwlS5kCOKICeJfN5Ufr0hgb8DJiwTqem9KPYCiEO6OW4lBKz900fgi+D1ayZOmGbr2t7AMfmfFuqO1aeXe0BY4czlkwB76zmqJRSXgooH/OLVwyeBEHmsvVR6dDVjIeCqD9uaN+rmketD31tpc4vpJPcB9/uPYbnLslFk+Ul/07r2Hl4ceY2q9bH0lEmtUcsuB0yB7YtfJdfiINtHHl6TbKD4Ug57NvCuqVEJRdYGP8Gxab0+GKlxtZ/yMnQ7UwtEi3ZU2a2LQadNWfeG5pNHjAOggDs8fh8bibt8yoZEvM6XR7XZ7OxKfh3riUu96KuKJhp2pTBpOTRNdCUNwogn+7h7nT7mXa4t+xorCGVa/9hVXJCV1vSepUgOJfLuDcpU48+UHqi2D+2/cxtV/kcUMn9b1nu90qJvJlU18PgwbY6Rc+0LkyyD0rQ2xtV/a3PmCwjdlLA1zYYUFEG1dc7GRay1TSZMgdYOMf9Z9Z1dvone6wDCdFdzTiuQc214b4+lON/FVBSOSUVax7hccHJ+IBjiXkUf7qlZz9+Ne563cLmNimp6YHfsgC1RxLncj0r3S2DHVkB3Zu5ePaKCI2ttTuY8emjby1dhuuWDs4o3E01FG2qwR7aBiX3HU27z79DiR7qdzxc17aW3h88HNc1Vou99zK81m7OK3dOQDi23ZVVay5kXELS8j3xEGVl9i7NnDndBdQCbQdN9RenT2G1Niw76Gv4yw6EWmWCGMzbe0WWoUzUyyu3gQ/mGBnUoRtbtJPpVe6h/TewOjwIPSRgpDIKat9j2U/XAdDmx41UQnxlP7Zi832Kv8xrZoNf7ycqIYyYCgJg9cf3xoi0mwyf9l2hiU5oeYE96vZRdTlr7Kyp8YEHXiNSwbOZOWgYbgSkslOan4MHSvhwGEIhoDGIC0jm/rnxODq52pdeLEhiujGTs61U7FmAYPP/xOjPK6mh10j0K91JevwcUNtPnJtPVGxCbhrtrPuX42kxtoJ1R6kZg+RQ52IYZKTbOzfH+KAD2hZmSLGwazZEQp/0sjD74Y4b3oUs07WfeazeGO/xZSkL+MUeQUhkU8pQPHzj3JXYmrzGjrQUFdHzrg81nyQwPhP7mTKOQe5Oi+Z0xw2nGFbQ0SaTdbS0hE4UQhyF8Aj4yh44RRnh/k6not3jYAB0aQ3Nv/w13mpGnAjT61cyMwxwOHWsqc2MDrA7l/fyOlzmwJQ233QWrQbNxQmsK+Ydaue5o6njxBXv5dPSvxkf/8nXP+r+Zw/uSdW5hb5YotJA6qhtMKCLuz5daSrF66At6vh0rTeCUG9Hz8ynBTdYWO838ae5iC0pwcmsIiYIPDhEi4rLIa0T6hrnrVt85cw+OqX2HbzIDaXT+CRx69mRmwlZUGALRz9pITd5eX8KywpNNbsZnd5OR/XNJ74hnt8+A758FmnNf0f9u9A+Fif2oMdzg+1ml/vaXfNeBfx/l0kB5PJSnNQUx+CRug3bjLTzsgg2gEEWx6ALQOjM0lr/hfluZXnmwdGtz+XlJLEgjeqILidX9/4OuS7iG3cwdEuDs4GmlaVzhzH2Q++Q+2ResZc9DSrKxr43+fuY96ZWbh6djKMyBfTMBtL8228sbsnf4FbbN1tMSjfztheWqS0b/YOU4uQyCl54uoVePMt8n15uEdXsf9jBw4gVGsn95rn2X6em5zhfla/MByOHKLyo+/z0EfL+Fa/OrY9lcmkJSMZE/Qy4eHdvP/N/lS+dQ1ZP/6A3Ah/dPXPv4wnlnQ83qJl77J0DuIbfzE3f31o54Vzw1Zydo2jcHMFD47NoOGPhSRdtQHPScZcOxMSjnd5xUc5+Xcn5+qP+nE5guDIYtL3UmGlD5/zXCafuZWi96NJAIqsWPjwUQrmr4h4r6LSavAUNHfjRbPtNz9k1i8vIn1EeEvYPLzehSeutMiXmoMZeSGuetdiwzdgSk/M+j4a4rmNMO1Me+drl/WwvttAVUFIpNsyhwHvlHLge8/x9IjJTLq3gDFANI3gyCBneFO5prEuOcBwUl1OXP1cxMaMpGWgTVKsC1c/F4HU05n77QAwHne7AYuZZxVSeFbndSkOPMsD70E65bgnXUzhVV0dM9SfnOa9uPyhqBMXxUv13uu4a81FtCwZEuV/n7t/8CSr07czvN05gJghLiCarLE58PFIHtz1HJ4/xJC9rqB1fFJMiKJtNeSd1vH+eYMTCD9qjx5CUgZhCyaWEBc/r4ufVeTLa+gEO/PWBrl/bZCJJ9nvy3fS2V4WW9eGeLjOYt2E3gsCfReCoG0Q2hVizitB/nJR722cJvJFM25qJqwYyOIrv0by7zsr1flYlw4lp9/OyunhR5o2D43cRtJW6zYc3RkzNK+TbS46lzx4CPmTJoZtm7GPtJpGSI9wLkzW6O/y+z3fZuYQKA7fXwwLGtOYe8HEiPfz+8vZtrOGhDigrpakkbkMcYUPvT6D1pGgIgbrb2fRjBCnPdLIk8PtLBjXyTieFBurLnRQ0H7aWJiGLUHGLrMovC5sunwv6NsQBMeD0PUroTwBBSCRE8j52vn8YMkEZg6D7fbuDVTujiJOvtJz+IasXdtSwwv0TAtKl4ZMjv02MyMc9tgaYOw8Vr7YSV0OvEZh9g0szd7F8L1XcPefn4yw07yIgI2hUx28uhMuuC1AzAPRXJkX4aczxsGsczu/SsO2RmJvC8E5dm7uwj5kPanvQxBAhpOHb+jrSoh8AWRdyOL5rVO8PytdWaAwfEPWru0t1vF8fTDAiSNNAXAtlxa0tk0VlVZDdvOK0e3ONel+a1Mb+3ezNCaKfOAoJxk4LmI6u53Zl8OrwAU3HKP8Wgc3T3WQ1JUsEwpRuj7IyF9YcLadsst7f0jM5yMEiUjXRHe+Jk7PyOda7yau7ULJ1nWAuru3WOtKzUUHj+FJizrp4tZHDvloGVIwtB9wyNc88/402s7BL8M9oHutTcUvXMLP3279+sO/b2RkRhJOIOg/jQE9uAOJyJdStJ3ZV8KmgUEmPBXkp8Uhln/NzmyPg6RIf7EFQpQWhXjsfYsn/mYxb76DJ2Z2MTj1MIUgEell/ckbn0nR7/c0BSCgsRJOG59Lx6EAXo4cmsd/3fpVMjuc60yk63Qus7+bl9euI6/lTbFJJIaqOVIEA386lYmfdbObyJeB3U7BbBvVY0MsXx/i0l8HufRPIc5MgSmDbAxxAo0Wm/bDM4eBKotJeXbeWORgRnbfzYhSCBL5Ituzk63QpUHQp1T+pNeroBwY0s23ZY2cDHvXUHLYyaiccaSc+wz3faftltH1/l2wFxIHF/CdqwpPvXvreF13UgKMane4/4hxnDvkPSrCD/Y7g/MefZzCH07+zLseRb48bCRlO1iQbefKyhAbN1usL7PYesCitLlEUrKN5aNtTB5vJ7t/7yyIeCI2y7KskxcTkc+dWj/+QPPreBeuk/227m75k/B/tJHtLT1R7lwmDu9GR10wgN/fAMTg6hehIoF9FG+uoKHp4uROyvp03YDhnz3ahSvC/kUiYh6FIBERETGSliYUERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESMpBAkIiIiRlIIEhERESMpBImIiIiRFIJERETESApBIiIiYiSFIBERETGSQpCIiIgYSSFIREREjKQQJCIiIkZSCBIREREjKQSJiIiIkRSCRERExEgKQSIiImIkhSARERExkrOuvqGv6yAiIiLS65xYob6ug4iIiEivU3eYiIiIGEkhSERERIykECQiIiJGUggSERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESMpBAkIiIiRlIIEhERESMpBImIiIiRFIJERETESApBIiIiYiSFIBERETGSQpCIiIgYSSFIREREjKQQJCIiIkZSCBIREREjKQSJiIiIkRSCRERExEgKQSIiImIkhSARERExkkKQiIiIGEkhSERERIykECQiIiJGUggSERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESMpBAkIiIiRlIIEhERESMpBImIiIiRFIJERETESApBIiIiYiSFIBERETGSQpCIiIgYSSFIREREjKQQJCIiIkZSCBIREREjKQSJiIiIkRSCRERExEgKQSIiImIkhSARERExkkKQiIiIGEkhSERERIykECQiIiJGUggSERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESMpBAkIiIiRlIIEhERESMpBImIiIiRFIJERETESApBIiIiYiSFIBERETGSQpCIiIgYSSFIREREjKQQJCIiIkZSCBIREREjKQSJiIiIkRSCRERExEgKQSIiImIkhSARERExkkKQiIiIGEkhSERERIykECQiIiJGUggSERERIykEiYiIiJEUgkRERMRICkEiIiJiJIUgERERMZJCkIiIiBhJIUhERESM9P+p3jw6GRaJMAAAAABJRU5ErkJggg==" alt="image-20230305213507582"></p> <h3 id="_2-api配置"><a href="#_2-api配置" class="header-anchor">#</a> 2，api配置</h3> <p>src\api\recommend.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 文章列表
 * @param {{limit:number,page:number}} queyObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArticleList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">queyObj<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/article/list'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queyObj<span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 添加种草文章
 * @param {{title: string,desc:string,pic_url:string,detail:string}} articleInfo 文章信息
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addArticle</span> <span class="token operator">=</span> <span class="token parameter">articleInfo</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/article/add'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>articleInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span>
                formData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> articleInfo<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 我的文章列表
 * @param {{limit:number,page:number}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">myArticleList</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/article/list'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArticleInfo</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/article/detail/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_3-封装上滑加载函数"><a href="#_3-封装上滑加载函数" class="header-anchor">#</a> 3，封装上滑加载函数</h3> <p>src\hooks\usePageLoad.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token comment">// 传入一个</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">usePageLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">apiCallback<span class="token punctuation">,</span> queryParams</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 数据</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 总数</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 加载状态</span>
    <span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 完成状态</span>
    <span class="token keyword">const</span> finished <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 加载事件</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onLoad</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 调用api</span>
            <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">apiCallback</span><span class="token punctuation">(</span>queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 数量</span>
                count<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
                <span class="token comment">// 加载状态</span>
                loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 新增数据</span>
                    data<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 每次判断总数和每次获取数之比，当已请求数page数大于总数和每次获取数之比时就停止加载</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>queryParams<span class="token punctuation">.</span>page<span class="token operator">++</span> <span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value <span class="token operator">/</span> queryParams<span class="token punctuation">.</span>limit<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            finished<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">,</span>
        onLoad<span class="token punctuation">,</span>
        loading<span class="token punctuation">,</span>
        finished<span class="token punctuation">,</span>
        count
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_4-封装articlelist组件"><a href="#_4-封装articlelist组件" class="header-anchor">#</a> 4，封装ArticleList组件</h3> <p>src\components\ArticleList.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePageLoad <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/hooks/usePageLoad.js'</span><span class="token punctuation">;</span>
<span class="token comment">// 接收参数</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">articleData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">apiFn</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Function<span class="token punctuation">,</span>
    <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 把传进来的参数传入</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> onLoad<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> finished <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePageLoad</span><span class="token punctuation">(</span>
  props<span class="token punctuation">.</span>apiFn<span class="token punctuation">,</span>
  props<span class="token punctuation">.</span>params
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">v-model:</span>loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">offset</span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-card</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article in data<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:thumb</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.pic_url<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
          props.status == 2
            ? $router.push({
                path: <span class="token punctuation">'</span>/article-detail<span class="token punctuation">'</span>,
                query: {
                  articleId: article.id,
                },
              })
            : $router.push({
                name:<span class="token punctuation">'</span>goodsDetail<span class="token punctuation">'</span>,
                params: {
                  goodsId: article.id,
                },
              })
        <span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ article.title }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#desc</span>
          <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ article.detail }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span>
        <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#price</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ article.desc }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#num</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ article.created_at }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-card</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token selector">.item</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token selector">.title</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
      <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.detail</span> <span class="token punctuation">{</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
      <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>105<span class="token punctuation">,</span> 105<span class="token punctuation">,</span> 105<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.desc</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>105<span class="token punctuation">,</span> 105<span class="token punctuation">,</span> 105<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h3 id="_5-绘制页面"><a href="#_5-绘制页面" class="header-anchor">#</a> 5，绘制页面</h3> <p>src\views\Recommend\index.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getArticleList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/recommend'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ArticleList <span class="token keyword">from</span> <span class="token string">'@/components/ArticleList.vue'</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-right</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push(<span class="token punctuation">'</span>/add-article<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArticleList</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:api-fn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getArticleList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:params</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ page: 1, limit: 10 }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-back-top</span> <span class="token attr-name">right</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.list</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="十六-文章详情"><a href="#十六-文章详情" class="header-anchor">#</a> 十六，文章详情</h2> <h3 id="_1-配置路由-3"><a href="#_1-配置路由-3" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/article-detail'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'articleDetail'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Recommend/Detail.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'文章详情'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-api接口配置-3"><a href="#_2-api接口配置-3" class="header-anchor">#</a> 2，api接口配置</h3> <p>src\api\cattle.js 点赞接口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 获取点赞列表
 * @param {{type:string,page:string,limit:string}} queryObj
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getCattleByType</span> <span class="token operator">=</span> <span class="token parameter">queryObj</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/praise/list/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> queryObj<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addCattle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
        type<span class="token punctuation">,</span>
        object_id
    <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/praise/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'object_id'</span><span class="token punctuation">,</span> object_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteCattleById</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/praise/delete/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @description 取消点赞(根据类型+对象id)
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteCattleByType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
        type<span class="token punctuation">,</span>
        object_id
    <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/praise/delete/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'object_id'</span><span class="token punctuation">,</span> object_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>src\api\comment.js 评论接口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getComments</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/comment/add/'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                data<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> info<span class="token punctuation">[</span>it<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addCommentApi</span> <span class="token operator">=</span> <span class="token parameter">info</span> <span class="token operator">=&gt;</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/frontend/comment/add/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> info<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_3-标题"><a href="#_3-标题" class="header-anchor">#</a> 3，标题</h3> <p><img src="/feblog/assets/img/image-20230305221155683.f637b41f.png" alt="image-20230305221155683"></p> <h3 id="_4-内容绘制"><a href="#_4-内容绘制" class="header-anchor">#</a> 4，内容绘制</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">,</span>
    onMounted<span class="token punctuation">,</span>
    computed
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    getArticleInfo
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/recommend'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCattle<span class="token punctuation">,</span>
    deleteCattleByType
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/cattle'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCollection<span class="token punctuation">,</span>
    deleteCollectionByType
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/collection'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    useRoute<span class="token punctuation">,</span>
    useRouter
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCommentApi
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/comment'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 文章id</span>
<span class="token keyword">const</span> articleId <span class="token operator">=</span> route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>articleId<span class="token punctuation">;</span>
<span class="token comment">// 控制收藏</span>
<span class="token keyword">const</span> isCollection <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 控制点赞</span>
<span class="token keyword">const</span> isThumbs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>articleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/recommend'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 文章信息</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取服务器数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>articleId<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 评论反序</span>
        res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>comments <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>comments<span class="token operator">?.</span>reverse<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    isThumbs<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_praise<span class="token punctuation">;</span>
    isCollection<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_collect<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.picUrl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.desc }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>created_time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.createdAt }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ info.detail }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230305221639772.47885612.png" alt="image-20230305221639772"></p> <h3 id="_5-评论绘制"><a href="#_5-评论绘制" class="header-anchor">#</a> 5，评论绘制</h3> <p><img src="/feblog/assets/img/image-20230306095133894.b66ac378.png" alt="image-20230306095133894"></p> <p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306095149505.3611ba7b.png" alt="image-20230306095149505"></p> <h3 id="_6-动作栏"><a href="#_6-动作栏" class="header-anchor">#</a> 6，动作栏</h3> <p><img src="/feblog/assets/img/image-20230306103850099.d83ebe4c.png" alt="image-20230306103850099"></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add_comment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span>评论
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Thumbs_action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
            <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3498db<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb-circle<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.praise || <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ offset: [<span class="token punctuation">'</span>10px<span class="token punctuation">'</span>, <span class="token punctuation">'</span>5px<span class="token punctuation">'</span>] }<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>star_action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
            <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#f39c12<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.collect || <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>star<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ offset: [<span class="token punctuation">'</span>10px<span class="token punctuation">'</span>, <span class="token punctuation">'</span>5px<span class="token punctuation">'</span>] }<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>效果如下</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAawAAAB3CAYAAABfRnT0AAARhklEQVR4nO3dfXBc1X3G8e+5d3e1km3Jlt+DUaRgyzhEOJnYBBJm6ibCJRja0kym4MEBQWda45lOqNNhnEyacTKBTCDU4BobCGWapmUmMWXIkEmJnYYQp+PBxkBUbLCAoHUwfkPoxV7t272nf6xXWkkraWWtpL3i+fxjdu/LnjXe+9zfOefeaxoallprwXUt1rqAJfsarLX4vuEPf3iHVOocmUwGERGRUChEJDKDhoZ6HMdijMHzwBgAgzEenmfOv85nAA/fL7RsZE5JWi4iIjLBFFgiIhIICiwREQkEBZaIiASCAktERAJBgSUiIoGgwBIRkUBQYImISCAosEREJBAUWCIiEggKLBERCQQFloiIBIICS0REAkGBJSIigaDAEhGRQFBgiYhIICiwREQkEBRYIiISCAosEREJBAWWiIgEggJLREQCQYElIiKBoMASEZFAUGCJiEggKLBERCQQFFgiIhIICiwREQkEBZaIiASCAktERAJBgSUiIoGgwBIRkUBQYImISCAosEREJBAUWCIiEggKLBERCQQFloiIBIICS0REAkGBJSIigaDAEhGRQFBgiYhIICiwREQkEBRYIiISCAosEREJBAWWiIgEggJLREQCQYElIiKBoMASEZFAUGCJiEggKLBERCQQFFgiIhIICiwREQmEogPL9/2JbIeIiATIVGSCKiwREQmEogPLcfpXtdZirZ2QBomISPkZfNzPz4TJEhrrBtZajDEDXufkvy8iIsE1+NieO74PzoDJNKbAyjU090VyXyL3WuElIhJchXrO8oMq93qqetjGXGHlGylpFV4iIuWvmPAplyGgMQVWoeDJ9WsOXpb/Bcvly4qIyPBGOo6PtN5kKTqwfN/vC6fcYFvuyziOM6RcVFUlIhI8+V1+g4/tkM0CY8yUTGsvOrAcx8HzvCFjVrmGF+rXVGUlIhIM+WNVIx3bc+sFYpZgzuCJFoOnPCqsRESCI79nrNCxvBx6zooOrOECabhxreGmvouISPkYfKwe7phezHsTbcyBlT9GlR9iwyWyiIiUr0LT1QtNphvu2D+ZxjxLMNfI3IDb4P7NQl9EwSUiUp4Gj13lGxxQUz2pbswVlud5A2aODJe0CikRkfI3WoExOJx838d13Sk5xhc9zWPw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" alt="image-20230306103957969"></p> <h3 id="_7-弹出框"><a href="#_7-弹出框" class="header-anchor">#</a> 7，弹出框</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment_box<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">safe-area-inset-bottom</span>
      <span class="token attr-name"><span class="token namespace">v-model:</span>show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment_header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发布<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">label-align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入评论<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">show-word-limit</span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>效果如下</p> <p><img src="data:image/png;base64,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" alt="image-20230306104035993"></p> <h3 id="_8-点赞逻辑"><a href="#_8-点赞逻辑" class="header-anchor">#</a> 8，点赞逻辑</h3> <p><img src="/feblog/assets/img/image-20230306104233068.41ea856b.png" alt="image-20230306104233068"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 点赞逻辑</span>
<span class="token keyword">const</span> <span class="token function-variable function">giveTheThumbsUp</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isThumbs<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 取消点赞逻辑</span>
        <span class="token keyword">await</span> <span class="token function">deleteCattleByType</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 点赞逻辑</span>
        <span class="token keyword">await</span> <span class="token function">addCattle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 重新获取服务器数据验证</span>
    <span class="token keyword">const</span> newDetail <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>praise <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>praise<span class="token punctuation">;</span>
    isThumbs<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_praise <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>is_praise<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>效果如下</p> <p><img src="data:image/png;base64,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" alt="image-20230306104519564"></p> <h3 id="_9-收藏逻辑"><a href="#_9-收藏逻辑" class="header-anchor">#</a> 9，收藏逻辑</h3> <p><img src="/feblog/assets/img/image-20230306110040290.196d23ed.png" alt="image-20230306110040290"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 收藏</span>
<span class="token keyword">const</span> <span class="token function-variable function">collection</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isCollection<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 取消收藏</span>
        <span class="token keyword">await</span> <span class="token function">deleteCollectionByType</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 收藏</span>
        <span class="token keyword">await</span> <span class="token function">addCollection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 同步数据</span>
    <span class="token keyword">const</span> newDetail <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>collect <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>collect<span class="token punctuation">;</span>
    isCollection<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_collect <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>is_collect<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>效果如下</p> <p><img src="data:image/png;base64,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" alt="image-20230306110235917"></p> <h3 id="_10-新增评论"><a href="#_10-新增评论" class="header-anchor">#</a> 10，新增评论</h3> <p><img src="/feblog/assets/img/image-20230306110345691.ae138c4b.png" alt="image-20230306110345691"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 评论</span>
<span class="token keyword">const</span> <span class="token function-variable function">addComment</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>comment<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 新增评论</span>
    <span class="token keyword">await</span> <span class="token function">addCommentApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> comment<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 隐藏评论框</span>
    show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 情况输入框</span>
    comment<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token comment">// 重新获取数据</span>
    <span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306111255027.a2d22c98.png" alt="image-20230306111255027"></p> <h3 id="参考代码"><a href="#参考代码" class="header-anchor">#</a> 参考代码</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">,</span>
    onMounted<span class="token punctuation">,</span>
    computed
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    getArticleInfo
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/recommend'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCattle<span class="token punctuation">,</span>
    deleteCattleByType
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/cattle'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCollection<span class="token punctuation">,</span>
    deleteCollectionByType
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/collection'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    useRoute<span class="token punctuation">,</span>
    useRouter
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    addCommentApi
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/comment'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 文章id</span>
<span class="token keyword">const</span> articleId <span class="token operator">=</span> route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>articleId<span class="token punctuation">;</span>
<span class="token comment">// 控制收藏</span>
<span class="token keyword">const</span> isCollection <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 控制点赞</span>
<span class="token keyword">const</span> isThumbs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>articleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/recommend'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 文章信息</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取服务器数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>articleId<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 评论反序</span>
        res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>comments <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>comments<span class="token operator">?.</span>reverse<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    isThumbs<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_praise<span class="token punctuation">;</span>
    isCollection<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_collect<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 点赞逻辑</span>
<span class="token keyword">const</span> <span class="token function-variable function">giveTheThumbsUp</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isThumbs<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取消点赞逻辑</span>
    <span class="token keyword">await</span> <span class="token function">deleteCattleByType</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 点赞逻辑</span>
    <span class="token keyword">await</span> <span class="token function">addCattle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 重新获取服务器数据验证</span>
  <span class="token keyword">const</span> newDetail <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>praise <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>praise<span class="token punctuation">;</span>
  isThumbs<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_praise <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>is_praise<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 收藏</span>
<span class="token keyword">const</span> <span class="token function-variable function">collection</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isCollection<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 取消收藏</span>
        <span class="token keyword">await</span> <span class="token function">deleteCollectionByType</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 收藏</span>
        <span class="token keyword">await</span> <span class="token function">addCollection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 同步数据</span>
    <span class="token keyword">const</span> newDetail <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span>articleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>collect <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>collect<span class="token punctuation">;</span>
    isCollection<span class="token punctuation">.</span>value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>is_collect <span class="token operator">=</span> newDetail<span class="token punctuation">.</span>data<span class="token punctuation">.</span>is_collect<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 控制输入框显示</span>
<span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 评论收集</span>
<span class="token keyword">const</span> comment <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isHasComment <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  comment<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'#2ecc71'</span> <span class="token operator">:</span> <span class="token string">'#ccc'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 评论</span>
<span class="token keyword">const</span> <span class="token function-variable function">addComment</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>comment<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 新增评论</span>
    <span class="token keyword">await</span> <span class="token function">addCommentApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">object_id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> comment<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 隐藏评论框</span>
    show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 情况输入框</span>
    comment<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token comment">// 重新获取数据</span>
    <span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.picUrl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.desc }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>created_time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.createdAt }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ info.detail }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.comments<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>评论:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content_item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it in info.comments<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_pic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.user.avatar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.user.name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item_left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ it.user.name }}<span class="token entity named-entity" title="&amp;emsp;">&amp;emsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createdTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{
              it.created_at
            }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ it.content }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add_comment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span>评论
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Thumbs_action<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>giveTheThumbsUp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
            <span class="token attr-name">:color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isThumbs ? <span class="token punctuation">'</span>#3498db<span class="token punctuation">'</span> : <span class="token punctuation">'</span>#767676<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`thumb-circle${isThumbs ? <span class="token punctuation">'</span><span class="token punctuation">'</span> : <span class="token punctuation">'</span>-o<span class="token punctuation">'</span>}`<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.praise || <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ offset: [<span class="token punctuation">'</span>10px<span class="token punctuation">'</span>, <span class="token punctuation">'</span>5px<span class="token punctuation">'</span>] }<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>star_action<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collection<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
            <span class="token attr-name">:color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isCollection ? <span class="token punctuation">'</span>#f39c12<span class="token punctuation">'</span> : <span class="token punctuation">'</span>#767676<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.collect || <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`star${isCollection ? <span class="token punctuation">'</span><span class="token punctuation">'</span> : <span class="token punctuation">'</span>-o<span class="token punctuation">'</span>}`<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:badge-props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ offset: [<span class="token punctuation">'</span>10px<span class="token punctuation">'</span>, <span class="token punctuation">'</span>5px<span class="token punctuation">'</span>] }<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment_box<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">safe-area-inset-bottom</span>
      <span class="token attr-name"><span class="token namespace">v-model:</span>show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment_header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addComment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发布<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">label-align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入评论<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">show-word-limit</span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token selector">.body</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 12px<span class="token punctuation">;</span>
      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.info</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
        <span class="token property">justify-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token selector">.desc</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.created_time</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.detail</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">text-indent</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
        <span class="token property">word-break</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">white-space</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.comment</span> <span class="token punctuation">{</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f6f6f6<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.content_item</span> <span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token selector">.user_pic</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token selector">img</span> <span class="token punctuation">{</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
          <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
          <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.item_left</span> <span class="token punctuation">{</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token selector">.user_name</span> <span class="token punctuation">{</span>
          <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
          <span class="token selector">.createdTime</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #86909c<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.user_content</span> <span class="token punctuation">{</span>
          <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
          <span class="token property">word-break</span><span class="token punctuation">:</span> break-all<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.action_box</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgb</span><span class="token punctuation">(</span>232<span class="token punctuation">,</span> 232<span class="token punctuation">,</span> 232<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px -2px 10px <span class="token function">rgb</span><span class="token punctuation">(</span>232<span class="token punctuation">,</span> 232<span class="token punctuation">,</span> 232<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token selector">.add_comment</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">padding-left</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #767676<span class="token punctuation">;</span>
      <span class="token selector">&amp;:active</span> <span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #e8e8e8<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.action</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">--van-badge-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      // <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #767676<span class="token punctuation">;</span>
      <span class="token selector">div</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 6px 6px 6px 26px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token selector">:deep(.van-badge)</span> <span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> #767676<span class="token punctuation">;</span>
          <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
          <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">&amp;:active</span> <span class="token punctuation">{</span>
          <span class="token property">background</span><span class="token punctuation">:</span> #e8e8e8<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.comment_box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token selector">.comment_header</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px 16px 0 16px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token selector">.left</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>isHasComment<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br></div></div><h2 id="十七-新增文章"><a href="#十七-新增文章" class="header-anchor">#</a> 十七，新增文章</h2> <h3 id="_1-配置路由-4"><a href="#_1-配置路由-4" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/add-article'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'addArticle'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Recommend/Create.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'新增文章'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-绘制页面"><a href="#_2-绘制页面" class="header-anchor">#</a> 2，绘制页面</h3> <p>src\views\Recommend\Create.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> addArticle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/recommend'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showSuccessToast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>
<span class="token comment">// 标题</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 描述</span>
<span class="token keyword">const</span> desc <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 图片url</span>
<span class="token keyword">const</span> pic_url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 详情</span>
<span class="token keyword">const</span> detail <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 进度条</span>
<span class="token keyword">const</span> adding <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 提交事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">form</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开始加载</span>
    adding<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 发起请求</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">addArticle</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 加载完成</span>
    adding<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置输入框</span>
    title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    pic_url<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    detail<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">showSuccessToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'新增成功'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
    <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span>
    <span class="token attr-name">fixed</span>
    <span class="token attr-name">left-arrow</span>
    <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token attr-name">inset</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标题<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>文章标题<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写文章标题<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>描述<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>文章描述<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写文章描述<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic_url<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic_url<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>图片<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入图片地址<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写图片地址<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>文章内容<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">autosize</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入文章内容<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2000<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">show-word-limit</span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写文章内容<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label-align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 16px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
        <span class="token attr-name">round</span>
        <span class="token attr-name">block</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>adding<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        提交
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-form</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306144726515.626f9ecb.png" alt="image-20230306144726515"></p> <h2 id="十八-我的页面"><a href="#十八-我的页面" class="header-anchor">#</a> 十八，我的页面</h2> <p>src\views\User\index.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> logout<span class="token punctuation">,</span> getUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken<span class="token punctuation">,</span> removeToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/user'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resetLogin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/userCache'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> getAvatar <span class="token keyword">from</span> <span class="token string">'@/utils/avatar'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lastLoginUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/userCache'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取上次登录的信息</span>
<span class="token keyword">const</span> currentUser <span class="token operator">=</span> <span class="token function">lastLoginUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 设置上次登录的信息</span>
    userStore<span class="token punctuation">.</span><span class="token function">setInfo</span><span class="token punctuation">(</span>currentUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    isLogin<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 重新请求数据验证token是否过期或用户验证修改</span>
    <span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span>currentUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 没有token就重置</span>
    userStore<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">toUserInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 去往用户详情页面</span>
  router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user-info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 退出登录</span>
<span class="token keyword">const</span> <span class="token function-variable function">logOut</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 清除token</span>
    <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置上次登录</span>
    <span class="token function">resetLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 刷新页面</span>
    router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-card</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_card<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:thumb</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userStore.avatar ? userStore.avatar : getAvatar()<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toUserInfo<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ userStore.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#tags</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_sign<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ userStore.sign }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span>
        <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#desc</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_sex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ userStore.sex ? '男' : '女' }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-card</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span>
        <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logistics<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我的收货地址<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">is-link</span>
        <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/address-list<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我的订单<span class="token punctuation">&quot;</span></span> <span class="token attr-name">is-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/order<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>star-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我的收藏<span class="token punctuation">&quot;</span></span> <span class="token attr-name">is-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/my-collection<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>good-job-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我的点赞<span class="token punctuation">&quot;</span></span> <span class="token attr-name">is-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/thumbs-up<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout_box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
          <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout_btn<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logOut<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span>
        <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no_login_content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumbnail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>未登录<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login_btn<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>router.push(<span class="token punctuation">'</span>/login<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span>
        <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-empty</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">main.container</span> <span class="token punctuation">{</span>
  <span class="token selector">.user_card</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token selector">.user_name</span> <span class="token punctuation">{</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.user_sex</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 6px 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token selector">.logout_box</span> <span class="token punctuation">{</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token selector">.logout_btn</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.no_login_content</span> <span class="token punctuation">{</span>
    <span class="token selector">.login_btn</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306151339090.4b28a00c.png" alt="image-20230306151339090"></p> <h2 id="十九-个人信息页面"><a href="#十九-个人信息页面" class="header-anchor">#</a> 十九，个人信息页面</h2> <h3 id="_1-配置路由-5"><a href="#_1-配置路由-5" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
     <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user-info'</span><span class="token punctuation">,</span>
     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'userInfo'</span><span class="token punctuation">,</span>
     <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/Info.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'个人信息'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-绘制页面-2"><a href="#_2-绘制页面-2" class="header-anchor">#</a> 2，绘制页面</h3> <p>src\views\User\Info.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>修改密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">is-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/edit-pwd<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token selector">.edit_box</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token selector">.edit_btn</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="二十-修改密码"><a href="#二十-修改密码" class="header-anchor">#</a> 二十，修改密码</h2> <h3 id="_1-配置路由-6"><a href="#_1-配置路由-6" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/edit-pwd'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'editPwd'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/EditPwd.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'修改密码'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-绘制页面-3"><a href="#_2-绘制页面-3" class="header-anchor">#</a> 2，绘制页面</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resetPwd <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showSuccessToast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>

<span class="token comment">// 注册时密保</span>
<span class="token keyword">const</span> secretAnswer <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 密码</span>
<span class="token keyword">const</span> pwd <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加载状态</span>
<span class="token keyword">const</span> editing <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 提交事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> secret_answer<span class="token punctuation">,</span> password <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 打开加载状态</span>
  editing<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 修改密码请求</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">resetPwd</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> secret_answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">showSuccessToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'修改成功'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 关闭加载状态</span>
  editing<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span>
      <span class="token attr-name">fixed</span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token attr-name">inset</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>secretAnswer<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>secret_answer<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密保<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密保<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: <span class="token punctuation">'</span>请填写密保<span class="token punctuation">'</span> }]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
            <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新密码<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
              { required: true, message: <span class="token punctuation">'</span>请填写密码<span class="token punctuation">'</span> },
              {
                pattern: /^[-_a-zA-Z0-9]{6,16}$/,
                message: <span class="token punctuation">'</span>只能包含6-16位字母数字下划线减号<span class="token punctuation">'</span>,
              },
            ]<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 16px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
            <span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editing<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">round</span>
            <span class="token attr-name">block</span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>
            提交
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306153219305.ad5be72d.png" alt="image-20230306153219305"></p> <h2 id="二十一-我的收藏"><a href="#二十一-我的收藏" class="header-anchor">#</a> 二十一，我的收藏</h2> <h3 id="_1-配置路由-7"><a href="#_1-配置路由-7" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/my-collection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'myCollection'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/Collection.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的收藏'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-配置状态"><a href="#_2-配置状态" class="header-anchor">#</a> 2，配置状态</h3> <p>记录标签缓存</p> <p>src\stores\collection.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">,</span>
    computed
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    defineStore
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCollectionStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'collection'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> active <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeActive</span> <span class="token operator">=</span> <span class="token parameter">status</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        active<span class="token punctuation">.</span>value <span class="token operator">=</span> status<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        active<span class="token punctuation">,</span>
        changeActive
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-绘制页面-3"><a href="#_3-绘制页面-3" class="header-anchor">#</a> 3，绘制页面</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> onBeforeUnmount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCollectionList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/collection'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ArticleList <span class="token keyword">from</span> <span class="token string">'@/components/ArticleList.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCollectionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/collection'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> collectionStore <span class="token operator">=</span> <span class="token function">useCollectionStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> active <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>collectionStore<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stopActiveWatch <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>active<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  collectionStore<span class="token punctuation">.</span><span class="token function">changeActive</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 卸载之前停止监听</span>
<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">stopActiveWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">getCollectListByType</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCollectionList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>active<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> dataList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
    <span class="token comment">// 格式化数据</span>
    res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list <span class="token operator">=</span> dataList<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>item<span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> item<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>price <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pic_url</span><span class="token operator">:</span> item<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>picUrl<span class="token punctuation">,</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>object_id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> dataList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
  <span class="token comment">// 格式化数据</span>
  res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list <span class="token operator">=</span> dataList
    <span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>item<span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>desc<span class="token punctuation">,</span>
      <span class="token literal-property property">pic_url</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>picUrl<span class="token punctuation">,</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>object_id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 改变tab时触发</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeType</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 重新获取数据</span>
  <span class="token keyword">await</span> <span class="token function">getCollectionList</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> active<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 点击时重新获取数据</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">changeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 点击时重新获取数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">onClickTab</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">type</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">changeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
    <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span>
    <span class="token attr-name">fixed</span>
    <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">left-arrow</span>
  <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span>
    <span class="token attr-name"><span class="token namespace">v-model:</span>active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickTab<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>46<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">sticky</span>
    <span class="token attr-name">swipeable</span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>商品<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArticleList</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:api-fn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getCollectListByType<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:params</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ type: 1, page: 1, limit: 10 }<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>文章<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArticleList</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:api-fn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getCollectListByType<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:params</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ type: 2, page: 1, limit: 10 }<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.item-container</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px 10px 0px 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br></div></div><p>效果如下</p> <p><img src="/feblog/assets/img/image-20230306160439069.55d1f32e.png" alt="image-20230306160439069"></p> <p>只要不刷新页面，每次进入当前页面就会记忆退出时的页面</p> <h2 id="二十二-我的点赞页面"><a href="#二十二-我的点赞页面" class="header-anchor">#</a> 二十二，我的点赞页面</h2> <h3 id="_1-配置路由-8"><a href="#_1-配置路由-8" class="header-anchor">#</a> 1，配置路由</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/thumbs-up'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ThumbsUp'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/User/ThumbsUp.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的点赞'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">login</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-绘制页面-4"><a href="#_2-绘制页面-4" class="header-anchor">#</a> 2，绘制页面</h3> <p>src\views\User\ThumbsUp.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCattleByType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/cattle'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ArticleList <span class="token keyword">from</span> <span class="token string">'@/components/ArticleList.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token comment">// 数据</span>
<span class="token keyword">const</span> dataList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">getCattleListByType</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">params</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCattleByType</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dataList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
  <span class="token comment">// 格式化数据</span>
  res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list <span class="token operator">=</span> dataList
    <span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>item<span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>desc<span class="token punctuation">,</span>
      <span class="token literal-property property">pic_url</span><span class="token operator">:</span> item<span class="token punctuation">.</span>article<span class="token punctuation">.</span>picUrl<span class="token punctuation">,</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>object_id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取数据</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCattleByType</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dataList<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
    <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.title<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span>
    <span class="token attr-name">fixed</span>
    <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">left-arrow</span>
  <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArticleList</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:api-fn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getCattleListByType<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:params</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ type: 2, page: 1, limit: 20 }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px 10px 0px 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/24/2023, 8:24:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/feblog/Framework/vue3/10.html" class="prev">
            10-TypeScript精讲
          </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#一-项目准备工作" class="sidebar-link reco-side-一-项目准备工作" data-v-cb1513f6>一，项目准备工作</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建项目" class="sidebar-link reco-side-_1-创建项目" data-v-cb1513f6>1，创建项目</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-配置vant" class="sidebar-link reco-side-_2-配置vant" data-v-cb1513f6>2，配置vant</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-配置scss" class="sidebar-link reco-side-_3-配置scss" data-v-cb1513f6>3，配置scss</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-配置rem移动端适配" class="sidebar-link reco-side-_4-配置rem移动端适配" data-v-cb1513f6>4，配置rem移动端适配</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-配置全局样式" class="sidebar-link reco-side-_5-配置全局样式" data-v-cb1513f6>5，配置全局样式</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-配置jsconfig" class="sidebar-link reco-side-_6-配置jsconfig" data-v-cb1513f6>6，配置jsconfig</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#二-创建基本组件并配置路由" class="sidebar-link reco-side-二-创建基本组件并配置路由" data-v-cb1513f6>二，创建基本组件并配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建基本组件并配置路由" class="sidebar-link reco-side-_1-创建基本组件并配置路由" data-v-cb1513f6>1，创建基本组件并配置路由</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#三-首页面绘制" class="sidebar-link reco-side-三-首页面绘制" data-v-cb1513f6>三，首页面绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置axios" class="sidebar-link reco-side-_1-配置axios" data-v-cb1513f6>1，配置axios</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-配置api接口" class="sidebar-link reco-side-_2-配置api接口" data-v-cb1513f6>2，配置api接口</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-绘制轮播图数据" class="sidebar-link reco-side-_3-绘制轮播图数据" data-v-cb1513f6>3，绘制轮播图数据</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-渲染首页面中的商品列表" class="sidebar-link reco-side-_4-渲染首页面中的商品列表" data-v-cb1513f6>4，渲染首页面中的商品列表</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#四-登录注册" class="sidebar-link reco-side-四-登录注册" data-v-cb1513f6>四，登录注册</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由" class="sidebar-link reco-side-_1-配置路由" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-api接口封装" class="sidebar-link reco-side-_2-api接口封装" data-v-cb1513f6>2，api接口封装</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-默认头像实现" class="sidebar-link reco-side-_4-默认头像实现" data-v-cb1513f6>4，默认头像实现</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-登录表单绘制" class="sidebar-link reco-side-_5-登录表单绘制" data-v-cb1513f6>5，登录表单绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-表单提交事件" class="sidebar-link reco-side-_6-表单提交事件" data-v-cb1513f6>6，表单提交事件</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_7-注册" class="sidebar-link reco-side-_7-注册" data-v-cb1513f6>7，注册</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_8-处理注册" class="sidebar-link reco-side-_8-处理注册" data-v-cb1513f6>8，处理注册</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#五-完善登录流程" class="sidebar-link reco-side-五-完善登录流程" data-v-cb1513f6>五，完善登录流程</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-分析需求" class="sidebar-link reco-side-_1-分析需求" data-v-cb1513f6>1，分析需求</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-用户信息存储到仓库中" class="sidebar-link reco-side-_2-用户信息存储到仓库中" data-v-cb1513f6>2，用户信息存储到仓库中</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-封装操作token的工具函数" class="sidebar-link reco-side-_2-封装操作token的工具函数" data-v-cb1513f6>2，封装操作token的工具函数</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-封装用户信息存储到本地工具函数" class="sidebar-link reco-side-_3-封装用户信息存储到本地工具函数" data-v-cb1513f6>3，封装用户信息存储到本地工具函数</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-完善登录细节-把状态存储到pinia中" class="sidebar-link reco-side-_4-完善登录细节-把状态存储到pinia中" data-v-cb1513f6>4，完善登录细节（把状态存储到pinia中）</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-已登录的头像回显" class="sidebar-link reco-side-_5-已登录的头像回显" data-v-cb1513f6>5，已登录的头像回显</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-导航标题动态变换" class="sidebar-link reco-side-_6-导航标题动态变换" data-v-cb1513f6>6，导航标题动态变换</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#六-axios二次封装" class="sidebar-link reco-side-六-axios二次封装" data-v-cb1513f6>六，axios二次封装</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-请求拦截器" class="sidebar-link reco-side-_1-请求拦截器" data-v-cb1513f6>1，请求拦截器</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#七-路由前置守卫配置" class="sidebar-link reco-side-七-路由前置守卫配置" data-v-cb1513f6>七，路由前置守卫配置</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#八-商品详情页" class="sidebar-link reco-side-八-商品详情页" data-v-cb1513f6>八，商品详情页</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建商品详情组件并配置路由" class="sidebar-link reco-side-_1-创建商品详情组件并配置路由" data-v-cb1513f6>1，创建商品详情组件并配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-api接口配置" class="sidebar-link reco-side-_2-api接口配置" data-v-cb1513f6>2，api接口配置</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-绘制页面" class="sidebar-link reco-side-_3-绘制页面" data-v-cb1513f6>3，绘制页面</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-购物车逻辑实现" class="sidebar-link reco-side-_3-购物车逻辑实现" data-v-cb1513f6>3，购物车逻辑实现</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-收藏实现" class="sidebar-link reco-side-_4-收藏实现" data-v-cb1513f6>4，收藏实现</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-购买实现" class="sidebar-link reco-side-_5-购买实现" data-v-cb1513f6>5，购买实现</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#九-地址管理页" class="sidebar-link reco-side-九-地址管理页" data-v-cb1513f6>九，地址管理页</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-2" class="sidebar-link reco-side-_1-配置路由-2" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-api接口配置-2" class="sidebar-link reco-side-_2-api接口配置-2" data-v-cb1513f6>2，api接口配置</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-绘制页面-2" class="sidebar-link reco-side-_3-绘制页面-2" data-v-cb1513f6>3，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十-地址修改页" class="sidebar-link reco-side-十-地址修改页" data-v-cb1513f6>十，地址修改页</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建组件-配置路由" class="sidebar-link reco-side-_1-创建组件-配置路由" data-v-cb1513f6>1，创建组件，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-页面绘制" class="sidebar-link reco-side-_2-页面绘制" data-v-cb1513f6>2，页面绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-实现新增逻辑" class="sidebar-link reco-side-_3-实现新增逻辑" data-v-cb1513f6>3，实现新增逻辑</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-地址编辑功能" class="sidebar-link reco-side-_4-地址编辑功能" data-v-cb1513f6>4，地址编辑功能</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-地址的删除功能" class="sidebar-link reco-side-_5-地址的删除功能" data-v-cb1513f6>5，地址的删除功能</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十一-订单数据的传递" class="sidebar-link reco-side-十一-订单数据的传递" data-v-cb1513f6>十一，订单数据的传递</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-分析流程" class="sidebar-link reco-side-_1-分析流程" data-v-cb1513f6>1，分析流程</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-订单数据传递" class="sidebar-link reco-side-_1-订单数据传递" data-v-cb1513f6>1，订单数据传递</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-地址选中" class="sidebar-link reco-side-_2-地址选中" data-v-cb1513f6>2，地址选中</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十二-订单生成页" class="sidebar-link reco-side-十二-订单生成页" data-v-cb1513f6>十二，订单生成页</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建组件并配置路由" class="sidebar-link reco-side-_1-创建组件并配置路由" data-v-cb1513f6>1，创建组件并配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-配置api" class="sidebar-link reco-side-_2-配置api" data-v-cb1513f6>2，配置api</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-标题绘制" class="sidebar-link reco-side-_3-标题绘制" data-v-cb1513f6>3，标题绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-接收路由参数" class="sidebar-link reco-side-_4-接收路由参数" data-v-cb1513f6>4，接收路由参数</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-地址展示和商品信息展示" class="sidebar-link reco-side-_5-地址展示和商品信息展示" data-v-cb1513f6>5，地址展示和商品信息展示</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-绘制-提交订单-和-备注" class="sidebar-link reco-side-_6-绘制-提交订单-和-备注" data-v-cb1513f6>6，绘制 提交订单 和 备注</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_7-绘制支付弹出框" class="sidebar-link reco-side-_7-绘制支付弹出框" data-v-cb1513f6>7，绘制支付弹出框</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_8-支付逻辑实现" class="sidebar-link reco-side-_8-支付逻辑实现" data-v-cb1513f6>8，支付逻辑实现</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_9-支付框关闭事件" class="sidebar-link reco-side-_9-支付框关闭事件" data-v-cb1513f6>9，支付框关闭事件</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十三-订单查看页" class="sidebar-link reco-side-十三-订单查看页" data-v-cb1513f6>十三，订单查看页</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-创建组件并配置路由-2" class="sidebar-link reco-side-_1-创建组件并配置路由-2" data-v-cb1513f6>1，创建组件并配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-标题绘制" class="sidebar-link reco-side-_2-标题绘制" data-v-cb1513f6>2，标题绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-tab导航" class="sidebar-link reco-side-_3-tab导航" data-v-cb1513f6>3，tab导航</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-封装orderlist组件" class="sidebar-link reco-side-_4-封装orderlist组件" data-v-cb1513f6>4，封装OrderList组件</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#" class="sidebar-link reco-side-" data-v-cb1513f6></a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-改变tab时变更数据" class="sidebar-link reco-side-_6-改变tab时变更数据" data-v-cb1513f6>6，改变tab时变更数据</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十四-购物车页面" class="sidebar-link reco-side-十四-购物车页面" data-v-cb1513f6>十四，购物车页面</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-标题显示" class="sidebar-link reco-side-_1-标题显示" data-v-cb1513f6>1，标题显示</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-未登陆时显示" class="sidebar-link reco-side-_2-未登陆时显示" data-v-cb1513f6>2，未登陆时显示</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-商品列表" class="sidebar-link reco-side-_3-商品列表" data-v-cb1513f6>3，商品列表</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-动作栏" class="sidebar-link reco-side-_4-动作栏" data-v-cb1513f6>4，动作栏</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-全选状态" class="sidebar-link reco-side-_5-全选状态" data-v-cb1513f6>5，全选状态</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-总价" class="sidebar-link reco-side-_6-总价" data-v-cb1513f6>6，总价</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_7-更改数量" class="sidebar-link reco-side-_7-更改数量" data-v-cb1513f6>7，更改数量</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_8-删除商品" class="sidebar-link reco-side-_8-删除商品" data-v-cb1513f6>8，删除商品</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_9-提交订单事件" class="sidebar-link reco-side-_9-提交订单事件" data-v-cb1513f6>9，提交订单事件</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十五-种草页面" class="sidebar-link reco-side-十五-种草页面" data-v-cb1513f6>十五，种草页面</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-标题" class="sidebar-link reco-side-_1-标题" data-v-cb1513f6>1，标题</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-api配置" class="sidebar-link reco-side-_2-api配置" data-v-cb1513f6>2，api配置</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-封装上滑加载函数" class="sidebar-link reco-side-_3-封装上滑加载函数" data-v-cb1513f6>3，封装上滑加载函数</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-封装articlelist组件" class="sidebar-link reco-side-_4-封装articlelist组件" data-v-cb1513f6>4，封装ArticleList组件</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-绘制页面" class="sidebar-link reco-side-_5-绘制页面" data-v-cb1513f6>5，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十六-文章详情" class="sidebar-link reco-side-十六-文章详情" data-v-cb1513f6>十六，文章详情</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-3" class="sidebar-link reco-side-_1-配置路由-3" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-api接口配置-3" class="sidebar-link reco-side-_2-api接口配置-3" data-v-cb1513f6>2，api接口配置</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-标题" class="sidebar-link reco-side-_3-标题" data-v-cb1513f6>3，标题</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_4-内容绘制" class="sidebar-link reco-side-_4-内容绘制" data-v-cb1513f6>4，内容绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_5-评论绘制" class="sidebar-link reco-side-_5-评论绘制" data-v-cb1513f6>5，评论绘制</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_6-动作栏" class="sidebar-link reco-side-_6-动作栏" data-v-cb1513f6>6，动作栏</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_7-弹出框" class="sidebar-link reco-side-_7-弹出框" data-v-cb1513f6>7，弹出框</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_8-点赞逻辑" class="sidebar-link reco-side-_8-点赞逻辑" data-v-cb1513f6>8，点赞逻辑</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_9-收藏逻辑" class="sidebar-link reco-side-_9-收藏逻辑" data-v-cb1513f6>9，收藏逻辑</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_10-新增评论" class="sidebar-link reco-side-_10-新增评论" data-v-cb1513f6>10，新增评论</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#参考代码" class="sidebar-link reco-side-参考代码" data-v-cb1513f6>参考代码</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十七-新增文章" class="sidebar-link reco-side-十七-新增文章" data-v-cb1513f6>十七，新增文章</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-4" class="sidebar-link reco-side-_1-配置路由-4" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-绘制页面" class="sidebar-link reco-side-_2-绘制页面" data-v-cb1513f6>2，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十八-我的页面" class="sidebar-link reco-side-十八-我的页面" data-v-cb1513f6>十八，我的页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#十九-个人信息页面" class="sidebar-link reco-side-十九-个人信息页面" data-v-cb1513f6>十九，个人信息页面</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-5" class="sidebar-link reco-side-_1-配置路由-5" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-绘制页面-2" class="sidebar-link reco-side-_2-绘制页面-2" data-v-cb1513f6>2，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#二十-修改密码" class="sidebar-link reco-side-二十-修改密码" data-v-cb1513f6>二十，修改密码</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-6" class="sidebar-link reco-side-_1-配置路由-6" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-绘制页面-3" class="sidebar-link reco-side-_2-绘制页面-3" data-v-cb1513f6>2，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#二十一-我的收藏" class="sidebar-link reco-side-二十一-我的收藏" data-v-cb1513f6>二十一，我的收藏</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-7" class="sidebar-link reco-side-_1-配置路由-7" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-配置状态" class="sidebar-link reco-side-_2-配置状态" data-v-cb1513f6>2，配置状态</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_3-绘制页面-3" class="sidebar-link reco-side-_3-绘制页面-3" data-v-cb1513f6>3，绘制页面</a></li><li class="level-2" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#二十二-我的点赞页面" class="sidebar-link reco-side-二十二-我的点赞页面" data-v-cb1513f6>二十二，我的点赞页面</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_1-配置路由-8" class="sidebar-link reco-side-_1-配置路由-8" data-v-cb1513f6>1，配置路由</a></li><li class="level-3" data-v-cb1513f6><a href="/feblog/Framework/vue3/11.html#_2-绘制页面-4" class="sidebar-link reco-side-_2-绘制页面-4" data-v-cb1513f6>2，绘制页面</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/feblog/assets/js/app.51e0e5f0.js" defer></script><script src="/feblog/assets/js/28.9ddac576.js" defer></script><script src="/feblog/assets/js/1.485e4e25.js" defer></script><script src="/feblog/assets/js/7.c2cd89b4.js" defer></script>
  </body>
</html>
