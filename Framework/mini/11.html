<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>11-云开发实战 | 码路教育</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/malulesson/public/favicon.ico">
    <meta name="description" content="码路大前端课程">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/malulesson/public/assets/css/0.styles.f7004d92.css" as="style"><link rel="preload" href="/malulesson/public/assets/js/app.387489e1.js" as="script"><link rel="preload" href="/malulesson/public/assets/js/28.9ddac576.js" as="script"><link rel="preload" href="/malulesson/public/assets/js/1.485e4e25.js" as="script"><link rel="preload" href="/malulesson/public/assets/js/9.9fd67356.js" as="script"><link rel="prefetch" href="/malulesson/public/assets/js/10.9116dc1b.js"><link rel="prefetch" href="/malulesson/public/assets/js/100.b74c3c70.js"><link rel="prefetch" href="/malulesson/public/assets/js/101.bf024737.js"><link rel="prefetch" href="/malulesson/public/assets/js/102.a910791a.js"><link rel="prefetch" href="/malulesson/public/assets/js/103.00e6ee51.js"><link rel="prefetch" href="/malulesson/public/assets/js/104.81e4910c.js"><link rel="prefetch" href="/malulesson/public/assets/js/105.bec3331a.js"><link rel="prefetch" href="/malulesson/public/assets/js/106.961f46b5.js"><link rel="prefetch" href="/malulesson/public/assets/js/107.c1f195b2.js"><link rel="prefetch" href="/malulesson/public/assets/js/108.d3f932df.js"><link rel="prefetch" href="/malulesson/public/assets/js/109.d549dbce.js"><link rel="prefetch" href="/malulesson/public/assets/js/11.b58bd17e.js"><link rel="prefetch" href="/malulesson/public/assets/js/110.a94f2151.js"><link rel="prefetch" href="/malulesson/public/assets/js/111.0cf8d665.js"><link rel="prefetch" href="/malulesson/public/assets/js/112.ee752858.js"><link rel="prefetch" href="/malulesson/public/assets/js/113.35e8087f.js"><link rel="prefetch" href="/malulesson/public/assets/js/114.e836902e.js"><link rel="prefetch" href="/malulesson/public/assets/js/115.4216743e.js"><link rel="prefetch" href="/malulesson/public/assets/js/116.9cd63eb9.js"><link rel="prefetch" href="/malulesson/public/assets/js/117.e857dca4.js"><link rel="prefetch" href="/malulesson/public/assets/js/118.41e6ac5a.js"><link rel="prefetch" href="/malulesson/public/assets/js/119.a367b38a.js"><link rel="prefetch" href="/malulesson/public/assets/js/12.91ade50d.js"><link rel="prefetch" href="/malulesson/public/assets/js/120.ca0e8c42.js"><link rel="prefetch" href="/malulesson/public/assets/js/121.528e85b1.js"><link rel="prefetch" href="/malulesson/public/assets/js/122.ff82c0e9.js"><link rel="prefetch" href="/malulesson/public/assets/js/123.b250505a.js"><link rel="prefetch" href="/malulesson/public/assets/js/124.2d8dae89.js"><link rel="prefetch" href="/malulesson/public/assets/js/125.91c74a3e.js"><link rel="prefetch" href="/malulesson/public/assets/js/126.c4c7dc23.js"><link rel="prefetch" href="/malulesson/public/assets/js/127.6165e139.js"><link rel="prefetch" href="/malulesson/public/assets/js/128.88eef252.js"><link rel="prefetch" href="/malulesson/public/assets/js/129.ee21198b.js"><link rel="prefetch" href="/malulesson/public/assets/js/13.4e5681f2.js"><link rel="prefetch" href="/malulesson/public/assets/js/130.84516c29.js"><link rel="prefetch" href="/malulesson/public/assets/js/131.2e6a4281.js"><link rel="prefetch" href="/malulesson/public/assets/js/132.c21d0172.js"><link rel="prefetch" href="/malulesson/public/assets/js/133.039eca64.js"><link rel="prefetch" href="/malulesson/public/assets/js/134.90b6a75d.js"><link rel="prefetch" href="/malulesson/public/assets/js/135.df4d1747.js"><link rel="prefetch" href="/malulesson/public/assets/js/136.396f531c.js"><link rel="prefetch" href="/malulesson/public/assets/js/137.5491f037.js"><link rel="prefetch" href="/malulesson/public/assets/js/138.b4049750.js"><link rel="prefetch" href="/malulesson/public/assets/js/139.dbaeae21.js"><link rel="prefetch" href="/malulesson/public/assets/js/14.f7806c84.js"><link rel="prefetch" href="/malulesson/public/assets/js/140.45cee851.js"><link rel="prefetch" href="/malulesson/public/assets/js/141.74056cf8.js"><link rel="prefetch" href="/malulesson/public/assets/js/142.6987ff38.js"><link rel="prefetch" href="/malulesson/public/assets/js/143.a468c7a6.js"><link rel="prefetch" href="/malulesson/public/assets/js/144.5d9c65d7.js"><link rel="prefetch" href="/malulesson/public/assets/js/145.10d3000a.js"><link rel="prefetch" href="/malulesson/public/assets/js/146.d684ac18.js"><link rel="prefetch" href="/malulesson/public/assets/js/147.8a2bd460.js"><link rel="prefetch" href="/malulesson/public/assets/js/148.16ca7a7e.js"><link rel="prefetch" href="/malulesson/public/assets/js/149.ff2b10f6.js"><link rel="prefetch" href="/malulesson/public/assets/js/15.c4f75352.js"><link rel="prefetch" href="/malulesson/public/assets/js/150.1c6c5f4d.js"><link rel="prefetch" href="/malulesson/public/assets/js/151.02d619d5.js"><link rel="prefetch" href="/malulesson/public/assets/js/152.f71ff260.js"><link rel="prefetch" href="/malulesson/public/assets/js/153.3cf5183f.js"><link rel="prefetch" href="/malulesson/public/assets/js/154.4ecf37ec.js"><link rel="prefetch" href="/malulesson/public/assets/js/155.9915c1ce.js"><link rel="prefetch" href="/malulesson/public/assets/js/156.640b4e3a.js"><link rel="prefetch" href="/malulesson/public/assets/js/157.cad70230.js"><link rel="prefetch" href="/malulesson/public/assets/js/158.16c0f91b.js"><link rel="prefetch" href="/malulesson/public/assets/js/159.6ce1bd5f.js"><link rel="prefetch" href="/malulesson/public/assets/js/16.c3028020.js"><link rel="prefetch" href="/malulesson/public/assets/js/160.7751c5b0.js"><link rel="prefetch" href="/malulesson/public/assets/js/161.e94f93de.js"><link rel="prefetch" href="/malulesson/public/assets/js/162.d6301f2d.js"><link rel="prefetch" href="/malulesson/public/assets/js/163.d6116ef4.js"><link rel="prefetch" href="/malulesson/public/assets/js/164.04e65ed1.js"><link rel="prefetch" href="/malulesson/public/assets/js/165.248e054d.js"><link rel="prefetch" href="/malulesson/public/assets/js/166.d0aa834b.js"><link rel="prefetch" href="/malulesson/public/assets/js/167.72daced8.js"><link rel="prefetch" href="/malulesson/public/assets/js/168.ed85cb24.js"><link rel="prefetch" href="/malulesson/public/assets/js/169.ddf7bebc.js"><link rel="prefetch" href="/malulesson/public/assets/js/17.80340daa.js"><link rel="prefetch" href="/malulesson/public/assets/js/170.2b19d82b.js"><link rel="prefetch" href="/malulesson/public/assets/js/171.f7b80581.js"><link rel="prefetch" href="/malulesson/public/assets/js/172.c5720050.js"><link rel="prefetch" href="/malulesson/public/assets/js/173.fe35c315.js"><link rel="prefetch" href="/malulesson/public/assets/js/174.cb809559.js"><link rel="prefetch" href="/malulesson/public/assets/js/175.94be778e.js"><link rel="prefetch" href="/malulesson/public/assets/js/176.6665c996.js"><link rel="prefetch" href="/malulesson/public/assets/js/177.6a0c0a66.js"><link rel="prefetch" href="/malulesson/public/assets/js/178.3bcddc22.js"><link rel="prefetch" href="/malulesson/public/assets/js/179.fb526402.js"><link rel="prefetch" href="/malulesson/public/assets/js/18.d11b998a.js"><link rel="prefetch" href="/malulesson/public/assets/js/180.ba8ec909.js"><link rel="prefetch" href="/malulesson/public/assets/js/181.f26a1c1a.js"><link rel="prefetch" href="/malulesson/public/assets/js/182.23ac5733.js"><link rel="prefetch" href="/malulesson/public/assets/js/183.57d7b334.js"><link rel="prefetch" href="/malulesson/public/assets/js/184.2088ee41.js"><link rel="prefetch" href="/malulesson/public/assets/js/185.b0fbea3c.js"><link rel="prefetch" href="/malulesson/public/assets/js/186.7c452bd9.js"><link rel="prefetch" href="/malulesson/public/assets/js/187.647ec12a.js"><link rel="prefetch" href="/malulesson/public/assets/js/188.b17b6c69.js"><link rel="prefetch" href="/malulesson/public/assets/js/189.2a0e25b6.js"><link rel="prefetch" href="/malulesson/public/assets/js/19.3cd8ea0c.js"><link rel="prefetch" href="/malulesson/public/assets/js/190.d4df43b0.js"><link rel="prefetch" href="/malulesson/public/assets/js/191.4f4486db.js"><link rel="prefetch" href="/malulesson/public/assets/js/192.5f01e3b6.js"><link rel="prefetch" href="/malulesson/public/assets/js/193.908ec83e.js"><link rel="prefetch" href="/malulesson/public/assets/js/194.3ab7b3c2.js"><link rel="prefetch" href="/malulesson/public/assets/js/195.5aa14e68.js"><link rel="prefetch" href="/malulesson/public/assets/js/196.9803903b.js"><link rel="prefetch" href="/malulesson/public/assets/js/197.67b4b2f9.js"><link rel="prefetch" href="/malulesson/public/assets/js/198.9d0996bb.js"><link rel="prefetch" href="/malulesson/public/assets/js/199.7fb47f8a.js"><link rel="prefetch" href="/malulesson/public/assets/js/20.9f34eccf.js"><link rel="prefetch" href="/malulesson/public/assets/js/200.c14d4875.js"><link rel="prefetch" href="/malulesson/public/assets/js/201.115111de.js"><link rel="prefetch" href="/malulesson/public/assets/js/202.dccb2742.js"><link rel="prefetch" href="/malulesson/public/assets/js/203.99573a14.js"><link rel="prefetch" href="/malulesson/public/assets/js/204.430c3440.js"><link rel="prefetch" href="/malulesson/public/assets/js/205.2d5c1d5b.js"><link rel="prefetch" href="/malulesson/public/assets/js/206.5ebc102c.js"><link rel="prefetch" href="/malulesson/public/assets/js/207.8fbca6f4.js"><link rel="prefetch" href="/malulesson/public/assets/js/208.962601c0.js"><link rel="prefetch" href="/malulesson/public/assets/js/209.3b864b14.js"><link rel="prefetch" href="/malulesson/public/assets/js/21.22c3b625.js"><link rel="prefetch" href="/malulesson/public/assets/js/210.914d1f81.js"><link rel="prefetch" href="/malulesson/public/assets/js/211.7d150a65.js"><link rel="prefetch" href="/malulesson/public/assets/js/212.6f856a58.js"><link rel="prefetch" href="/malulesson/public/assets/js/213.1d7a2723.js"><link rel="prefetch" href="/malulesson/public/assets/js/214.2bef203f.js"><link rel="prefetch" href="/malulesson/public/assets/js/215.06ab0977.js"><link rel="prefetch" href="/malulesson/public/assets/js/216.3f2416b7.js"><link rel="prefetch" href="/malulesson/public/assets/js/217.68312547.js"><link rel="prefetch" href="/malulesson/public/assets/js/218.05216014.js"><link rel="prefetch" href="/malulesson/public/assets/js/219.b81e7e43.js"><link rel="prefetch" href="/malulesson/public/assets/js/22.1de6e243.js"><link rel="prefetch" href="/malulesson/public/assets/js/220.ef0cc0a4.js"><link rel="prefetch" href="/malulesson/public/assets/js/221.560534a9.js"><link rel="prefetch" href="/malulesson/public/assets/js/222.c6abb90e.js"><link rel="prefetch" href="/malulesson/public/assets/js/223.ac72f9dd.js"><link rel="prefetch" href="/malulesson/public/assets/js/224.6ec9afd3.js"><link rel="prefetch" href="/malulesson/public/assets/js/225.a2f8230f.js"><link rel="prefetch" href="/malulesson/public/assets/js/226.1db176d7.js"><link rel="prefetch" href="/malulesson/public/assets/js/227.eec81fbe.js"><link rel="prefetch" href="/malulesson/public/assets/js/228.27d90625.js"><link rel="prefetch" href="/malulesson/public/assets/js/229.9e4e819b.js"><link rel="prefetch" href="/malulesson/public/assets/js/23.f9026069.js"><link rel="prefetch" href="/malulesson/public/assets/js/230.0bace477.js"><link rel="prefetch" href="/malulesson/public/assets/js/231.02a359a5.js"><link rel="prefetch" href="/malulesson/public/assets/js/232.b3fb5379.js"><link rel="prefetch" href="/malulesson/public/assets/js/233.473578dd.js"><link rel="prefetch" href="/malulesson/public/assets/js/234.a9b51eea.js"><link rel="prefetch" href="/malulesson/public/assets/js/235.89334753.js"><link rel="prefetch" href="/malulesson/public/assets/js/236.a4de107b.js"><link rel="prefetch" href="/malulesson/public/assets/js/237.3072319d.js"><link rel="prefetch" href="/malulesson/public/assets/js/238.1396dbc1.js"><link rel="prefetch" href="/malulesson/public/assets/js/239.f633a6dd.js"><link rel="prefetch" href="/malulesson/public/assets/js/24.6cc3207c.js"><link rel="prefetch" href="/malulesson/public/assets/js/240.3eab6322.js"><link rel="prefetch" href="/malulesson/public/assets/js/241.48766ab1.js"><link rel="prefetch" href="/malulesson/public/assets/js/242.5a1d328a.js"><link rel="prefetch" href="/malulesson/public/assets/js/243.a8e6d193.js"><link rel="prefetch" href="/malulesson/public/assets/js/244.5dbf02a3.js"><link rel="prefetch" href="/malulesson/public/assets/js/245.2f8d1c8f.js"><link rel="prefetch" href="/malulesson/public/assets/js/246.e33a3900.js"><link rel="prefetch" href="/malulesson/public/assets/js/247.b3df0488.js"><link rel="prefetch" href="/malulesson/public/assets/js/248.6b0f026e.js"><link rel="prefetch" href="/malulesson/public/assets/js/249.a1690403.js"><link rel="prefetch" href="/malulesson/public/assets/js/25.00b1e5cd.js"><link rel="prefetch" href="/malulesson/public/assets/js/250.a174a14b.js"><link rel="prefetch" href="/malulesson/public/assets/js/251.712362d4.js"><link rel="prefetch" href="/malulesson/public/assets/js/252.7982bd43.js"><link rel="prefetch" href="/malulesson/public/assets/js/253.fee40892.js"><link rel="prefetch" href="/malulesson/public/assets/js/254.6fd0da63.js"><link rel="prefetch" href="/malulesson/public/assets/js/255.61531d6e.js"><link rel="prefetch" href="/malulesson/public/assets/js/256.a3824bcb.js"><link rel="prefetch" href="/malulesson/public/assets/js/257.52f9b5e1.js"><link rel="prefetch" href="/malulesson/public/assets/js/258.cfe279ca.js"><link rel="prefetch" href="/malulesson/public/assets/js/259.2916b5cd.js"><link rel="prefetch" href="/malulesson/public/assets/js/26.b1566b40.js"><link rel="prefetch" href="/malulesson/public/assets/js/260.8bff754f.js"><link rel="prefetch" href="/malulesson/public/assets/js/261.5055fb64.js"><link rel="prefetch" href="/malulesson/public/assets/js/262.fe86b927.js"><link rel="prefetch" href="/malulesson/public/assets/js/263.62be603f.js"><link rel="prefetch" href="/malulesson/public/assets/js/264.53707f27.js"><link rel="prefetch" href="/malulesson/public/assets/js/265.40956ae9.js"><link rel="prefetch" href="/malulesson/public/assets/js/266.3a7eae97.js"><link rel="prefetch" href="/malulesson/public/assets/js/267.0b13e01a.js"><link rel="prefetch" href="/malulesson/public/assets/js/268.c6ce0973.js"><link rel="prefetch" href="/malulesson/public/assets/js/269.dad7b2f1.js"><link rel="prefetch" href="/malulesson/public/assets/js/27.7435972f.js"><link rel="prefetch" href="/malulesson/public/assets/js/270.f0aef910.js"><link rel="prefetch" href="/malulesson/public/assets/js/271.c7da4eb9.js"><link rel="prefetch" href="/malulesson/public/assets/js/272.ec04bf05.js"><link rel="prefetch" href="/malulesson/public/assets/js/273.66e29ed7.js"><link rel="prefetch" href="/malulesson/public/assets/js/274.5f6adae0.js"><link rel="prefetch" href="/malulesson/public/assets/js/275.987e4fda.js"><link rel="prefetch" href="/malulesson/public/assets/js/276.dd17a318.js"><link rel="prefetch" href="/malulesson/public/assets/js/277.b38b2bb8.js"><link rel="prefetch" href="/malulesson/public/assets/js/278.63d7e66d.js"><link rel="prefetch" href="/malulesson/public/assets/js/279.dfe62224.js"><link rel="prefetch" href="/malulesson/public/assets/js/280.65ee9902.js"><link rel="prefetch" href="/malulesson/public/assets/js/281.ef9981bb.js"><link rel="prefetch" href="/malulesson/public/assets/js/282.4e8ee512.js"><link rel="prefetch" href="/malulesson/public/assets/js/283.96b2a5c2.js"><link rel="prefetch" href="/malulesson/public/assets/js/284.47e1ac26.js"><link rel="prefetch" href="/malulesson/public/assets/js/285.16a0b7d4.js"><link rel="prefetch" href="/malulesson/public/assets/js/286.ea41164d.js"><link rel="prefetch" href="/malulesson/public/assets/js/287.1ed8e157.js"><link rel="prefetch" href="/malulesson/public/assets/js/288.b40ad62f.js"><link rel="prefetch" href="/malulesson/public/assets/js/289.6c199e94.js"><link rel="prefetch" href="/malulesson/public/assets/js/29.10907ac5.js"><link rel="prefetch" href="/malulesson/public/assets/js/290.5bb69b6d.js"><link rel="prefetch" href="/malulesson/public/assets/js/291.48af0311.js"><link rel="prefetch" href="/malulesson/public/assets/js/292.7c870a7b.js"><link rel="prefetch" href="/malulesson/public/assets/js/293.69370660.js"><link rel="prefetch" href="/malulesson/public/assets/js/294.082e3eb3.js"><link rel="prefetch" href="/malulesson/public/assets/js/295.764c6828.js"><link rel="prefetch" href="/malulesson/public/assets/js/296.6fe27983.js"><link rel="prefetch" href="/malulesson/public/assets/js/297.c797501c.js"><link rel="prefetch" href="/malulesson/public/assets/js/298.2a3bcbaa.js"><link rel="prefetch" href="/malulesson/public/assets/js/299.a90b7828.js"><link rel="prefetch" href="/malulesson/public/assets/js/3.1c0ee48e.js"><link rel="prefetch" href="/malulesson/public/assets/js/30.47fa72bb.js"><link rel="prefetch" href="/malulesson/public/assets/js/300.efae64fe.js"><link rel="prefetch" href="/malulesson/public/assets/js/301.8b183f79.js"><link rel="prefetch" href="/malulesson/public/assets/js/302.2e9eb524.js"><link rel="prefetch" href="/malulesson/public/assets/js/303.33fb0ae3.js"><link rel="prefetch" href="/malulesson/public/assets/js/304.a1843a6b.js"><link rel="prefetch" href="/malulesson/public/assets/js/305.7a517f3a.js"><link rel="prefetch" href="/malulesson/public/assets/js/306.c3fcf567.js"><link rel="prefetch" href="/malulesson/public/assets/js/307.76103d8a.js"><link rel="prefetch" href="/malulesson/public/assets/js/308.d7a5892e.js"><link rel="prefetch" href="/malulesson/public/assets/js/309.aebe9a06.js"><link rel="prefetch" href="/malulesson/public/assets/js/31.cabb5a5c.js"><link rel="prefetch" href="/malulesson/public/assets/js/310.9334ccd8.js"><link rel="prefetch" href="/malulesson/public/assets/js/311.00144a36.js"><link rel="prefetch" href="/malulesson/public/assets/js/312.8338bbcb.js"><link rel="prefetch" href="/malulesson/public/assets/js/313.9ede8410.js"><link rel="prefetch" href="/malulesson/public/assets/js/314.fdabff9a.js"><link rel="prefetch" href="/malulesson/public/assets/js/315.759f72c9.js"><link rel="prefetch" href="/malulesson/public/assets/js/316.b1ba859f.js"><link rel="prefetch" href="/malulesson/public/assets/js/317.bc7aa1d7.js"><link rel="prefetch" href="/malulesson/public/assets/js/318.836ba345.js"><link rel="prefetch" href="/malulesson/public/assets/js/319.61fd8b9d.js"><link rel="prefetch" href="/malulesson/public/assets/js/32.3f74ee8f.js"><link rel="prefetch" href="/malulesson/public/assets/js/320.78ad46c6.js"><link rel="prefetch" href="/malulesson/public/assets/js/321.6ab14571.js"><link rel="prefetch" href="/malulesson/public/assets/js/322.1cb462e6.js"><link rel="prefetch" href="/malulesson/public/assets/js/323.04f8d899.js"><link rel="prefetch" href="/malulesson/public/assets/js/324.a1caba3e.js"><link rel="prefetch" href="/malulesson/public/assets/js/325.9bd1c29f.js"><link rel="prefetch" href="/malulesson/public/assets/js/326.e6558be6.js"><link rel="prefetch" href="/malulesson/public/assets/js/327.de188c89.js"><link rel="prefetch" href="/malulesson/public/assets/js/328.d28397ee.js"><link rel="prefetch" href="/malulesson/public/assets/js/329.3ddcd4cf.js"><link rel="prefetch" href="/malulesson/public/assets/js/33.ab04c039.js"><link rel="prefetch" href="/malulesson/public/assets/js/34.d877a83c.js"><link rel="prefetch" href="/malulesson/public/assets/js/35.faab017f.js"><link rel="prefetch" href="/malulesson/public/assets/js/36.56e563c0.js"><link rel="prefetch" href="/malulesson/public/assets/js/37.30a1f45c.js"><link rel="prefetch" href="/malulesson/public/assets/js/38.422f31a0.js"><link rel="prefetch" href="/malulesson/public/assets/js/39.acb4a3cb.js"><link rel="prefetch" href="/malulesson/public/assets/js/4.04212669.js"><link rel="prefetch" href="/malulesson/public/assets/js/40.b1062aee.js"><link rel="prefetch" href="/malulesson/public/assets/js/41.b9f89eb5.js"><link rel="prefetch" href="/malulesson/public/assets/js/42.09a3cf27.js"><link rel="prefetch" href="/malulesson/public/assets/js/43.6b1f0345.js"><link rel="prefetch" href="/malulesson/public/assets/js/44.15b8a250.js"><link rel="prefetch" href="/malulesson/public/assets/js/45.3fd67883.js"><link rel="prefetch" href="/malulesson/public/assets/js/46.56fe2a75.js"><link rel="prefetch" href="/malulesson/public/assets/js/47.cb0bb5e9.js"><link rel="prefetch" href="/malulesson/public/assets/js/48.e3512133.js"><link rel="prefetch" href="/malulesson/public/assets/js/49.37808f4c.js"><link rel="prefetch" href="/malulesson/public/assets/js/5.dff8d132.js"><link rel="prefetch" href="/malulesson/public/assets/js/50.f56f4e94.js"><link rel="prefetch" href="/malulesson/public/assets/js/51.80383b4f.js"><link rel="prefetch" href="/malulesson/public/assets/js/52.ef797d27.js"><link rel="prefetch" href="/malulesson/public/assets/js/53.43ae7b0e.js"><link rel="prefetch" href="/malulesson/public/assets/js/54.f99c3cb8.js"><link rel="prefetch" href="/malulesson/public/assets/js/55.d059ac53.js"><link rel="prefetch" href="/malulesson/public/assets/js/56.5c43f5bb.js"><link rel="prefetch" href="/malulesson/public/assets/js/57.c89778fb.js"><link rel="prefetch" href="/malulesson/public/assets/js/58.8cbb29fc.js"><link rel="prefetch" href="/malulesson/public/assets/js/59.c7f0a6f2.js"><link rel="prefetch" href="/malulesson/public/assets/js/6.4e831b27.js"><link rel="prefetch" href="/malulesson/public/assets/js/60.45f565af.js"><link rel="prefetch" href="/malulesson/public/assets/js/61.1de4d5fe.js"><link rel="prefetch" href="/malulesson/public/assets/js/62.4eda9078.js"><link rel="prefetch" href="/malulesson/public/assets/js/63.1ec9f7b4.js"><link rel="prefetch" href="/malulesson/public/assets/js/64.d75631a1.js"><link rel="prefetch" href="/malulesson/public/assets/js/65.aad3f0ec.js"><link rel="prefetch" href="/malulesson/public/assets/js/66.176a289d.js"><link rel="prefetch" href="/malulesson/public/assets/js/67.84b18143.js"><link rel="prefetch" href="/malulesson/public/assets/js/68.37fd0d03.js"><link rel="prefetch" href="/malulesson/public/assets/js/69.d47fafeb.js"><link rel="prefetch" href="/malulesson/public/assets/js/7.49b3aa39.js"><link rel="prefetch" href="/malulesson/public/assets/js/70.a7970bcc.js"><link rel="prefetch" href="/malulesson/public/assets/js/71.d14b8098.js"><link rel="prefetch" href="/malulesson/public/assets/js/72.32ea8fcd.js"><link rel="prefetch" href="/malulesson/public/assets/js/73.412d366f.js"><link rel="prefetch" href="/malulesson/public/assets/js/74.ac8b43a5.js"><link rel="prefetch" href="/malulesson/public/assets/js/75.65545b30.js"><link rel="prefetch" href="/malulesson/public/assets/js/76.71fefee5.js"><link rel="prefetch" href="/malulesson/public/assets/js/77.7a494c8d.js"><link rel="prefetch" href="/malulesson/public/assets/js/78.98eb1e84.js"><link rel="prefetch" href="/malulesson/public/assets/js/79.6c89662a.js"><link rel="prefetch" href="/malulesson/public/assets/js/8.328c7b34.js"><link rel="prefetch" href="/malulesson/public/assets/js/80.399f3e50.js"><link rel="prefetch" href="/malulesson/public/assets/js/81.e29d5da0.js"><link rel="prefetch" href="/malulesson/public/assets/js/82.b7e4b0b1.js"><link rel="prefetch" href="/malulesson/public/assets/js/83.ce83e000.js"><link rel="prefetch" href="/malulesson/public/assets/js/84.58d65b07.js"><link rel="prefetch" href="/malulesson/public/assets/js/85.28802481.js"><link rel="prefetch" href="/malulesson/public/assets/js/86.949f664c.js"><link rel="prefetch" href="/malulesson/public/assets/js/87.33536186.js"><link rel="prefetch" href="/malulesson/public/assets/js/88.e36d365d.js"><link rel="prefetch" href="/malulesson/public/assets/js/89.0499e987.js"><link rel="prefetch" href="/malulesson/public/assets/js/90.f3b6c12a.js"><link rel="prefetch" href="/malulesson/public/assets/js/91.17142909.js"><link rel="prefetch" href="/malulesson/public/assets/js/92.2e115b65.js"><link rel="prefetch" href="/malulesson/public/assets/js/93.a4de1d72.js"><link rel="prefetch" href="/malulesson/public/assets/js/94.f6626a17.js"><link rel="prefetch" href="/malulesson/public/assets/js/95.877179c9.js"><link rel="prefetch" href="/malulesson/public/assets/js/96.b48c7f42.js"><link rel="prefetch" href="/malulesson/public/assets/js/97.79037cb1.js"><link rel="prefetch" href="/malulesson/public/assets/js/98.f66e6a06.js"><link rel="prefetch" href="/malulesson/public/assets/js/99.7ed5b870.js">
    <link rel="stylesheet" href="/malulesson/public/assets/css/0.styles.f7004d92.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>码路教育</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>码路大前端课程</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>码路教育</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/malulesson/public/" class="home-link router-link-active"><img src="/malulesson/public/logo.png" alt="码路教育" class="logo"> <span class="site-name">码路教育</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/malulesson/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/css/01.html" class="nav-link"><i class="undefined"></i>
  一，HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/mobile/01.html" class="nav-link"><i class="undefined"></i>
  二，移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/gitbasic/01.html" class="nav-link"><i class="undefined"></i>
  三，Git基础操作
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/js/01/01.html" class="nav-link"><i class="undefined"></i>
  四，JS基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/dom/01.html" class="nav-link"><i class="undefined"></i>
  五，DOM/BOM
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/jsplus/01.html" class="nav-link"><i class="undefined"></i>
  六，JS高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/less/01.html" class="nav-link"><i class="undefined"></i>
  七，LESS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端工程化与网络
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/network/node/01.html" class="nav-link"><i class="undefined"></i>
  一，node
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/webpack/01.html" class="nav-link"><i class="undefined"></i>
  二，webpack
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/ajax/01.html" class="nav-link"><i class="undefined"></i>
  三，ajax
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/program/" class="nav-link"><i class="undefined"></i>
  四，实战案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue2/01.html" class="nav-link"><i class="undefined"></i>
  一，vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue2plus/" class="nav-link"><i class="undefined"></i>
  二，vue2高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue3/" class="nav-link"><i class="undefined"></i>
  三，vue3
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/mini/" class="nav-link router-link-active"><i class="undefined"></i>
  四，小程序
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/react/" class="nav-link"><i class="undefined"></i>
  五，react基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/reactplus/" class="nav-link"><i class="undefined"></i>
  六，react高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/project/" class="nav-link"><i class="undefined"></i>
  七，项目列表
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/bushu/" class="nav-link"><i class="undefined"></i>
  八，项目部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/other/baguwen/" class="nav-link"><i class="undefined"></i>
  一，八股文与就业
</a></li><li class="dropdown-item"><!----> <a href="http://47.94.210.129/iterview_book/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  二，企业真题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/other/zuoye/" class="nav-link"><i class="undefined"></i>
  三，码路作业
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/other/everyday/" class="nav-link"><i class="undefined"></i>
  四，每日一题
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/malulesson/public/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    码路教育
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>319</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>4</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/malulesson/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端基础
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/css/01.html" class="nav-link"><i class="undefined"></i>
  一，HTML/CSS
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/mobile/01.html" class="nav-link"><i class="undefined"></i>
  二，移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/gitbasic/01.html" class="nav-link"><i class="undefined"></i>
  三，Git基础操作
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/js/01/01.html" class="nav-link"><i class="undefined"></i>
  四，JS基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/dom/01.html" class="nav-link"><i class="undefined"></i>
  五，DOM/BOM
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/jsplus/01.html" class="nav-link"><i class="undefined"></i>
  六，JS高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/basic/less/01.html" class="nav-link"><i class="undefined"></i>
  七，LESS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端工程化与网络
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/network/node/01.html" class="nav-link"><i class="undefined"></i>
  一，node
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/webpack/01.html" class="nav-link"><i class="undefined"></i>
  二，webpack
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/ajax/01.html" class="nav-link"><i class="undefined"></i>
  三，ajax
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/network/program/" class="nav-link"><i class="undefined"></i>
  四，实战案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue2/01.html" class="nav-link"><i class="undefined"></i>
  一，vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue2plus/" class="nav-link"><i class="undefined"></i>
  二，vue2高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/vue3/" class="nav-link"><i class="undefined"></i>
  三，vue3
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/mini/" class="nav-link router-link-active"><i class="undefined"></i>
  四，小程序
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/react/" class="nav-link"><i class="undefined"></i>
  五，react基础
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/reactplus/" class="nav-link"><i class="undefined"></i>
  六，react高级
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/project/" class="nav-link"><i class="undefined"></i>
  七，项目列表
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/Framework/bushu/" class="nav-link"><i class="undefined"></i>
  八，项目部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/malulesson/public/other/baguwen/" class="nav-link"><i class="undefined"></i>
  一，八股文与就业
</a></li><li class="dropdown-item"><!----> <a href="http://47.94.210.129/iterview_book/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  二，企业真题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/other/zuoye/" class="nav-link"><i class="undefined"></i>
  三，码路作业
</a></li><li class="dropdown-item"><!----> <a href="/malulesson/public/other/everyday/" class="nav-link"><i class="undefined"></i>
  四，每日一题
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/malulesson/public/Framework/mini/01.html" class="sidebar-link">01-小程序起步</a></li><li><a href="/malulesson/public/Framework/mini/02.html" class="sidebar-link">02-小程序代码的构成</a></li><li><a href="/malulesson/public/Framework/mini/03.html" class="sidebar-link">03-小程序内置组件</a></li><li><a href="/malulesson/public/Framework/mini/04.html" class="sidebar-link">04-WXSS-WXML-WXS</a></li><li><a href="/malulesson/public/Framework/mini/05.html" class="sidebar-link">05-事件处理</a></li><li><a href="/malulesson/public/Framework/mini/06.html" class="sidebar-link">06-小程序组件化开发</a></li><li><a href="/malulesson/public/Framework/mini/07.html" class="sidebar-link">07-小程序系统API</a></li><li><a href="/malulesson/public/Framework/mini/08.html" class="sidebar-link">08-npm 包与全局数据共享</a></li><li><a href="/malulesson/public/Framework/mini/09.html" class="sidebar-link">09-小程序项目实战</a></li><li><a href="/malulesson/public/Framework/mini/10.html" class="sidebar-link">10-小程序云开发</a></li><li><a href="/malulesson/public/Framework/mini/11.html" aria-current="page" class="active sidebar-link">11-云开发实战</a></li><li><a href="/malulesson/public/Framework/mini/12.html" class="sidebar-link">12-uniapp</a></li><li><a href="/malulesson/public/Framework/mini/13.html" class="sidebar-link">13-uniapp实战</a></li><li><a href="/malulesson/public/Framework/mini/14.html" class="sidebar-link">14-小程序知识点串讲</a></li><li><a href="/malulesson/public/Framework/mini/15.html" class="sidebar-link">15-小程序项目</a></li><li><a href="/malulesson/public/Framework/mini/16.html" class="sidebar-link">16-uniapp知识点串讲</a></li><li><a href="/malulesson/public/Framework/mini/17.html" class="sidebar-link">17-Taro知识点串讲</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>11-云开发实战</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>码路教育</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2023
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">11-云开发实战</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>码路教育</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>8/16/2001</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="一-实现目标"><a href="#一-实现目标" class="header-anchor">#</a> 一，实现目标</h2> <p>实现目标：</p> <img src="/malulesson/public/assets/img/1667794324624.3b8442fd.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667797178668.d20a86b4.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667797197158.db87e6a6.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667988095647.e7c88dd0.png" style="zoom:80%;"> <h2 id="二-创建项目并配置"><a href="#二-创建项目并配置" class="header-anchor">#</a> 二，创建项目并配置</h2> <h3 id="_1-创建项目"><a href="#_1-创建项目" class="header-anchor">#</a> 1，创建项目</h3> <p>第一步，如下：</p> <img src="/malulesson/public/assets/img/1667803212560.9b33bc90.png" style="zoom:80%;"> <p>第二步：如下：</p> <img src="/malulesson/public/assets/img/1667803295722.963402d0.png" style="zoom:80%;"> <p>就可以创建出一个最基础的项目，如下：</p> <img src="/malulesson/public/assets/img/1667803392795.2e7d759c.png" style="zoom:80%;"> <p>默认pages下面有很多的页面，如下：</p> <img src="/malulesson/public/assets/img/1667803432761.24013db2.png" style="zoom:80%;"> <p>删除完后，如下：</p> <img src="/malulesson/public/assets/img/1667803522324.7a7a9986.png" style="zoom:80%;"> <p>创建一个首页面，如下：</p> <img src="/malulesson/public/assets/img/1667803639610.64229f26.png" style="zoom:80%;"> <h3 id="_3-指定环境id"><a href="#_3-指定环境id" class="header-anchor">#</a> 3，指定环境ID</h3> <p>云开发和普通开发有一些地方不一样，先指定云环境，如下：</p> <img src="/malulesson/public/assets/img/1667803743691.c947ad54.png" style="zoom:80%;"> <p>需要在小程序中指定环境ID，如下：</p> <img src="/malulesson/public/assets/img/1667803778874.4197b1f3.png" style="zoom:80%;"> <p>traceUser是true，表示记录哪些用户访问了我的小程序。</p> <p>在项目根目录下，有一个project.config.json，这是项目的配置文件，如下：</p> <img src="/malulesson/public/assets/img/1667803995840.f592197a.png" style="zoom:80%;"> <h3 id="_4-配置基本结构"><a href="#_4-配置基本结构" class="header-anchor">#</a> 4，配置基本结构</h3> <p>创建一个视频的页面，如下：</p> <img src="/malulesson/public/assets/img/1667804100825.75605f92.png" style="zoom:80%;"> <p>引入项目中用到的一些图片，如下：</p> <img src="/malulesson/public/assets/img/1667804153676.47959848.png" style="zoom:80%;"> <p>配置窗口和tabbar，如下：</p> <img src="/malulesson/public/assets/img/1667804215000.553f80ce.png" style="zoom:80%;"> <p>配置的参考如下（大家也可以直接copy）：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code> <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dark&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;码路音乐&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/playList/playList&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/music.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/music-active.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;音乐&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/vedio/vedio&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/vedio.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/vedio-active.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;视频&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="三-轮播图与playlist组件"><a href="#三-轮播图与playlist组件" class="header-anchor">#</a> 三，轮播图与playList组件</h2> <h3 id="_1-轮播图实现"><a href="#_1-轮播图实现" class="header-anchor">#</a> 1，轮播图实现</h3> <p>准备一些假数据，如下：</p> <img src="/malulesson/public/assets/img/1667804395074.af56ca83.png" style="zoom:80%;"> <p>参考的假数据如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> swiperImgUrls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">' http://p1.music.126.net/Pu0l_nScj5dfOvMCaBWIag==/109951167653146162.jpg'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://p1.music.126.net/W_T-HqFp9i5o0k1o63uRuw==/109951167652829089.jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/ZPdgbRn9TsnZDMiCV2Eksw==/109951167652921307.jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://p1.music.126.net/78xGCPQSXKtpq4BpTEYM6Q==/109951167653164348.jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/KVCbjQbmHEk8tJNgbazSLw==/109951167652805156.jpg'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> swiperImgUrls<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>在页面对应的JS中导入数据，如下：</p> <img src="/malulesson/public/assets/img/1667804494524.def29528.png" style="zoom:80%;"> <p>有了数据，就可以绘制轮播图了，如下：</p> <img src="/malulesson/public/assets/img/1667804578335.ad975de6.png" style="zoom:80%;"> <p>轮播图参考结构如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">autoplay</span> <span class="token attr-name">circular</span> <span class="token attr-name">indicator-dots</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{true}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indicator-active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#d43c43<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{swiperImgUrls}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.url}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>书写对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667804615743.b2993979.png" style="zoom:80%;"> <p>轮播图参考样式如下：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">swiper,
swiper image</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 360rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-songs组件实现"><a href="#_2-songs组件实现" class="header-anchor">#</a> 2，songs组件实现</h3> <p>创建songs组件，如下：</p> <img src="/malulesson/public/assets/img/1667804753103.55de666b.png" style="zoom:80%;"> <p>在playList组件中，使用songs组件，如下：</p> <img src="/malulesson/public/assets/img/1667804918432.cfe61226.png" style="zoom:80%;"> <p>使用之，如下：</p> <img src="/malulesson/public/assets/img/1667804944452.74bbf970.png" style="zoom:80%;"> <p>然后，开始写songs组件，如下：</p> <img src="/malulesson/public/assets/img/1667805061923.fb6d2003.png" style="zoom:80%;"> <p>songs组件参考结构如下（大家也直接copy）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>songList-container<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goToDetails<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://p1.music.126.net/vsK4sDZa2GkAgUpEuSGsSQ==/109951164423646257.jpg?param=140y140<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>书写对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667805106528.d1e26f00.png" style="zoom:80%;"> <p>songs组件参考样式如下（大家也直接copy）：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.songList-container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 220rpx<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.songList-container image</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 220rpx<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 6rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.songList-container .collect</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 4rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 26rpx<span class="token punctuation">;</span>
    <span class="token property">text-shadow</span><span class="token punctuation">:</span> 1px 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.songList-container .description</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 26rpx<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 2px 0 0 6px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>准备一些假数据，如下：</p> <img src="/malulesson/public/assets/img/1667805165813.e1d5b1d4.png" style="zoom:80%;"> <p>songs对应的假数据如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> songs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d042a5c0174f1ca26f1d7b2'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywrier</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">1.4641238e6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'天气转热了，适合听点凉爽的歌。'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2021-06-14T23:14:36.746Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2.780381322e9</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/vsK4sDZa2GkAgUpEuSGsSQ==/109951164423646257.jpg?param=140y140'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">53.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d042a5c0174f1da7aa357aa'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywriter</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">622822.6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2.740107647e9</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'「时空潜行」囿于昼夜的空想主义者'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2020-06-14T23:14:36.955Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/Jl-xdjCyuEXnI2FedkLLMQ==/109951167578347447.jpg'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">20.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d042a5c0174f1de21c7e79e'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2.828842343e9</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'粤语情诗：与你听风声，观赏过夜星'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/2K9Zk1jAoSnW7GgfWfy0Kw==/109951167132241424.jpg'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">1.785097e6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">52.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywriter</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2021-06-14T23:14:36.982Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d042a5d0174f1e67d1bb16f'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">7.719329e6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">950.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">9.17794768e8</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'翻唱简史：日本四百首'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2022-06-14T23:14:37.037Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywriter</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'https://p2.music.126.net/NczCuurE5eVvObUjssoGjQ==/109951163788653124.jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d042a5d0174f1ea32c4c288'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywriter</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2022-06-14T23:14:37.097Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2.201879658e9</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">1.06749088e8</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'你的青春里有没有属于你的一首歌？'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'http://p1.music.126.net/y1wtpP_a3SwbL3zaFS-NbA==/109951167565069927.jpg'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">169.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'08560c9e5d0829820362a79f4b049d2d'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alg</span><span class="token operator">:</span> <span class="token string">'cityLevel_unknow'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'「乐队的夏天」参赛歌曲合集丨EP04更新'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">highQuality</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">picUrl</span><span class="token operator">:</span> <span class="token string">'http://p2.music.126.net/ev-M6wpxsxEPR_t0Lx8ujw==/109951167526276853.jpg'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trackCount</span><span class="token operator">:</span> <span class="token number">158.0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">$date</span><span class="token operator">:</span> <span class="token string">'2021-06-18T00:00:02.553Z'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">copywriter</span><span class="token operator">:</span> <span class="token string">'热门推荐'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">playCount</span><span class="token operator">:</span> <span class="token number">1.5742008e6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">canDislike</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2.79477263e9</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> songs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br></div></div><p>在页面中，导入这些假数据，如下：</p> <img src="/malulesson/public/assets/img/1667805218781.7a8d6323.png" style="zoom:80%;"> <p>有多少个数据，就渲染出多少个song组件，如下：</p> <img src="/malulesson/public/assets/img/1667805353537.f6a17931.png" style="zoom:80%;"> <p>实现playList 类，如下：</p> <img src="/malulesson/public/assets/img/1667805452445.49063667.png" style="zoom:80%;"> <p>把数据传递给子组件，如下：</p> <img src="/malulesson/public/assets/img/1667806416846.656f05a1.png" style="zoom:80%;"> <p>子组件接收之，如下：</p> <img src="/malulesson/public/assets/img/1667806467166.6ebca047.png" style="zoom:80%;"> <p>使用之，把数据替换一下，如下：</p> <img src="/malulesson/public/assets/img/1667806520762.e905b74a.png" style="zoom:80%;"> <p>发现了一个问题，看一个播放量，如下：</p> <img src="/malulesson/public/assets/img/1667806558126.91908419.png" style="zoom:80%;"> <p>我们期望，如下：</p> <img src="/malulesson/public/assets/img/1667806585121.eaa47650.png" style="zoom:80%;"> <p>所以我们需要对数据进行处理，此时使用一个数据监听器。</p> <h3 id="_3-数据监听器"><a href="#_3-数据监听器" class="header-anchor">#</a> 3，数据监听器</h3> <p>对应的文档：</p> <p>​	https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html</p> <img src="/malulesson/public/assets/img/1667806822740.a3d1aecc.png" style="zoom:80%;"> <p>在处理之前，再看一个数据长什么样，如下：</p> <img src="/malulesson/public/assets/img/1667807017129.e9591cc1.png" style="zoom:80%;"> <p>开始处理数据，如下：</p> <img src="/malulesson/public/assets/img/1667807841182.aa503b76.png" style="zoom:80%;"> <p>定义一个新的状态，把处理好的数据赋值给它，如下：</p> <img src="/malulesson/public/assets/img/1667807989403.896f1edb.png" style="zoom:80%;"> <p>在模板中使用之，如下：</p> <img src="/malulesson/public/assets/img/1667808017432.52ad565b.png" style="zoom:80%;"> <h2 id="四-请求音乐数据的云函数"><a href="#四-请求音乐数据的云函数" class="header-anchor">#</a> 四，请求音乐数据的云函数</h2> <h3 id="_1-创建云函数并安装依赖"><a href="#_1-创建云函数并安装依赖" class="header-anchor">#</a> 1，创建云函数并安装依赖</h3> <img src="/malulesson/public/assets/img/1667808115259.c5f9e75f.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667808263443.a8183914.png" style="zoom:80%;"> <p>每一个云函数就是一个小项目，小项目中默认需要安装一个依赖，如下：</p> <img src="/malulesson/public/assets/img/1667808302709.a9eb09b6.png" style="zoom:80%;"> <p>把这个依赖安装一下，如下：</p> <img src="/malulesson/public/assets/img/1667808403788.71c85fe0.png" style="zoom:80%;"> <p>在云函数中，还需要向第三方服务器，发请求，获取音乐数据，所以我们需要安装axios，如下：</p> <img src="/malulesson/public/assets/img/1667808500911.532785ae.png" style="zoom:80%;"> <h3 id="_2-在云函数中请求接口获取数据-存储到集合"><a href="#_2-在云函数中请求接口获取数据-存储到集合" class="header-anchor">#</a> 2，在云函数中请求接口获取数据，存储到集合</h3> <p>接口如下：</p> <p>http://47.94.210.129:3002/personalized</p> <p>在云函数中指定环境ID，如下：</p> <img src="/malulesson/public/assets/img/1667808634893.a36ee5f8.png" style="zoom:80%;"> <p>在云函数中请求如下：</p> <img src="/malulesson/public/assets/img/1667808723717.8086a25b.png" style="zoom:80%;"> <p>把代码上传部署，如下：</p> <img src="/malulesson/public/assets/img/1667808807228.9ad09774.png" style="zoom:80%;"> <p>测试一把，测试分本地测试和云端测试，如下：</p> <img src="/malulesson/public/assets/img/1667808750981.efa9ba7e.png" style="zoom:80%;"> <p>进行本地测试，如下：</p> <img src="/malulesson/public/assets/img/1667808869360.b0a6966d.png" style="zoom:80%;"> <p>当然也可以云端测试，一般情况下不用，如下：</p> <img src="/malulesson/public/assets/img/1667808922165.eef974c1.png" style="zoom:80%;"> <p>创建一个集合，如下：</p> <img src="/malulesson/public/assets/img/1667809007575.916a2b0a.png" style="zoom:80%;"> <p>把数据存储到集合中，如下 ：</p> <img src="/malulesson/public/assets/img/1667809565307.07a0d995.png" style="zoom:80%;"> <p>上传并部署，本地测试之，如下：</p> <img src="/malulesson/public/assets/img/1667809610155.51096f06.png" style="zoom:80%;"> <p>查看数据库，如下：</p> <img src="/malulesson/public/assets/img/1667809636956.fc602e3d.png" style="zoom:80%;"> <p>数据为中有多个少个数据，可以点高级操作，如下：</p> <img src="/malulesson/public/assets/img/1667809672113.8ac29462.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667809855546.29b3eaaf.png" style="zoom:80%;"> <h3 id="_3-数据去重"><a href="#_3-数据去重" class="header-anchor">#</a> 3，数据去重</h3> <p>再看一下，我们的代码，如下：</p> <img src="/malulesson/public/assets/img/1667809964350.9960d888.png" style="zoom:80%;"> <p>再本地测试一把，相当于又发了一个ajax请求，如下：</p> <img src="/malulesson/public/assets/img/1667809998471.170192f7.png" style="zoom:80%;"> <p>看数据库，如下：</p> <img src="/malulesson/public/assets/img/1667810022734.4023a182.png" style="zoom:80%;"> <p>每一次得到30条数据，问：第1次得到的30条数据 和 第2次得到的30条数据一样吗？</p> <p>答：不好说   如果后端数据没有更新，得到数据是一样的，如果后端更新了，得到的数据是不一样的，换句话说，今天调用接口得到数据和你明天调用接口得到的数据可能是不一样的。</p> <p>也就说，数据可能是一样的，也可能是不一样的，如果是一样的，就意味着数据库中存储的数据有很多重复数据，所以我们就需要去重。</p> <p>接下来，我们从数据库取数据，取出来后，需要去重。分析如下：</p> <img src="/malulesson/public/assets/img/1667810572755.81a3fc7c.png" style="zoom:80%;"> <p>去重的逻辑，在vscode中写，如下：</p> <img src="/malulesson/public/assets/img/1667810999235.0068177b.png" style="zoom:80%;"> <p>每一个文档，都有一个唯一的ID，叫_id，每个音乐也都是有下个唯一的ID，我们也是根据ID来去重的，如下：</p> <img src="/malulesson/public/assets/img/1667812244318.651a030c.png" style="zoom:80%;"> <p>把去重逻辑代码copy到云函数中，如下：</p> <img src="/malulesson/public/assets/img/1667813890775.dbf695c4.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667813920022.2bee3af7.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667813936155.64fcc776.png" style="zoom:80%;"> <p>测试一下，把集合全部清空，如下：</p> <img src="/malulesson/public/assets/img/1667812644180.5e189798.png" style="zoom:80%;"> <img src="data:image/png;base64,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" style="zoom:80%;"> <p>集合中没有任何元素，如下：</p> <img src="/malulesson/public/assets/img/1667812692838.c3f0b322.png" style="zoom:80%;"> <p>把代码上传并布署。</p> <p>调用一次云函数，此时会存储30条数据到数据库，如下：</p> <img src="/malulesson/public/assets/img/1667813168990.10e54790.png" style="zoom:80%;"> <p>现在再次调用之，按去重前的逻辑，会存储60条数据，现在去重了，测试如下：</p> <img src="/malulesson/public/assets/img/1667813960793.8c77ab3e.png" style="zoom:80%;"> <p>看数据库，如下：</p> <img src="/malulesson/public/assets/img/1667813973157.8ee87a3e.png" style="zoom:80%;"> <p>现在第2次去调用时，由于所有的音乐和第1次存储到数据库中的音乐是一样，所以第2次也是得到30条数据。</p> <h3 id="_4-突破云函数中获取数据条件的限制"><a href="#_4-突破云函数中获取数据条件的限制" class="header-anchor">#</a> 4，突破云函数中获取数据条件的限制</h3> <p>在云函数中获取数据库中的数据是由条件限制的，如下：</p> <img src="/malulesson/public/assets/img/1667814255509.fee7e936.png" style="zoom:80%;"> <p>文档如下：</p> <p>https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.get.html</p> <p>我们需要突破这个限制，假如数据库中有500条数据，一次可以拿100条件，拿5次就OK了，如下：</p> <img src="/malulesson/public/assets/img/1667814871984.77524248.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667814906242.d8c16b70.png" style="zoom:80%;"> <p>测试OK。</p> <h3 id="_5-利用定时触发器每天获取最新的数据"><a href="#_5-利用定时触发器每天获取最新的数据" class="header-anchor">#</a> 5，利用定时触发器每天获取最新的数据</h3> <p>在云开发中，提供了触发器，文档，如下：</p> <p>https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html</p> <p>创建一个触发器，如下：</p> <img src="/malulesson/public/assets/img/1667815515462.2b530b4b.png" style="zoom:80%;"> <p>把触发器，上传到云端，如下：</p> <img src="/malulesson/public/assets/img/1667815544488.9ff5d026.png" style="zoom:80%;"> <p>第二天，它会自动调用云函数，获取最新的数据，第三天同理....</p> <h2 id="五-小程序端获取音乐数据"><a href="#五-小程序端获取音乐数据" class="header-anchor">#</a> 五，小程序端获取音乐数据</h2> <h3 id="_1-创建云函数获取音乐的数据"><a href="#_1-创建云函数获取音乐的数据" class="header-anchor">#</a> 1，创建云函数获取音乐的数据</h3> <p>直接创建，如下：</p> <img src="/malulesson/public/assets/img/1667816103700.39c0885d.png" style="zoom:80%;"> <p>本地测试之，如下：</p> <img src="/malulesson/public/assets/img/1667816079652.3d0e788c.png" style="zoom:80%;"> <h3 id="_2-在小程序端调用云函数"><a href="#_2-在小程序端调用云函数" class="header-anchor">#</a> 2，在小程序端调用云函数</h3> <p>在小程序端，获取数据，如下：</p> <img src="/malulesson/public/assets/img/1667816430027.114dc842.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667816444395.b714786d.png" style="zoom:80%;"> <p>在调用之前，开启Loading，如下：</p> <img src="/malulesson/public/assets/img/1667816664073.eeca58be.png" style="zoom:80%;"> <h3 id="_3-上拉加载更多与下拉刷新"><a href="#_3-上拉加载更多与下拉刷新" class="header-anchor">#</a> 3，上拉加载更多与下拉刷新</h3> <p>先实现上拉加载更多，把上面调用云函数的代码封装成一个函数，如下：</p> <img src="/malulesson/public/assets/img/1667889609576.706c53e0.png" style="zoom:80%;"> <p>在onLoad中调用之，如下：</p> <img src="/malulesson/public/assets/img/1667889657987.90c3e085.png" style="zoom:80%;"> <p>实现上拉加载更多，当们往上拽时，会触发下面的函数，如下：</p> <img src="/malulesson/public/assets/img/1667889754072.9c75727a.png" style="zoom:80%;"> <p>在这个函数中，也是调用getPlayList，如下：</p> <img src="/malulesson/public/assets/img/1667889852382.db45c50d.png" style="zoom:80%;"> <p>是由于我们的getPlayList方法，有问题，修改之，如下：</p> <img src="/malulesson/public/assets/img/1667889948039.c7e9dbc4.png" style="zoom:80%;"> <p>到此就实现了上拉加载更多。</p> <p>然后，我们实现下拉刷新，所谓的下拉刷新，就是重新调用云函数。要实现上拉刷新，需要在JSON文件，开启，如下：</p> <img src="/malulesson/public/assets/img/1667890117829.5fb52b3c.png" style="zoom:80%;"> <p>也有一个钩子函数，对应下拉动作，如下：</p> <img src="/malulesson/public/assets/img/1667890236231.bb07ed5d.png" style="zoom:80%;"> <p>下拉刷新，下拉时间有点，可以修改之，如下：</p> <img src="/malulesson/public/assets/img/1667890316582.c22ae500.png" style="zoom:80%;"> <p>此时，下拉就很丝滑了。</p> <h2 id="六-云函数中的路由"><a href="#六-云函数中的路由" class="header-anchor">#</a> 六，云函数中的路由</h2> <h3 id="_1-云函数中的路由的使用"><a href="#_1-云函数中的路由的使用" class="header-anchor">#</a> 1，云函数中的路由的使用</h3> <p>进入music云函数，安装默认依赖，如下：</p> <img src="/malulesson/public/assets/img/1667890646692.331bd428.png" style="zoom:80%;"> <p>云函数中也是有路由的，和koa中路由是一样的，如下：</p> <img src="/malulesson/public/assets/img/1667890487574.1cc4c99b.png" style="zoom:80%;"> <p>使用之如下：</p> <img src="/malulesson/public/assets/img/1667891008745.64a17bd1.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667891039610.54c8493d.png" style="zoom:80%;"> <p>在小程序端，调用云函数时，需要加上url，如下：</p> <img src="/malulesson/public/assets/img/1667891074068.5aa5e48d.png" style="zoom:80%;"> <p>测试，OK，如下：</p> <img src="/malulesson/public/assets/img/1667891088090.11d39758.png" style="zoom:80%;"> <h2 id="七-歌曲详情开发"><a href="#七-歌曲详情开发" class="header-anchor">#</a> 七，歌曲详情开发</h2> <p>点击歌曲，需要到详情，详情如下：</p> <img src="/malulesson/public/assets/img/1667891172332.eec20cc9.png" style="zoom:80%;"> <h3 id="_1-歌曲详情组件开发"><a href="#_1-歌曲详情组件开发" class="header-anchor">#</a> 1，歌曲详情组件开发</h3> <p>创建出详情组件，如下：</p> <img src="/malulesson/public/assets/img/1667891218511.3931aa9e.png" style="zoom:80%;"> <p>给首页面中的每一个小歌单绑定一个点击事件，如下：</p> <img src="/malulesson/public/assets/img/1667891282721.008112ac.png" style="zoom:80%;"> <p>实现对应的方法，如下：</p> <img src="/malulesson/public/assets/img/1667891375643.4a221c57.png" style="zoom:80%;"> <p>跳转时，需要把歌曲的ID传递到详情页面，获取ID如下：</p> <img src="/malulesson/public/assets/img/1667891447899.7bdf82ce.png" style="zoom:80%;"> <p>测试ID是可以获取的，传递，如下：</p> <img src="/malulesson/public/assets/img/1667891501767.8bf76d57.png" style="zoom:80%;"> <p>在详情页面中获取ID，如下：</p> <img src="/malulesson/public/assets/img/1667891569955.9076f5cf.png" style="zoom:80%;"> <p>在云端函数端定义根据ID获取音乐详情的数据，需要安装axios，如下：</p> <img src="/malulesson/public/assets/img/1667891679705.96358eca.png" style="zoom:80%;"> <p>定义路由，根据ID获取数据，如下：</p> <img src="/malulesson/public/assets/img/1667892238690.70a1c641.png" style="zoom:80%;"> <p>在小程序端，调用云函数，如下：</p> <img src="/malulesson/public/assets/img/1667892413719.a5736742.png" style="zoom:80%;"> <p>在小程序端测试之，如下：</p> <img src="/malulesson/public/assets/img/1667892445946.e4841e84.png" style="zoom:80%;"> <p>定义一个状态，如下：</p> <img src="/malulesson/public/assets/img/1667892520950.954af4b4.png" style="zoom:80%;"> <p>给上面的两个状态赋值，如下：</p> <img src="/malulesson/public/assets/img/1667892681372.3a13820c.png" style="zoom:80%;"> <p>查看之，如下：</p> <img src="/malulesson/public/assets/img/1667892708085.d6b7303b.png" style="zoom:80%;"> <p>有数据了，就需要渲染数据，so easy~</p> <p>实现对应的结构，如下：</p> <img src="/malulesson/public/assets/img/1667892815798.376dbb4e.png" style="zoom:80%;"> <p>详情页面对应的结构如下（大家可以直接copy）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>coverImg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>音乐的名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail-description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>音乐的描述<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>实现对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667892859609.f0ce957c.png" style="zoom:80%;"> <p>详情页对应的样式如下（大家可以直接copy）：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 320rpx<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.detail</span> <span class="token punctuation">{</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400rpx<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.coverImg</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 280rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 280rpx<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 6rpx<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.detail-name</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 34rpx<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.detail-description</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>在调用云函数时，也可以添加loading效果，如下：</p> <img src="/malulesson/public/assets/img/1667894214240.fcceb85b.png" style="zoom:80%;"> <h3 id="_2-实现songlist组件"><a href="#_2-实现songlist组件" class="header-anchor">#</a> 2，实现songList组件</h3> <p>songList组件效果，如下：</p> <img src="/malulesson/public/assets/img/1667894239263.fd70651b.png" style="zoom:80%;"> <p>定义一个组件，如下：</p> <img src="data:image/png;base64,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" style="zoom:80%;"> <p>在详情页中，使用组件，如下：</p> <img src="/malulesson/public/assets/img/1667894310703.8588d6d8.png" style="zoom:80%;"> <p>使用之，如下：</p> <img src="/malulesson/public/assets/img/1667894367133.ae384749.png" style="zoom:80%;"> <p>把数据传递给组件，如下：</p> <img src="/malulesson/public/assets/img/1667894403675.f9bde798.png" style="zoom:80%;"> <p>组件进行接收，如下：</p> <img src="/malulesson/public/assets/img/1667894444296.bbff1fa9.png" style="zoom:80%;"> <p>查看之，如下：</p> <img src="/malulesson/public/assets/img/1667894488094.8950a01d.png" style="zoom:80%;"> <p>可以数据数据渲染出来，如下：</p> <img src="/malulesson/public/assets/img/1667894569240.942b0050.png" style="zoom:80%;"> <p>songList组件对应的结构如下（大家直接copy）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>song<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serial-number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>song-detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>song-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>song-singer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>作者<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>实现对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667894618345.7777b2b0.png" style="zoom:80%;"> <p>songList组件对应的样式如下（大家直接copy）：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.song</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> cneter<span class="token punctuation">;</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;微软雅黑&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.serial-number</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 34rpx<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 80rpx<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 80rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.song-name</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 34rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.song-singer</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 5rpx<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 26rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.checked view</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #d34c34<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_3-高亮效果"><a href="#_3-高亮效果" class="header-anchor">#</a> 3，高亮效果</h3> <p>点谁让谁高亮，绑定点击事件并传参，传ID，如下：</p> <img src="/malulesson/public/assets/img/1667894813408.e5eb1e60.png" style="zoom:80%;"> <p>实现上面的方法，如下：</p> <img src="/malulesson/public/assets/img/1667894866770.bc86f846.png" style="zoom:80%;"> <p>测试之，如下：</p> <img src="/malulesson/public/assets/img/1667894923980.23670c84.png" style="zoom:80%;"> <p>实现高亮，如下：</p> <img src="/malulesson/public/assets/img/1667894997642.6a636022.png" style="zoom:80%;"> <h3 id="_4-点击某个音乐去-播放页面"><a href="#_4-点击某个音乐去-播放页面" class="header-anchor">#</a> 4，点击某个音乐去 播放页面</h3> <p>不能只是高亮，还需要进行跳转，就跳转到音乐的播放页面了，至少需要把音乐的ID传递过来，因为在播放页面，需要根据ID来获取音乐数据，进行音乐播放，假如把音乐的ID传递给播放页，播放页，按理说，需要根据ID获取音乐数据，进行音乐操作。当然，这样也可以，但是音乐数据，在详情页中都有，我们没有必要在播放页再去请求数据，可以把数据存储在本地，在播放页，直接从本地获取。在详情页，数据如下：</p> <img src="/malulesson/public/assets/img/1667895277455.8bef1d5e.png" style="zoom:80%;"> <p>把ID和索引，都传递给播放页，如下：</p> <img src="/malulesson/public/assets/img/1667895411682.5363b339.png" style="zoom:80%;"> <p>跳到播放器，如下：</p> <img src="/malulesson/public/assets/img/1667895582951.2740c4e7.png" style="zoom:80%;"> <p>把播放页，创建出来，如下：</p> <img src="/malulesson/public/assets/img/1667895607437.faffa218.png" style="zoom:80%;"> <p>测试一下，能否跳转，如下：</p> <img src="/malulesson/public/assets/img/1667895636974.5687f6f3.png" style="zoom:80%;"> <p>可以得到传递过来的数据，如下：</p> <img src="/malulesson/public/assets/img/1667895701960.dd06e673.png" style="zoom:80%;"> <h3 id="_5-在详情页把数据存储到本地"><a href="#_5-在详情页把数据存储到本地" class="header-anchor">#</a> 5，在详情页把数据存储到本地</h3> <p>为什么要存储到本地？</p> <p>答：在播放页需要获取数据，进行音乐播放。在播放页就可以从本地获取数据。没有必须再发网络请求了。</p> <p>存储数据如下：</p> <img src="/malulesson/public/assets/img/1667895870494.29e6b952.png" style="zoom:80%;"> <p>查看如下：</p> <img src="/malulesson/public/assets/img/1667896025503.60006222.png" style="zoom:80%;"> <h2 id="八-播放器实现"><a href="#八-播放器实现" class="header-anchor">#</a> 八，播放器实现</h2> <h3 id="_1-播放器页面布局"><a href="#_1-播放器页面布局" class="header-anchor">#</a> 1，播放器页面布局</h3> <p>在播放页面，可以得到传递过来的数据，如下：</p> <img src="/malulesson/public/assets/img/1667896239076.b524a020.png" style="zoom:80%;"> <p>有10个音乐数据，索引为0表示第1个数据，索引为1表示第2个数据.... 要得到第1个音乐数据，如下：</p> <img src="/malulesson/public/assets/img/1667896330652.75192e92.png" style="zoom:80%;"> <p>得到音乐的名字，可以放到小程序头部，如下：</p> <img src="/malulesson/public/assets/img/1667896433779.5a510c92.png" style="zoom:80%;"> <p>在data中，还有播放页的背景图，定义一个状态，如下：</p> <img src="/malulesson/public/assets/img/1667896494980.ba4ee6dc.png" style="zoom:80%;"> <p>给状态赋值，如下：</p> <img src="/malulesson/public/assets/img/1667896531840.c55cf84a.png" style="zoom:80%;"> <p>在HTML中绘制这个背景图，如下：</p> <img src="/malulesson/public/assets/img/1667896636110.c157e637.png" style="zoom:80%;"> <p>把页面中其它的结构，直接copy了，如下：</p> <img src="/malulesson/public/assets/img/1667896707804.486408b0.png" style="zoom:80%;"> <h3 id=""><a href="#" class="header-anchor">#</a></h3> <p>播放器对应的结构如下（大家直接copy）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--pages/player/player.wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./xx.png<span class="token punctuation">)</span></span> center/cover no-repeat<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>disc play<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover roration}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cutoverState<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>control-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/previous.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>play<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/play.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/next.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>样式，我们也不写，因为之前，vue音乐播放器，我们写过了，如下：</p> <img src="/malulesson/public/assets/img/1667896765721.0a93a303.png" style="zoom:80%;"> <p>播放器对应的样式如下（大家直接copy）：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* pages/player/player.wxss */</span>
<span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>40rpx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> -2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.disc::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 192rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 274rpx<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -150rpx<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 266rpx<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;https://s3.music.126.net/m/s/img/needle.png?702cf6d95f29e2e594f53a3caab50e12&quot;</span><span class="token punctuation">)</span></span> no-repeat center/contain<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-15deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform-origin</span><span class="token punctuation">:</span> 24rpx 10rpx<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> transform 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.play.disc::after</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.disc</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 590rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 590rpx<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;https://s3.music.126.net/mobile-new/img/disc.png?d3bdd1080a72129346aa0b4b4964b75f=&quot;</span><span class="token punctuation">)</span></span> no-repeat center/contain<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> 140rpx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.cover</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 368rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 368rpx<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> -184rpx<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> -184rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.roration</span> <span class="token punctuation">{</span>
    <span class="token property">animation</span><span class="token punctuation">:</span> roration 16s linear infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.roration-stop</span> <span class="token punctuation">{</span>
    <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> roration</span> <span class="token punctuation">{</span>
    <span class="token selector">from</span> <span class="token punctuation">{</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">to</span> <span class="token punctuation">{</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.control-panel</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 8%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.control-panel image</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 80rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80rpx<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.control-panel image.play</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.progress-bar</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 24%<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h3 id="_2-控制面板功能实现"><a href="#_2-控制面板功能实现" class="header-anchor">#</a> 2，控制面板功能实现</h3> <p>定义一个云函数，这个云函数可以根据id获取音乐的mp3数据，如下：</p> <img src="/malulesson/public/assets/img/1667897889369.4ba8773e.png" style="zoom:80%;"> <p>在小程序端，调用云函数，如下：</p> <img src="/malulesson/public/assets/img/1667898083178.16ea1aa9.png" style="zoom:80%;"> <p>控制台查看之，如下：</p> <img src="/malulesson/public/assets/img/1667898131032.42349a80.png" style="zoom:80%;"> <p>测试一下，这个mp3文件，如下：</p> <img src="/malulesson/public/assets/img/1667898203963.b4ff842d.png" style="zoom:80%;"> <p>在小程序中，有一个背景音乐管理器，对应的文档，如下：</p> <p>https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.html</p> <img src="/malulesson/public/assets/img/1667898327196.850fb5f4.png" style="zoom:80%;"> <p>使用之，如下：</p> <img src="/malulesson/public/assets/img/1667898396299.65477851.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667898508859.9eeefa86.png" style="zoom:80%;"> <p>就上面一条代码，就可以实现音乐播放。</p> <p>但是在控制台有一个后错，如下：</p> <img src="/malulesson/public/assets/img/1667898602221.7f3f1e93.png" style="zoom:80%;"> <p>配置如下 ：</p> <img src="/malulesson/public/assets/img/1667898646143.23634688.png" style="zoom:80%;"> <p>配置完毕后，就没有错误了。</p> <p>把data定义成全局变量，data中就保存音乐的信息，如下：</p> <img src="/malulesson/public/assets/img/1667898763980.54cc25fb.png" style="zoom:80%;"> <p>在另一个函数，就可以使用data中的数据，如下：</p> <img src="/malulesson/public/assets/img/1667898921355.72ef3ddc.png" style="zoom:80%;"> <p>定义一个状态，表示是否处于播放模式，如下：</p> <img src="/malulesson/public/assets/img/1667898983095.582c08e5.png" style="zoom:80%;"> <p>当播放音乐时，需要变成true，如下：</p> <img src="/malulesson/public/assets/img/1667899019287.07ebc732.png" style="zoom:80%;"> <p>此时，就可以根据这个状态，修改HTML中的数据了，如下：</p> <img src="/malulesson/public/assets/img/1667899121079.3399c8e4.png" style="zoom:80%;"> <p>点击按钮，可以暂停音乐，绑定点击事件，如下：</p> <img src="/malulesson/public/assets/img/1667899173017.2aa9740a.png" style="zoom:80%;"> <p>实现对应的方法，如下：</p> <img src="/malulesson/public/assets/img/1667899276392.988eea04.png" style="zoom:80%;"> <p>当音乐播放时，需要让中间的转盘转起来，如下：</p> <img src="/malulesson/public/assets/img/1667899478639.cf1f3744.png" style="zoom:80%;"> <p>实现上一曲和下一曲，分别给按钮绑定点击事件，如下：</p> <img src="/malulesson/public/assets/img/1667899537369.4a4ac7eb.png" style="zoom:80%;"> <p>实现上面的方法，在方法，需要得到索引，还需要得到音乐列表数据，定义成全局变量，如下：</p> <img src="/malulesson/public/assets/img/1667899638475.adda0e75.png" style="zoom:80%;"> <p>在其它函数，就可以使用之，如下：</p> <img src="/malulesson/public/assets/img/1667899744334.059f5736.png" style="zoom:80%;"> <p>测试之，如下：</p> <img src="/malulesson/public/assets/img/1667899802845.261d1369.png" style="zoom:80%;"> <p>当点击下一曲或上一曲，有一个bug，如下：</p> <img src="/malulesson/public/assets/img/1667900618001.f8d67213.png" style="zoom:80%;"> <p>为什么？分析：</p> <img src="/malulesson/public/assets/img/1667900710323.67d2017f.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667900764786.8d547a6d.png" style="zoom:80%;"> <p>在获取音乐的mp3时，可以先把音乐停下来，如下：</p> <img src="/malulesson/public/assets/img/1667900872563.f7187cce.png" style="zoom:80%;"> <p>再次测试之，完美。</p> <h3 id="_3-总时长与播放时间实现"><a href="#_3-总时长与播放时间实现" class="header-anchor">#</a> 3，总时长与播放时间实现</h3> <p>需求：</p> <img src="/malulesson/public/assets/img/1667975544656.d6becf22.png" style="zoom:80%;"> <p>创建一个进度条组件，如下：</p> <img src="/malulesson/public/assets/img/1667975591459.4848c6f6.png" style="zoom:80%;"> <p>在播放页，引入进度条，如下：</p> <img src="/malulesson/public/assets/img/1667975635804.1a298cf7.png" style="zoom:80%;"> <p>在播放页，使用之，如下：</p> <img src="/malulesson/public/assets/img/1667975701668.f18c895b.png" style="zoom:80%;"> <p>然后，实现进度条组件，如下：</p> <img src="/malulesson/public/assets/img/1667975949282.4048f21c.png" style="zoom:80%;"> <p>进度条对应的结构如下（直接copy）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>movable-area</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>movable-area<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>movable-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>movable-view<span class="token punctuation">&quot;</span></span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">damping</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>movable-view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>movable-area</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">backgroundColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#969696<span class="token punctuation">&quot;</span></span> <span class="token attr-name">activeColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#fff<span class="token punctuation">&quot;</span></span> <span class="token attr-name">percent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>书写对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667976081593.0cb04822.png" style="zoom:80%;"> <p>进度条对应的样式如下（直接copy）：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.movable-area</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 34rpx<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> -14rpx<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.movable-view</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 36rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 36rpx<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fefefe<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.time</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 64rpx<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 20rpx<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>在进度条组件中，有一个钩子函数，如下：</p> <img src="/malulesson/public/assets/img/1667976366685.30203c21.png" style="zoom:80%;"> <p>在这里，可以得到组件相关的信息，参考文档如下：</p> <img src="/malulesson/public/assets/img/1667976517164.11563bdf.png" style="zoom:80%;"> <p>代码如下：</p> <img src="/malulesson/public/assets/img/1667976776323.6c6882a2.png" style="zoom:80%;"> <p>结果如下：</p> <img src="/malulesson/public/assets/img/1667976875365.759f4a47.png" style="zoom:80%;"> <p>上面得到的两个宽度，后面使用，先放一下。</p> <p>我们要得到音乐相关的信息，需要引入BAM，如下：</p> <img src="/malulesson/public/assets/img/1667976967122.a3de9b45.png" style="zoom:80%;"> <p>我们需要得到音乐的总时长，如下：</p> <img src="/malulesson/public/assets/img/1667977518072.18fe5dd0.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667977555703.c1e544fb.png" style="zoom:80%;"> <p>下面的方式，获取总时长是不可取的，如下：</p> <img src="/malulesson/public/assets/img/1667977802402.24a1dd5a.png" style="zoom:80%;"> <p>正确的处理办法，如下：</p> <img src="/malulesson/public/assets/img/1667978019032.550d3565.png" style="zoom:80%;"> <p>总时长是一个秒数，需要换算，把时间格式化，抽离成一个函数，如下：</p> <img src="/malulesson/public/assets/img/1667978305029.334b980f.png" style="zoom:80%;"> <p>测试是可以得到分钟和秒数，如下：</p> <img src="/malulesson/public/assets/img/1667978343760.36e2f1aa.png" style="zoom:80%;"> <p>定义两个状态，如下：</p> <img src="/malulesson/public/assets/img/1667978411712.ae4a9a63.png" style="zoom:80%;"> <p>给总时间赋值，如下：</p> <img src="/malulesson/public/assets/img/1667978452882.0c9ba5c8.png" style="zoom:80%;"> <p>在页面中就可以使用之，如下：</p> <img src="/malulesson/public/assets/img/1667978526756.28dec58b.png" style="zoom:80%;"> <p>随着音乐的播放，开始时间也需要变化，需求：</p> <img src="/malulesson/public/assets/img/1667979754694.d555c40c.png" style="zoom:80%;"> <p>音乐播放时，会调用一个钩子函数，如下：</p> <img src="/malulesson/public/assets/img/1667979873917.eff8ea5b.png" style="zoom:80%;"> <p>得到音乐播放的当前时间，如下：</p> <img src="/malulesson/public/assets/img/1667979945032.6d630de8.png" style="zoom:80%;"> <p>对时间也进行格式化更新startTime，如下：</p> <img src="/malulesson/public/assets/img/1667980053262.3365e61c.png" style="zoom:80%;"> <p>效果如下：</p> <img src="/malulesson/public/assets/img/1667980168805.20922872.png" style="zoom:80%;"> <p>现在需要对上面的那一片代码进行降频，如下：</p> <img src="/malulesson/public/assets/img/1667980256657.ab1edc4e.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667980676717.c0970438.png" style="zoom:80%;"> <h3 id="_4-进度条自动移动"><a href="#_4-进度条自动移动" class="header-anchor">#</a> 4，进度条自动移动</h3> <p>再次看一下，进度条与滑块，如下：</p> <img src="/malulesson/public/assets/img/1667980875248.f50deed9.png" style="zoom:80%;"> <p>定义两个状态，分别代表滑块和进度条的位置，如下：</p> <img src="/malulesson/public/assets/img/1667980949655.af113f1d.png" style="zoom:80%;"> <p>再定义两个变量，代表滑块的宽度和滑块所在区域的宽度，如下：</p> <img src="/malulesson/public/assets/img/1667981049463.68a75f91.png" style="zoom:80%;"> <p>之前我们已经得到的宽度，给上面的两个变量赋值，如下：</p> <img src="/malulesson/public/assets/img/1667981161544.7b06d16b.png" style="zoom:80%;"> <p>在音乐播放期间，就需要设置设置moveViewX和percent状态，在设置这两个位置，需要有总时长，把总时长定义成一个全局变量，如下：</p> <img src="/malulesson/public/assets/img/1667981387742.01e4caec.png" style="zoom:80%;"> <p>在一开始播放音乐时，是可以得到总时长的，如下：</p> <img src="/malulesson/public/assets/img/1667981428238.18a9f84d.png" style="zoom:80%;"> <p>在播放音乐时，就可以得到总时长，如下：</p> <img src="/malulesson/public/assets/img/1667981502324.752e1f4f.png" style="zoom:80%;"> <p>有了总时长，就可以计算滑块的位置和进度条的位置 了，如下：</p> <img src="/malulesson/public/assets/img/1667981741918.94779ac4.png" style="zoom:80%;"> <p>在HTML中，使用这两个状态，如下：</p> <img src="/malulesson/public/assets/img/1667981779266.deebbfe9.png" style="zoom:80%;"> <p>测试如下：</p> <img src="/malulesson/public/assets/img/1667981815337.28b23e06.png" style="zoom:80%;"> <h3 id="_5-进度条拖拽"><a href="#_5-进度条拖拽" class="header-anchor">#</a> 5，进度条拖拽</h3> <p>我们可以人为的移动滑块，目的是改变音乐播放，给滑块绑定change事件，如下：</p> <img src="/malulesson/public/assets/img/1667981939999.d0216030.png" style="zoom:80%;"> <p>实现chagne方法，如下：</p> <img src="/malulesson/public/assets/img/1667982113467.18ef06eb.png" style="zoom:80%;"> <p>定义两个全局变量，如下：</p> <img src="/malulesson/public/assets/img/1667982189536.70644664.png" style="zoom:80%;"> <p>计算出这两个变量的值，如下：</p> <img src="/malulesson/public/assets/img/1667982302153.1aea5a61.png" style="zoom:80%;"> <p>当滑动结束，也对应的一个事件，绑定之，如下：</p> <img src="/malulesson/public/assets/img/1667982383477.294442d8.png" style="zoom:80%;"> <p>实现对应的方法，如下：</p> <img src="/malulesson/public/assets/img/1667982529587.751a2157.png" style="zoom:80%;"> <p>在拖拽滑块时，有一个回弹的效果，处理如下：</p> <img src="/malulesson/public/assets/img/1667982717493.89b85208.png" style="zoom:80%;"> <p>如果在拖拽时，赋值为true，拖拽结束时，赋值为false，如下：</p> <img src="/malulesson/public/assets/img/1667982784083.bd40900d.png" style="zoom:80%;"> <p>在播放音乐时，判断一下flag，如下：</p> <img src="/malulesson/public/assets/img/1667982862614.6373ced4.png" style="zoom:80%;"> <p>测试之，OK。</p> <h3 id="_6-自动播放下一曲"><a href="#_6-自动播放下一曲" class="header-anchor">#</a> 6，自动播放下一曲</h3> <p>需求：</p> <img src="/malulesson/public/assets/img/1667982953359.65c13993.png" style="zoom:80%;"> <p>当音乐播放完毕后，会触发一个钩子，如下：</p> <img src="/malulesson/public/assets/img/1667983042098.80da81d8.png" style="zoom:80%;"> <p>给进度条绑定自定义事件，如下：</p> <img src="/malulesson/public/assets/img/1667983087559.7661a60b.png" style="zoom:80%;"> <p>上面的next就是下一曲，之前是点击按钮调用next，现在播放完毕，调用next。</p> <p>测试OK。</p> <h3 id="_7-歌词获取与显示"><a href="#_7-歌词获取与显示" class="header-anchor">#</a> 7，歌词获取与显示</h3> <p>创建歌词对应的组件，如下：</p> <img src="/malulesson/public/assets/img/1667983328263.24742380.png" style="zoom:80%;"> <p>在播放页中，引入，如下：</p> <img src="/malulesson/public/assets/img/1667983364477.3aa3b42e.png" style="zoom:80%;"> <p>使用之，如下：</p> <img src="/malulesson/public/assets/img/1667983438339.d49f6988.png" style="zoom:80%;"> <p>定义一个状态，控制是否显示歌词，如下：</p> <img src="/malulesson/public/assets/img/1667984242583.2c9a95f7.png" style="zoom:80%;"> <p>定义一个方法，改变状态，如下：</p> <img src="/malulesson/public/assets/img/1667984621730.b9f37195.png" style="zoom:80%;"> <p>在HTML中，使用状态，如下：</p> <img src="/malulesson/public/assets/img/1667984411869.ff6dd1b8.png" style="zoom:80%;"> <p>在词组件中，接收之，如下：</p> <img src="/malulesson/public/assets/img/1667984447600.5906b806.png" style="zoom:80%;"> <p>使用之，如下：</p> <img src="/malulesson/public/assets/img/1667984504846.39156a03.png" style="zoom:80%;"> <p>现在只会显示转盘，如下：</p> <img src="/malulesson/public/assets/img/1667984535339.6e2f7244.png" style="zoom:80%;"> <p>给转盘和歌词分别绑定事件，如下：</p> <img src="/malulesson/public/assets/img/1667984694740.9c1e7525.png" style="zoom:80%;"> <p>测试之，如下：</p> <img src="/malulesson/public/assets/img/1667984739529.f5fecdcd.png" style="zoom:80%;"> <p>定义一个云函数，可以根据歌词的ID，获取对应的歌词，如下：</p> <img src="/malulesson/public/assets/img/1667984806942.35913f1a.png" style="zoom:80%;"> <p>云函数需要上传部署。</p> <p>在播放页面中，获取歌词，就是去调用云函数，如下：</p> <img src="/malulesson/public/assets/img/1667984977494.757ab0af.png" style="zoom:80%;"> <p>测试之，如下：</p> <img src="/malulesson/public/assets/img/1667985019758.4e2111df.png" style="zoom:80%;"> <p>定义一个状态，来存储歌词，如下：</p> <img src="/malulesson/public/assets/img/1667985068781.8db381ba.png" style="zoom:80%;"> <p>给状态赋值，如下：</p> <img src="/malulesson/public/assets/img/1667985124464.3190d946.png" style="zoom:80%;"> <p>查看状态，如下：</p> <img src="/malulesson/public/assets/img/1667985175308.da2951aa.png" style="zoom:80%;"> <p>把歌词传递给歌词对应的组件，如下：</p> <img src="/malulesson/public/assets/img/1667985270381.96d4acbd.png" style="zoom:80%;"> <p>子进行接收之，如下：</p> <img src="/malulesson/public/assets/img/1667985299326.a3a706a2.png" style="zoom:80%;"> <p>如果有数据，就需要对歌词进行解析，如下：</p> <img src="/malulesson/public/assets/img/1667985379547.509c45b6.png" style="zoom:80%;"> <p>定义一个状态，保存歌词，对歌词进行解析，如下：</p> <img src="/malulesson/public/assets/img/1667985869333.af4731a4.png" style="zoom:80%;"> <p>解析歌词对应的方式，如下（自行分析）：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function">parselyric</span><span class="token punctuation">(</span><span class="token parameter">template</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> container <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     container<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[(\d{2,}):(\d{2,})\.(\d{1,3})\](.*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">const</span> second <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>
             list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                 <span class="token literal-property property">time</span><span class="token operator">:</span> second<span class="token punctuation">,</span>
                 <span class="token literal-property property">lyric</span><span class="token operator">:</span> res<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         list
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>查看状态，如下：</p> <img src="/malulesson/public/assets/img/1667986025096.9eb10452.png" style="zoom:80%;"> <p>有了歌词，要页面中就需要显示之，如下：</p> <img src="/malulesson/public/assets/img/1667986129376.037452f4.png" style="zoom:80%;"> <p>歌词对应的结构，如下(直接copy)：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{isShow}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scroll-view<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">scroll-with-animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{true}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scroll-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{0}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lyrics<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{list}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lyric<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.lyric}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>歌词对应的样式，如下：</p> <img src="/malulesson/public/assets/img/1667986237374.f7fd788e.png" style="zoom:80%;"> <p>歌词对应的样式，如下(直接copy)：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.scroll-view</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 32rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.lyrics</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 560rpx<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 280rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.lyric</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 64rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.ative</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_8-歌词歌曲联动"><a href="#_8-歌词歌曲联动" class="header-anchor">#</a> 8，歌词歌曲联动</h3> <p>分析：</p> <img src="/malulesson/public/assets/img/1667986442377.e147bd6a.png" style="zoom:80%;"> <p>子触发自定义事件，如下：</p> <img src="/malulesson/public/assets/img/1667986484410.40fcc3b9.png" style="zoom:80%;"> <p>父绑定自定义事件，如下：</p> <img src="/malulesson/public/assets/img/1667986522117.1a956569.png" style="zoom:80%;"> <p>当自定义事件发生时，调用timeUpdate方法，实现方法，如下：</p> <img src="/malulesson/public/assets/img/1667986618950.ef31c12b.png" style="zoom:80%;"> <p>得到歌词组件，调用歌词组件的方法，如下：</p> <img src="/malulesson/public/assets/img/1667986673966.c7e5182a.png" style="zoom:80%;"> <p>得到歌词组件，如下：</p> <img src="/malulesson/public/assets/img/1667986714516.d34b3ba6.png" style="zoom:80%;"> <p>实现子组件的update方法，如下：</p> <img src="/malulesson/public/assets/img/1667986807452.a10c1f56.png" style="zoom:80%;"> <p>需要让对应的歌词高亮，如下：</p> <img src="/malulesson/public/assets/img/1667987242627.6ab2dfd9.png" style="zoom:80%;"> <p>在HTM中使用之，如下：</p> <img src="/malulesson/public/assets/img/1667987262820.73209354.png" style="zoom:80%;"> <p>效果如下：</p> <img src="/malulesson/public/assets/img/1667987288934.c0ecadf2.png" style="zoom:80%;"> <p>现在还有一个问题，在播放歌词时，需要让它自动滚动，看HTML，如下：</p> <img src="/malulesson/public/assets/img/1667987386862.6c3adfeb.png" style="zoom:80%;"> <p>不要设备滚动的距离是不一样的，所以我们需要得到设备的信息，如下：</p> <img src="/malulesson/public/assets/img/1667988017116.9e55ebdf.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667988034510.64813d64.png" style="zoom:80%;"> <p>在HTML中，使用scrollTop，如下：</p> <img src="/malulesson/public/assets/img/1667988056671.d62ab9dd.png" style="zoom:80%;"> <p>效果如下：</p> <img src="/malulesson/public/assets/img/1667988085501.e7c88dd0.png" style="zoom:80%;"> <h3 id="_9-其它问题解决-自学"><a href="#_9-其它问题解决-自学" class="header-anchor">#</a> 9，其它问题解决（自学）</h3> <p>我们在点击下一曲的时候，再点击返回，发现，选中的还是上一次的歌曲，如下：</p> <img src="/malulesson/public/assets/img/1667988253919.c99d910f.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667988274250.a7b79e38.png" style="zoom:80%;"> <p>为什么，原因是我们歌曲选中，是通过checkId属性来实现的，如下：</p> <img src="/malulesson/public/assets/img/1667988336261.b0f3c075.png" style="zoom:80%;"> <p>在全局定义一个musicId，并定义获取和改变的对应的方法，如下：</p> <img src="/malulesson/public/assets/img/1667988401550.26f01080.png" style="zoom:80%;"> <p>在播放页，对musicId赋值，如下：</p> <img src="/malulesson/public/assets/img/1667988463400.bba6f866.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667988511341.fd1d48e5.png" style="zoom:80%;"> <p>在songList组件中，使用之，如下：</p> <img src="/malulesson/public/assets/img/1667988658313.49e3421b.png" style="zoom:80%;"> <p>测试OK。</p> <p>还有一个问题，在播放一个音乐时，如果如果返回 到列表中，再点击同一个音乐，到播放器，不是重新开始播放，而是接着上次播放的位置开始播放，定义一个状态，表示是否是同一个音乐，如下：</p> <img src="/malulesson/public/assets/img/1667988845563.8ec8d7d1.png" style="zoom:80%;"> <p>获取歌曲时，给isSame赋值，如下：</p> <img src="/malulesson/public/assets/img/1667988969006.5cea58a3.png" style="zoom:80%;"> <p>同理，获取音乐信息时，也判断是否是同一个音乐，如下：</p> <img src="/malulesson/public/assets/img/1667989019475.ecdc18e0.png" style="zoom:80%;"> <p>测试OK。</p> <p>但是还有一个问题，就是再次点进来时，总时间变成了0，如下：</p> <img src="/malulesson/public/assets/img/1667989079757.a267c835.png" style="zoom:80%;"> <p>解决：</p> <img src="/malulesson/public/assets/img/1667989156056.c556d627.png" style="zoom:80%;"> <img src="/malulesson/public/assets/img/1667989297359.9f05b4ca.png" style="zoom:80%;"> <p>解决OK</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/25/2022, 10:02:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/malulesson/public/Framework/mini/10.html" class="prev">
            10-小程序云开发
          </a></span> <span class="next"><a href="/malulesson/public/Framework/mini/12.html">
            12-uniapp
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#一-实现目标" class="sidebar-link reco-side-一-实现目标" data-v-cb1513f6>一，实现目标</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#二-创建项目并配置" class="sidebar-link reco-side-二-创建项目并配置" data-v-cb1513f6>二，创建项目并配置</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-创建项目" class="sidebar-link reco-side-_1-创建项目" data-v-cb1513f6>1，创建项目</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-指定环境id" class="sidebar-link reco-side-_3-指定环境id" data-v-cb1513f6>3，指定环境ID</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_4-配置基本结构" class="sidebar-link reco-side-_4-配置基本结构" data-v-cb1513f6>4，配置基本结构</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#三-轮播图与playlist组件" class="sidebar-link reco-side-三-轮播图与playlist组件" data-v-cb1513f6>三，轮播图与playList组件</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-轮播图实现" class="sidebar-link reco-side-_1-轮播图实现" data-v-cb1513f6>1，轮播图实现</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_2-songs组件实现" class="sidebar-link reco-side-_2-songs组件实现" data-v-cb1513f6>2，songs组件实现</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-数据监听器" class="sidebar-link reco-side-_3-数据监听器" data-v-cb1513f6>3，数据监听器</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#四-请求音乐数据的云函数" class="sidebar-link reco-side-四-请求音乐数据的云函数" data-v-cb1513f6>四，请求音乐数据的云函数</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-创建云函数并安装依赖" class="sidebar-link reco-side-_1-创建云函数并安装依赖" data-v-cb1513f6>1，创建云函数并安装依赖</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_2-在云函数中请求接口获取数据-存储到集合" class="sidebar-link reco-side-_2-在云函数中请求接口获取数据-存储到集合" data-v-cb1513f6>2，在云函数中请求接口获取数据，存储到集合</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-数据去重" class="sidebar-link reco-side-_3-数据去重" data-v-cb1513f6>3，数据去重</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_4-突破云函数中获取数据条件的限制" class="sidebar-link reco-side-_4-突破云函数中获取数据条件的限制" data-v-cb1513f6>4，突破云函数中获取数据条件的限制</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_5-利用定时触发器每天获取最新的数据" class="sidebar-link reco-side-_5-利用定时触发器每天获取最新的数据" data-v-cb1513f6>5，利用定时触发器每天获取最新的数据</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#五-小程序端获取音乐数据" class="sidebar-link reco-side-五-小程序端获取音乐数据" data-v-cb1513f6>五，小程序端获取音乐数据</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-创建云函数获取音乐的数据" class="sidebar-link reco-side-_1-创建云函数获取音乐的数据" data-v-cb1513f6>1，创建云函数获取音乐的数据</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_2-在小程序端调用云函数" class="sidebar-link reco-side-_2-在小程序端调用云函数" data-v-cb1513f6>2，在小程序端调用云函数</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-上拉加载更多与下拉刷新" class="sidebar-link reco-side-_3-上拉加载更多与下拉刷新" data-v-cb1513f6>3，上拉加载更多与下拉刷新</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#六-云函数中的路由" class="sidebar-link reco-side-六-云函数中的路由" data-v-cb1513f6>六，云函数中的路由</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-云函数中的路由的使用" class="sidebar-link reco-side-_1-云函数中的路由的使用" data-v-cb1513f6>1，云函数中的路由的使用</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#七-歌曲详情开发" class="sidebar-link reco-side-七-歌曲详情开发" data-v-cb1513f6>七，歌曲详情开发</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-歌曲详情组件开发" class="sidebar-link reco-side-_1-歌曲详情组件开发" data-v-cb1513f6>1，歌曲详情组件开发</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_2-实现songlist组件" class="sidebar-link reco-side-_2-实现songlist组件" data-v-cb1513f6>2，实现songList组件</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-高亮效果" class="sidebar-link reco-side-_3-高亮效果" data-v-cb1513f6>3，高亮效果</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_4-点击某个音乐去-播放页面" class="sidebar-link reco-side-_4-点击某个音乐去-播放页面" data-v-cb1513f6>4，点击某个音乐去 播放页面</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_5-在详情页把数据存储到本地" class="sidebar-link reco-side-_5-在详情页把数据存储到本地" data-v-cb1513f6>5，在详情页把数据存储到本地</a></li><li class="level-2" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#八-播放器实现" class="sidebar-link reco-side-八-播放器实现" data-v-cb1513f6>八，播放器实现</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_1-播放器页面布局" class="sidebar-link reco-side-_1-播放器页面布局" data-v-cb1513f6>1，播放器页面布局</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#" class="sidebar-link reco-side-" data-v-cb1513f6></a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_2-控制面板功能实现" class="sidebar-link reco-side-_2-控制面板功能实现" data-v-cb1513f6>2，控制面板功能实现</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_3-总时长与播放时间实现" class="sidebar-link reco-side-_3-总时长与播放时间实现" data-v-cb1513f6>3，总时长与播放时间实现</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_4-进度条自动移动" class="sidebar-link reco-side-_4-进度条自动移动" data-v-cb1513f6>4，进度条自动移动</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_5-进度条拖拽" class="sidebar-link reco-side-_5-进度条拖拽" data-v-cb1513f6>5，进度条拖拽</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_6-自动播放下一曲" class="sidebar-link reco-side-_6-自动播放下一曲" data-v-cb1513f6>6，自动播放下一曲</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_7-歌词获取与显示" class="sidebar-link reco-side-_7-歌词获取与显示" data-v-cb1513f6>7，歌词获取与显示</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_8-歌词歌曲联动" class="sidebar-link reco-side-_8-歌词歌曲联动" data-v-cb1513f6>8，歌词歌曲联动</a></li><li class="level-3" data-v-cb1513f6><a href="/malulesson/public/Framework/mini/11.html#_9-其它问题解决-自学" class="sidebar-link reco-side-_9-其它问题解决-自学" data-v-cb1513f6>9，其它问题解决（自学）</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/malulesson/public/assets/js/app.387489e1.js" defer></script><script src="/malulesson/public/assets/js/28.9ddac576.js" defer></script><script src="/malulesson/public/assets/js/1.485e4e25.js" defer></script><script src="/malulesson/public/assets/js/9.9fd67356.js" defer></script>
  </body>
</html>
